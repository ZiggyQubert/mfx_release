(function(d,l){var k,n=function(){},f=function(a){for(var b in a)return 0;return 1},c={}.toString,h=function(a){return"[object Function]"==c.call(a)},m=function(a){return"[object String]"==c.call(a)},b=function(a){return"[object Array]"==c.call(a)},a=function(a,b){if(a)for(var e=0;e<a.length;)b(a[e++])},e=function(a,b){for(var e in b)a[e]=b[e];return a},p=function(a,b){return e(Error(a),{src:"dojoLoader",info:b})},g=1,w=function(){return"_"+g++},q=function(a,b,e){return La(a,b,e,0,q)},r=this,s=r.document,
x=s&&s.createElement("DiV"),t=q.has=function(a){return h(v[a])?v[a]=v[a](r,s,x):v[a]},v=t.cache=l.hasCache;t.add=function(a,b,e,g){(void 0===v[a]||g)&&(v[a]=b);return e&&t(a)};t.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);t("host-webworker")&&(e(l.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1}),l.loaderPatch={injectUrl:function(a,b){try{importScripts(a),b()}catch(e){console.error(e)}}});
for(var A in d.has)t.add(A,d.has[A],0,1);var u=0,z=[],H=0,J=n,M=n,R;q.isXdUrl=n;q.initSyncLoader=function(a,b,e){H||(H=a,J=b,M=e);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:z,modules:B,execQ:V,getModule:$,injectModule:pa,setArrived:da,signal:y,finishExec:ga,execModule:ha,dojoRequirePlugin:H,getLegacyMode:function(){return u},guardCheckComplete:ia}};var N=location.protocol,O=location.host;q.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?!0:
(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=N||O&&a[2]!=O)};t.add("dojo-force-activex-xhr",!s.addEventListener&&"file:"==window.location.protocol);t.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(t("native-xhr")&&!t("dojo-force-activex-xhr"))R=function(){return new XMLHttpRequest};else{var T=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],E;for(k=0;3>k;)try{if(E=T[k++],new ActiveXObject(E))break}catch(I){}R=function(){return new ActiveXObject(E)}}q.getXhr=R;t.add("dojo-gettext-api",
1);q.getText=function(a,b,e){var g=R();g.open("GET",qa(a),!1);g.send(null);if(200==g.status||!location.host&&!g.status)e&&e(g.responseText,b);else throw p("xhrFailed",g.status);return g.responseText};var S=new Function("return eval(arguments[0]);");q.eval=function(a,b){return S(a+"\r\n//# sourceURL\x3d"+b)};var C={},y=q.signal=function(e,g){var p=C[e];a(p&&p.slice(0),function(a){a.apply(null,b(g)?g:[g])})},D=q.on=function(a,b){var e=C[a]||(C[a]=[]);e.push(b);return{remove:function(){for(var a=0;a<
e.length;a++)if(e[a]===b){e.splice(a,1);break}}}},W=[],Q={},G=[],F={},L=q.map={},P=[],B={},K="",U={},Y={},ea={},Z=0,ra=function(a){var b,e,g,p;for(b in Y)e=Y[b],(g=b.match(/^url\:(.+)/))?U["url:"+Ma(g[1],a)]=e:"*now"==b?p=e:"*noref"!=b&&(g=ja(b,a,!0),U[g.mid]=U["url:"+g.url]=e);p&&p(Ba(a));Y={}},Na=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},Ca=function(a,b){b.splice(0,b.length);for(var e in a)b.push([e,a[e],RegExp("^"+Na(e)+"(/|$)"),e.length]);b.sort(function(a,
b){return b[3]-a[3]});return b},$a=function(b,e){a(b,function(a){e.push([m(a[0])?RegExp("^"+Na(a[0])+"$"):a[0],a[1]])})},Oa=function(a){var b=a.name;b||(b=a,a={name:b});a=e({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(L[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));F[b]=a},Pa=[],ka=function(b,g,p){for(var c in b){"waitSeconds"==c&&(q.waitms=1E3*(b[c]||0));"cacheBust"==c&&(K=b[c]?m(b[c])?b[c]:(new Date).getTime()+"":"");if("baseUrl"==c||"combo"==c)q[c]=b[c];
if("async"==c){var d=b[c];q.legacyMode=u=m(d)&&/sync|legacyAsync/.test(d)?d:!d?"sync":!1;q.async=!u}b[c]!==v&&(q.rawConfig[c]=b[c],"has"!=c&&t.add("config-"+c,b[c],0,g))}q.baseUrl||(q.baseUrl="./");/\/$/.test(q.baseUrl)||(q.baseUrl+="/");for(c in b.has)t.add(c,b.has[c],0,g);a(b.packages,Oa);for(var f in b.packagePaths)a(b.packagePaths[f],function(a){var b=f+"/"+a;m(a)&&(a={name:a});a.location=b;Oa(a)});Ca(e(L,b.map),P);a(P,function(a){a[1]=Ca(a[1],[]);"*"==a[0]&&(P.star=a)});Ca(e(Q,b.paths),G);$a(b.aliases,
W);if(g)Pa.push({config:b.config});else for(c in b.config)g=$(c,p),g.config=e(g.config||{},b.config[c]);b.cache&&(ra(),Y=b.cache,b.cache["*noref"]&&ra());y("config",[b,q.rawConfig])};t("dojo-cdn");var sa=s.getElementsByTagName("script");k=0;for(var aa,ca,ta,la;k<sa.length;){aa=sa[k++];if((ta=aa.getAttribute("src"))&&(la=ta.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))ca=la[3]||"",l.baseUrl=l.baseUrl||ca,Z=aa;if(ta=aa.getAttribute("data-dojo-config")||aa.getAttribute("djConfig"))ea=q.eval("({ "+ta+" })",
"data-dojo-config"),Z=aa}q.rawConfig={};ka(l,1);t("dojo-cdn")&&((F.dojo.location=ca)&&(ca+="/"),F.dijit.location=ca+"../dijit/",F.dojox.location=ca+"../dojox/");ka(d,1);ka(ea,1);var ma=function(b){ia(function(){a(b.deps,pa)})},La=function(a,g,c,d,f){var h;if(m(a)){if((h=$(a,d,!0))&&h.executed)return h.result;throw p("undefinedModule",a);}b(a)||(ka(a,0,d),a=g,g=c);if(b(a))if(a.length){c="require*"+w();for(var k,t=[],l=0;l<a.length;)k=a[l++],t.push($(k,d));h=e(ua("",c,0,""),{injected:2,deps:t,def:g||
n,require:d?d.require:q,gc:1});B[h.mid]=h;ma(h);var M=na&&"sync"!=u;ia(function(){ha(h,M)});h.executed||V.push(h);fa()}else g&&g();return f},Ba=function(a){if(!a)return q;var b=a.require;b||(b=function(e,g,p){return La(e,g,p,a,b)},a.require=e(b,q),b.module=a,b.toUrl=function(b){return Ma(b,a)},b.toAbsMid=function(b){return Da(b,a)},b.syncLoadNls=function(b){b=ja(b,a);var e=B[b.mid];if(!e||!e.executed)if(ba=U[b.mid]||U["url:"+b.url])va(ba),e=B[b.mid];return e&&e.executed&&e.result});return b},V=[],
wa=[],X={},ab=function(a){a.injected=1;X[a.mid]=1;a.url&&(X[a.url]=a.pack||1);Qa()},da=function(a){a.injected=2;delete X[a.mid];a.url&&delete X[a.url];f(X)&&(xa(),"xd"==u&&(u="sync"))},bb=q.idle=function(){return!wa.length&&f(X)&&!V.length&&!na},Ea=function(a,b){if(b)for(var e=0;e<b.length;e++)if(b[e][2].test(a))return b[e];return 0},Ra=function(a){var b=[],e,g;for(a=a.replace(/\\/g,"/").split("/");a.length;)e=a.shift(),".."==e&&b.length&&".."!=g?(b.pop(),g=b[b.length-1]):"."!=e&&b.push(g=e);return b.join("/")},
ua=function(a,b,e,g){var p=q.isXdUrl(g);return{pid:a,mid:b,pack:e,url:g,executed:0,def:0,isXd:p,isAmd:!!(p||F[a]&&F[a].isAmd)}},Sa=function(b,e,g,c,d,f,m,k,w){var n,q,l,M;M=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||M&&!e)return ua(0,b,0,b);b=Ra(M?e.mid+"/../"+b:b);if(/^\./.test(b))throw p("irrationalPath",b);e&&(l=Ea(e.mid,f));(l=(l=l||f.star)&&Ea(b,l[1]))&&(b=l[1]+b.substring(l[3]));e=(la=b.match(/^([^\/]+)(\/(.+))?$/))?la[1]:"";(n=g[e])?b=e+"/"+(q=la[3]||n.main):e="";var s=0;a(k,function(a){var e=
b.match(a[0]);e&&0<e.length&&(s=h(a[1])?b.replace(a[0],a[1]):a[1])});if(s)return Sa(s,0,g,c,d,f,m,k,w);if(g=c[b])return w?ua(g.pid,g.mid,g.pack,g.url):c[b];c=(l=Ea(b,m))?l[1]+b.substring(l[3]):e?n.location+"/"+q:t("config-tlmSiblingOfDojo")?"../"+b:b;/(^\/)|(\:)/.test(c)||(c=d+c);return ua(e,b,n,Ra(c+".js"))},ja=function(a,b,e){return Sa(a,b,F,B,q.baseUrl,e?[]:P,e?[]:G,e?[]:W)},Ta=function(a,b,e){return a.normalize?a.normalize(b,function(a){return Da(a,e)}):Da(b,e)},Ua=0,$=function(a,b,e){var g,p;
(g=a.match(/^(.+?)\!(.*)$/))?(p=$(g[1],b,e),"sync"==u&&!p.executed&&(pa(p),2===p.injected&&!p.executed&&ia(function(){ha(p)}),p.executed?ya(p):V.unshift(p)),5===p.executed&&!p.load&&ya(p),p.load?(g=Ta(p,g[2],b),a=p.mid+"!"+(p.dynamic?++Ua+"!":"")+g):(g=g[2],a=p.mid+"!"+ ++Ua+"!waitingForPlugin"),a={plugin:p,mid:a,req:Ba(b),prid:g}):a=ja(a,b);return B[a.mid]||!e&&(B[a.mid]=a)},Da=q.toAbsMid=function(a,b){return ja(a,b).mid},Ma=q.toUrl=function(a,b){var e=ja(a+"/x",b),g=e.url;return qa(0===e.pid?a:
g.substring(0,g.length-5))},Va={injected:2,executed:5,def:3,result:3},Fa=function(a){return B[a]=e({mid:a},Va)},cb=Fa("require"),db=Fa("exports"),eb=Fa("module"),za={},Ga=0,ya=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},fb=function(b){var g={};a(b.loadQ,function(a){var p=Ta(b,a.prid,a.req.module),c=b.dynamic?a.mid.replace(/waitingForPlugin$/,p):b.mid+"!"+p,p=e(e({},a),{mid:c,prid:p,injected:0});B[c]||Wa(B[c]=p);g[a.mid]=B[c];da(a);delete B[a.mid]});
b.loadQ=0;var p=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=g[b[e].mid])&&(b[e]=a)},c;for(c in B)p(B[c]);a(V,p)},ga=function(b){q.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=Ga++;a(b.provides,function(a){a()});b.loadQ&&(ya(b),fb(b));for(k=0;k<V.length;)V[k]===b?V.splice(k,1):k++;/^require\*/.test(b.mid)&&delete B[b.mid]},gb=[],ha=function(a,b){if(4===a.executed)return q.trace("loader-circular-dependency",[gb.concat(a.mid).join("-\x3e")]),!a.def||b?za:a.cjs&&a.cjs.exports;
if(!a.executed){if(!a.def)return za;var e=a.mid,g=a.deps||[],c,d=[],f=0;for(a.executed=4;c=g[f++];){c=c===cb?Ba(a):c===db?a.cjs.exports:c===eb?a.cjs:ha(c,b);if(c===za)return a.executed=0,q.trace("loader-exec-module",["abort",e]),za;d.push(c)}q.trace("loader-run-factory",[a.mid]);var e=a.def,m;z.unshift(a);if(t("config-dojo-loader-catches"))try{m=h(e)?e.apply(null,d):e}catch(k){y("error",a.result=p("factoryThrew",[a,k]))}else m=h(e)?e.apply(null,d):e;a.result=void 0===m&&a.cjs?a.cjs.exports:m;z.shift(a);
ga(a)}return a.result},na=0,ia=function(a){try{na++,a()}finally{na--}bb()&&y("idle",[])},fa=function(){na||ia(function(){J();for(var a,b,e=0;e<V.length;)a=Ga,b=V[e],ha(b),a!=Ga?(J(),e=0):e++})};void 0===t("dojo-loader-eval-hint-url")&&t.add("dojo-loader-eval-hint-url",1);var qa="function"==typeof d.fixupUrl?d.fixupUrl:function(a){a+="";return a+(K?(/\?/.test(a)?"\x26":"?")+K:"")},Wa=function(a){var b=a.plugin;5===b.executed&&!b.load&&ya(b);var e=function(b){a.result=b;da(a);ga(a);fa()};b.load?b.load(a.prid,
a.req,e):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],V.unshift(b),pa(b))},ba=0,oa=0,Ha=0,va=function(a,b){t("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ha=1;if(t("config-dojo-loader-catches"))try{a===ba?ba.call(null):q.eval(a,t("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(e){y("error",p("evalModuleThrew",b))}else a===ba?ba.call(null):q.eval(a,t("dojo-loader-eval-hint-url")?b.url:b.mid);Ha=0},pa=function(b){var g=b.mid,c=b.url;if(!b.executed&&!b.injected&&!(X[g]||b.url&&(b.pack&&X[b.url]===
b.pack||1==X[b.url])))if(ab(b),b.plugin)Wa(b);else{var d=function(){Xa(b);if(2!==b.injected){if(t("dojo-enforceDefine")){y("error",p("noDefine",b));return}da(b);e(b,Va);q.trace("loader-define-nonmodule",[b.url])}u?!z.length&&fa():fa()};if(ba=U[g]||U["url:"+b.url])q.trace("loader-inject",["cache",b.mid,c]),va(ba,b),d();else{if(u)if(b.isXd)"sync"==u&&(u="xd");else if(!(b.isAmd&&"sync"!=u)){var f=function(e){if("sync"==u){z.unshift(b);va(e,b);z.shift();Xa(b);b.cjs||(da(b),ga(b));if(b.finish){e=g+"*finish";
var p=b.finish;delete b.finish;Ia(e,["dojo",("dojo/require!"+p.join(",")).replace(/\./g,"/")],function(b){a(p,function(a){b.require(a)})});V.unshift($(e))}d()}else(e=M(b,e))?(va(e,b),d()):(oa=b,q.injectUrl(qa(c),d,b),oa=0)};q.trace("loader-inject",["xhr",b.mid,c,"sync"!=u]);if(t("config-dojo-loader-catches"))try{q.getText(c,"sync"!=u,f)}catch(h){y("error",p("xhrInjectFailed",[b,h]))}else q.getText(c,"sync"!=u,f);return}q.trace("loader-inject",["script",b.mid,c]);oa=b;q.injectUrl(qa(c),d,b);oa=0}}},
Ja=function(a,b,g){q.trace("loader-define-module",[a.mid,b]);var c=a.mid;if(2===a.injected)return y("error",p("multipleDefine",a)),a;e(a,{deps:b,def:g,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var d=0;b[d];d++)b[d]=$(b[d],a);u&&!X[c]&&(ma(a),V.push(a),fa());da(a);!h(g)&&!b.length&&(a.result=g,ga(a));return a},Xa=function(b,e){for(var g=[],p,c;wa.length;)c=wa.shift(),e&&(c[0]=e.shift()),p=c[0]&&$(c[0])||b,g.push([p,
c[1],c[2]]);ra(b);a(g,function(a){ma(Ja.apply(null,a))})},Aa=0,xa=n,Qa=n,xa=function(){Aa&&clearTimeout(Aa);Aa=0},Qa=function(){xa();q.waitms&&(Aa=r.setTimeout(function(){xa();y("error",p("timeout",X))},q.waitms))};t.add("ie-event-behavior",s.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ka=function(a,b,e,g){if(t("ie-event-behavior"))return a.attachEvent(e,g),function(){a.detachEvent(e,g)};a.addEventListener(b,g,!1);return function(){a.removeEventListener(b,
g,!1)}},hb=Ka(window,"load","onload",function(){q.pageLoaded=1;"complete"!=s.readyState&&(s.readyState="complete");hb()}),sa=s.getElementsByTagName("script");for(k=0;!Z;)if(!/^dojo/.test((aa=sa[k++])&&aa.type))Z=aa;q.injectUrl=function(a,b,e){e=e.node=s.createElement("script");var g=Ka(e,"load","onreadystatechange",function(a){a=a||window.event;var e=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(e.readyState))g(),c(),b&&b()}),c=Ka(e,"error","onerror",function(b){g();c();y("error",
p("scriptError",[a,b]))});e.type="text/javascript";e.charset="utf-8";e.src=a;Z.parentNode.insertBefore(e,Z);return e};q.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(b){}};q.trace=n;var Ia=function(a,b,e){var g=arguments.length,c=["require","exports","module"],d=[0,a,b];1==g?d=[0,h(a)?c:[],a]:2==g&&m(a)?d=[a,h(b)?c:[],b]:3==g&&(d=[a,b,e]);q.trace("loader-define",d.slice(0,2));if((g=d[0]&&$(d[0]))&&!X[g.mid])ma(Ja(g,d[1],d[2]));else if(!t("ie-event-behavior")||Ha)wa.push(d);else{g=
g||oa;if(!g)for(a in X)if((c=B[a])&&c.node&&"interactive"===c.node.readyState){g=c;break}g?(ra(g),ma(Ja(g,d[1],d[2]))):y("error",p("ieDefineFailed",d[0]));fa()}};Ia.amd={vendor:"dojotoolkit.org"};e(e(q,l.loaderPatch),d.loaderPatch);D("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(e){}});e(q,{uid:w,cache:U,packs:F});if(r.define)y("error",p("defineAlreadyDefined",0));else{r.define=Ia;r.require=q;a(Pa,function(a){ka(a)});var Ya=ea.deps||d.deps||l.deps,Za=ea.callback||
d.callback||l.callback;q.boot=Ya||Za?[Ya||[],Za]:0}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../dojox",name:"dojox"},{location:"../gridx",main:"Grid",name:"gridx"},{location:"../malifaux",name:"malifaux"}]});
require({cache:{"malifaux/main":function(){define(["./Browser"],function(d){})},"malifaux/Browser":function(){define("dojo/_base/lang dojo/_base/declare dojo/on dojo/query dojo/dom-class dijit/registry dojo/dom-form ./data ./sort/SearchEngine ./sort/CardTypeOption ./sort/ByStation ./sort/ByFaction ./sort/ByCardType dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Browser.html ./sort/SortOptions ./cards/lists/List ./cards/Viewer dojo/NodeList-traverse".split(" "),
function(d,l,k,n,f,c,h,m,b,a,e,p,g,w,q,r,s){return l([w,q,r],{templateString:s,filterList:[p,e,g],SearchEngine:new b,currentFilter:null,currentGroup:null,_currentListClasses:[],constructor:function(){this._currentListClasses=[]},postCreate:function(){this.inherited(arguments);k(this.showSortButtonNode,"click",d.hitch(this,function(){f.toggle(this.domNode,"showSortPane")}));k(this.displayPaneVeilNode,"click",d.hitch(this,function(){f.remove(this.domNode,"showSortPane")}));this.sortOptions.on("setSortOptions",
d.hitch(this,function(a){f.remove(this.domNode,"showSortPane");this.updateList(a)}));k(this.cardViewer.domNode,"click",d.hitch(this,function(){this.cardViewer.hide()}));k(this.cardList.domNode,".cardListItem[data-id]:click",d.hitch(this,function(a){a.stopPropagation();a=n(a.target).closest(".cardListItem[data-id]").attr("data-id");this.selectCardInList(m.cardCache[a])}))},selectCardInList:function(a){this.cardViewer.set("cardData",a);this.cardViewer.show()},updateList:function(a){this.removeListAllListClasses();
return this.SearchEngine.query(a).then(d.hitch(this,function(b){this.setListClasses(a);this.addCardsToList(b)}))},setListClasses:function(a){a.smartSort&&this._currentListClasses.push("sortOption-smartSort");if("ty-CardType"!=a.filterId)for(var b=0;b<a.cardTypes.length;b++)this._currentListClasses.push("cardType-"+a.cardTypes[b]);else this._currentListClasses.push("cardType-"+a.filterBy);this._currentListClasses.push("filterId-"+a.filterId);this._currentListClasses.push("filterBy-"+a.filterBy);a.groupBy?
this._currentListClasses.push("groupBy-"+a.groupBy):this._currentListClasses.push("groupBy-none");f.add(this.cardList.domNode,this._currentListClasses.join(" "))},removeListAllListClasses:function(){f.remove(this.cardList.domNode,this._currentListClasses.join(" "));this._currentListClasses=[]},addCardsToList:function(a){this.cardList.set("cardData",a)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(d,l){l.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;
return 1});var k=l("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=k.length,f=function(a,b,c){c||(c=a[0]&&d.scopeMap[a[0]]?d.scopeMap[a.shift()][1]:d.global);try{for(var g=0;g<a.length;g++){var f=a[g];if(!(f in c))if(b)c[f]={};else return;c=c[f]}return c}catch(h){}},c=Object.prototype.toString,h=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},m=/\{([^\}]+)\}/g,b={_extraNames:k,_mixin:function(a,
b,c){var g,d,f,h={};for(g in b)if(d=b[g],!(g in a)||a[g]!==d&&(!(g in h)||h[g]!==d))a[g]=c?c(d):d;if(l("bug-for-in-skips-shadowed")&&b)for(f=0;f<n;++f)if(g=k[f],d=b[g],!(g in a)||a[g]!==d&&(!(g in h)||h[g]!==d))a[g]=c?c(d):d;return a},mixin:function(a,e){a||(a={});for(var c=1,g=arguments.length;c<g;c++)b._mixin(a,arguments[c]);return a},setObject:function(a,b,c){var g=a.split(".");a=g.pop();return(c=f(g,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return f(a?a.split("."):[],b,c)},exists:function(a,
e){return void 0!==b.getObject(a,!1,e)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===c.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||b.isArray(a)||b.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!b.isString(a)&&!b.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(b.isArray(a)||isFinite(a.length))},
isAlien:function(a){return a&&!b.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,e){for(var c=1,g=arguments.length;c<g;c++)b._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,e){var c=b._toArray(arguments,2),g=b.isString(e);return function(){var f=b._toArray(arguments),h=g?(a||d.global)[e]:e;return h&&h.apply(a||this,c.concat(f))}},hitch:function(a,e){if(2<arguments.length)return b._hitchArgs.apply(d,arguments);e||(e=a,a=null);if(b.isString(e)){a=a||d.global;
if(!a[e])throw['lang.hitch: scope["',e,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[e].apply(a,arguments||[])}}return!a?e:function(){return e.apply(a,arguments||[])}},delegate:function(){function a(){}return function(e,c){a.prototype=e;var g=new a;a.prototype=null;c&&b._mixin(g,c);return g}}(),_toArray:l("ie")?function(){function a(a,b,g){g=g||[];for(b=b||0;b<a.length;b++)g.push(a[b]);return g}return function(b){return(b.item?a:h).apply(this,arguments)}}():h,partial:function(a){return b.hitch.apply(d,
[null].concat(b._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||b.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var e,c,g;if(b.isArray(a)){e=[];c=0;for(g=a.length;c<g;++c)c in a&&e.push(b.clone(a[c]))}else e=a.constructor?new a.constructor:{};return b._mixin(e,a,b.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},replace:function(a,e,c){return a.replace(c||m,b.isFunction(e)?e:function(a,c){return b.getObject(c,!1,e)})}};b.mixin(d,b);return b})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(d,l,k,n){var f,c;f=function(){return this}();var h={},m={},b={config:l,global:f,dijit:h,dojox:m},h={dojo:["dojo",b],dijit:["dijit",h],dojox:["dojox",m]};n=k.map&&k.map[n.id.match(/[^\/]+/)[0]];for(c in n)h[c]?h[c][0]=n[c]:h[c]=[n[c],{}];for(c in h)n=h[c],
n[1]._scopeName=n[0],l.noGlobals||(f[n[0]]=n[1]);b.scopeMap=h;b.baseUrl=b.config.baseUrl=k.baseUrl;b.isAsync=k.async;b.locale=l.locale;f="$Rev: ae6be82 $".match(/[0-9a-f]{7,}/);b.version={major:1,minor:10,patch:3,flag:"",revision:f?f[0]:NaN,toString:function(){var a=b.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(b);b.exit=function(){};"undefined"!=typeof console||
(console={});n="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var a;for(f=0;a=n[f++];)console[a]||function(){var b=a+"";console[b]="log"in console?function(){var a=Array.prototype.slice.call(arguments);a.unshift(b+":");console.log(a.join(" "))}:function(){};console[b]._fake=!0}();d.add("dojo-debug-messages",!!l.isDebug);b.deprecated=b.experimental=function(){};d("dojo-debug-messages")&&(b.deprecated=function(a,b,g){a="DEPRECATED: "+
a;b&&(a+=" "+b);g&&(a+=" -- will be removed in version: "+g);console.warn(a)},b.experimental=function(a,b){var g="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";b&&(g+=" "+b);console.warn(g)});if(l.modulePaths){b.deprecated("dojo.modulePaths","use paths configuration");d={};for(c in l.modulePaths)d[c.replace(/\./g,"/")]=l.modulePaths[c];k({paths:d})}b.moduleUrl=function(a,c){b.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var g=null;a&&(g=k.toUrl(a.replace(/\./g,"/")+(c?
"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return g};b._hasResource={};return b})},"dojo/has":function(){define(["require","module"],function(d,l){var k=d.has||function(){};k.add("dom-addeventlistener",!!document.addEventListener);k.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);k.add("touch-events","ontouchstart"in document);k.add("pointer-events","onpointerdown"in document);k.add("MSPointer","msMaxTouchPoints"in
navigator);k.add("device-width",screen.availWidth||innerWidth);var n=document.createElement("form");k.add("dom-attributes-explicit",0==n.attributes.length);k.add("dom-attributes-specified-flag",0<n.attributes.length&&40>n.attributes.length);k.clearElement=function(d){d.innerHTML="";return d};k.normalize=function(d,c){var h=d.match(/[\?:]|[^:\?]*/g),m=0,b=function(a){var e=h[m++];if(":"==e)return 0;if("?"==h[m++]){if(!a&&k(e))return b();b(!0);return b(a)}return e||0};return(d=b())&&c(d)};k.load=function(d,
c,h){d?c([d],h):h()};return k})},"dojo/_base/config":function(){define(["../has","require"],function(d,l){var k={},n=l.rawConfig,f;for(f in n)k[f]=n[f];if(!k.locale&&"undefined"!=typeof navigator&&(n=navigator.language||navigator.userLanguage))k.locale=n.toLowerCase();return k})},"dojo/sniff":function(){define(["./has"],function(d){var l=navigator,k=l.userAgent,l=l.appVersion,n=parseFloat(l);d.add("air",0<=k.indexOf("AdobeAIR"));d.add("msapp",parseFloat(k.split("MSAppHost/")[1])||void 0);d.add("khtml",
0<=l.indexOf("Konqueror")?n:void 0);d.add("webkit",parseFloat(k.split("WebKit/")[1])||void 0);d.add("chrome",parseFloat(k.split("Chrome/")[1])||void 0);d.add("safari",0<=l.indexOf("Safari")&&!d("chrome")?parseFloat(l.split("Version/")[1]):void 0);d.add("mac",0<=l.indexOf("Macintosh"));d.add("quirks","BackCompat"==document.compatMode);if(k.match(/(iPhone|iPod|iPad)/)){var f=RegExp.$1.replace(/P/,"p"),c=k.match(/OS ([\d_]+)/)?RegExp.$1:"1",c=parseFloat(c.replace(/_/,".").replace(/_/g,""));d.add(f,c);
d.add("ios",c)}d.add("android",parseFloat(k.split("Android ")[1])||void 0);d.add("bb",(0<=k.indexOf("BlackBerry")||0<=k.indexOf("BB10"))&&parseFloat(k.split("Version/")[1])||void 0);d.add("trident",parseFloat(l.split("Trident/")[1])||void 0);d.add("svg","undefined"!==typeof SVGAngle);d("webkit")||(0<=k.indexOf("Opera")&&d.add("opera",9.8<=n?parseFloat(k.split("Version/")[1])||n:n),0<=k.indexOf("Gecko")&&(!d("khtml")&&!d("webkit")&&!d("trident"))&&d.add("mozilla",n),d("mozilla")&&d.add("ff",parseFloat(k.split("Firefox/")[1]||
k.split("Minefield/")[1])||void 0),document.all&&!d("opera")&&(k=parseFloat(l.split("MSIE ")[1])||void 0,(l=document.documentMode)&&(5!=l&&Math.floor(k)!=l)&&(k=l),d.add("ie",k)),d.add("wii","undefined"!=typeof opera&&opera.wiiremote));return d})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(d,l,k){function n(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function f(a,b,e){var g,c,p,d,f,h,m,k=this._inherited=this._inherited||{};"string"==typeof a&&(g=a,a=b,b=e);
e=0;d=a.callee;(g=g||d.nom)||n("can't deduce a name to call inherited()",this.declaredClass);f=this.constructor._meta;p=f.bases;m=k.p;if(g!=H){if(k.c!==d&&(m=0,h=p[0],f=h._meta,f.hidden[g]!==d)){(c=f.chains)&&"string"==typeof c[g]&&n("calling chained method with inherited: "+g,this.declaredClass);do if(f=h._meta,c=h.prototype,f&&(c[g]===d&&c.hasOwnProperty(g)||f.hidden[g]===d))break;while(h=p[++m]);m=h?m:-1}if(h=p[++m])if(c=h.prototype,h._meta&&c.hasOwnProperty(g))e=c[g];else{d=v[g];do if(c=h.prototype,
(e=c[g])&&(h._meta?c.hasOwnProperty(g):e!==d))break;while(h=p[++m])}e=h&&e||v[g]}else{if(k.c!==d&&(m=0,(f=p[0]._meta)&&f.ctor!==d)){c=f.chains;for((!c||"manual"!==c.constructor)&&n("calling chained constructor with inherited",this.declaredClass);(h=p[++m])&&!((f=h._meta)&&f.ctor===d););m=h?m:-1}for(;(h=p[++m])&&!(e=(f=h._meta)?f.ctor:h););e=h&&e}k.c=e;k.p=m;if(e)return!0===b?e:e.apply(this,b||a)}function c(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function h(a,
b,e){var g=this.getInherited(a,b);if(g)return g.apply(this,e||b||a)}function m(a){for(var b=this.constructor._meta.bases,e=0,g=b.length;e<g;++e)if(b[e]===a)return!0;return this instanceof a}function b(a,b){for(var e in b)e!=H&&b.hasOwnProperty(e)&&(a[e]=b[e]);if(l("bug-for-in-skips-shadowed"))for(var g=k._extraNames,c=g.length;c;)e=g[--c],e!=H&&b.hasOwnProperty(e)&&(a[e]=b[e])}function a(a){x.safeMixin(this.prototype,a);return this}function e(a,b){a instanceof Array||"function"==typeof a||(b=a,a=
void 0);b=b||{};a=a||[];return x([this].concat(a),b)}function p(a,b){return function(){var e=arguments,g=e,c=e[0],p,d;d=a.length;var f;if(!(this instanceof e.callee))return s(e);if(b&&(c&&c.preamble||this.preamble)){f=Array(a.length);f[0]=e;for(p=0;;){if(c=e[0])(c=c.preamble)&&(e=c.apply(this,e)||e);c=a[p].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(e=c.apply(this,e)||e);if(++p==d)break;f[p]=e}}for(p=d-1;0<=p;--p)c=a[p],(c=(d=c._meta)?d.ctor:c)&&c.apply(this,f?f[p]:e);(c=this.postscript)&&
c.apply(this,g)}}function g(a,b){return function(){var e=arguments,g=e,c=e[0];if(!(this instanceof e.callee))return s(e);b&&(c&&(c=c.preamble)&&(g=c.apply(this,g)||g),(c=this.preamble)&&c.apply(this,g));a&&a.apply(this,e);(c=this.postscript)&&c.apply(this,e)}}function w(a){return function(){var b=arguments,e=0,g,c;if(!(this instanceof b.callee))return s(b);for(;g=a[e];++e)if(g=(c=g._meta)?c.ctor:g){g.apply(this,b);break}(g=this.postscript)&&g.apply(this,b)}}function q(a,b,e){return function(){var g,
c,p=0,d=1;e&&(p=b.length-1,d=-1);for(;g=b[p];p+=d)c=g._meta,(g=(c?c.hidden:g.prototype)[a])&&g.apply(this,arguments)}}function r(a){u.prototype=a.prototype;a=new u;u.prototype=null;return a}function s(a){var b=a.callee,e=r(b);b.apply(e,a);return e}function x(d,h,l){"string"!=typeof d&&(l=h,h=d,d="");l=l||{};var s,u,E,I,S,C,y,D=1,W=h;if("[object Array]"==A.call(h)){D=d;E=[];I=[{cls:0,refs:[]}];C={};for(var Q=1,G=h.length,F=0,L,P,B,K;F<G;++F){(L=h[F])?"[object Function]"!=A.call(L)&&n("mixin #"+F+" is not a callable constructor.",
D):n("mixin #"+F+" is unknown. Did you use dojo.require to pull it in?",D);P=L._meta?L._meta.bases:[L];B=0;for(L=P.length-1;0<=L;--L)K=P[L].prototype,K.hasOwnProperty("declaredClass")||(K.declaredClass="uniqName_"+z++),K=K.declaredClass,C.hasOwnProperty(K)||(C[K]={count:0,refs:[],cls:P[L]},++Q),K=C[K],B&&B!==K&&(K.refs.push(B),++B.count),B=K;++B.count;I[0].refs.push(B)}for(;I.length;){B=I.pop();E.push(B.cls);for(--Q;u=B.refs,1==u.length;){B=u[0];if(!B||--B.count){B=0;break}E.push(B.cls);--Q}if(B){F=
0;for(G=u.length;F<G;++F)B=u[F],--B.count||I.push(B)}}Q&&n("can't build consistent linearization",D);L=h[0];E[0]=L?L._meta&&L===E[E.length-L._meta.bases.length]?L._meta.bases.length:1:0;C=E;E=C[0];D=C.length-E;h=C[D]}else C=[0],h?"[object Function]"==A.call(h)?(E=h._meta,C=C.concat(E?E.bases:h)):n("base class is not a callable constructor.",d):null!==h&&n("unknown base class. Did you use dojo.require to pull it in?",d);if(h)for(u=D-1;;--u){s=r(h);if(!u)break;E=C[u];(E._meta?b:t)(s,E.prototype);I=
new Function;I.superclass=h;I.prototype=s;h=s.constructor=I}else s={};x.safeMixin(s,l);E=l.constructor;E!==v.constructor&&(E.nom=H,s.constructor=E);for(u=D-1;u;--u)(E=C[u]._meta)&&E.chains&&(y=t(y||{},E.chains));s["-chains-"]&&(y=t(y||{},s["-chains-"]));E=!y||!y.hasOwnProperty(H);C[0]=I=y&&"manual"===y.constructor?w(C):1==C.length?g(l.constructor,E):p(C,E);I._meta={bases:C,hidden:l,chains:y,parents:W,ctor:l.constructor};I.superclass=h&&h.prototype;I.extend=a;I.createSubclass=e;I.prototype=s;s.constructor=
I;s.getInherited=c;s.isInstanceOf=m;s.inherited=J;s.__inherited=f;d&&(s.declaredClass=d,k.setObject(d,I));if(y)for(S in y)s[S]&&("string"==typeof y[S]&&S!=H)&&(E=s[S]=q(S,C,"after"===y[S]),E.nom=S);return I}var t=k.mixin,v=Object.prototype,A=v.toString,u=new Function,z=0,H="constructor",J=d.config.isDebug?h:f;d.safeMixin=x.safeMixin=function(a,b){var e,g;for(e in b)if(g=b[e],(g!==v[e]||!(e in v))&&e!=H)"[object Function]"==A.call(g)&&(g.nom=e),a[e]=g;if(l("bug-for-in-skips-shadowed"))for(var c=k._extraNames,
d=c.length;d;)if(e=c[--d],g=b[e],(g!==v[e]||!(e in v))&&e!=H)"[object Function]"==A.call(g)&&(g.nom=e),a[e]=g;return a};return d.declare=x})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(d,l,k){function n(a,e,g,c,d){if(c=e.match(/(.*):(.*)/))return e=c[2],c=c[1],m.selector(c,e).call(d,a,g);k("touch")&&(b.test(e)&&(g=z(g)),!k("event-orientationchange")&&"orientationchange"==e&&(e="resize",a=window,g=z(g)));w&&(g=w(g));if(a.addEventListener){var h=
e in p,f=h?p[e]:e;a.addEventListener(f,g,h);return{remove:function(){a.removeEventListener(f,g,h)}}}if(x&&a.attachEvent)return x(a,"on"+e,g);throw Error("Target must be an event emitter");}function f(){this.cancelable=!1;this.defaultPrevented=!0}function c(){this.bubbles=!1}var h=window.ScriptEngineMajorVersion;k.add("jscript",h&&h()+ScriptEngineMinorVersion()/10);k.add("event-orientationchange",k("touch")&&!k("android"));k.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&
!!window.Event.prototype.stopImmediatePropagation);k.add("event-focusin",function(a,b,e){return"onfocusin"in e});k("touch")&&k.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=null;return null===b.target}catch(e){return!1}});var m=function(a,b,e,g){return"function"==typeof a.on&&"function"!=typeof b&&!a.nodeType?a.on(b,e):m.parse(a,b,e,n,g,this)};m.pausable=function(a,b,e,g){var c;a=m(a,b,function(){if(!c)return e.apply(this,
arguments)},g);a.pause=function(){c=!0};a.resume=function(){c=!1};return a};m.once=function(a,b,e,g){var c=m(a,b,function(){c.remove();return e.apply(this,arguments)});return c};m.parse=function(a,b,e,g,c,d){if(b.call)return b.call(d,a,e);if(b instanceof Array)p=b;else if(-1<b.indexOf(","))var p=b.split(/\s*,\s*/);if(p){var h=[];b=0;for(var f;f=p[b++];)h.push(m.parse(a,f,e,g,c,d));h.remove=function(){for(var a=0;a<h.length;a++)h[a].remove()};return h}return g(a,b,e,c,d)};var b=/^touch/;m.matches=
function(a,b,e,g,c){c=c&&c.matches?c:l.query;g=!1!==g;1!=a.nodeType&&(a=a.parentNode);for(;!c.matches(a,b,e);)if(a==e||!1===g||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};m.selector=function(a,b,e){return function(g,c){function d(b){return m.matches(b,a,g,e,p)}var p="function"==typeof a?{matches:a}:this,h=b.bubble;return h?m(g,h(d),c):m(g,b,function(a){var b=d(a.target);if(b)return c.call(b,a)})}};var a=[].slice,e=m.emit=function(b,e,g){var d=a.call(arguments,2),p="on"+e;if("parentNode"in
b){var h=d[0]={},m;for(m in g)h[m]=g[m];h.preventDefault=f;h.stopPropagation=c;h.target=b;h.type=e;g=h}do b[p]&&b[p].apply(b,d);while(g&&g.bubbles&&(b=b.parentNode));return g&&g.cancelable&&g},p=k("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!k("event-stopimmediatepropagation"))var g=function(){this.modified=this.immediatelyStopped=!0},w=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=g,a.apply(this,arguments)}};if(k("dom-addeventlistener"))m.emit=
function(a,b,g){if(a.dispatchEvent&&document.createEvent){var c=(a.ownerDocument||document).createEvent("HTMLEvents");c.initEvent(b,!!g.bubbles,!!g.cancelable);for(var d in g)d in c||(c[d]=g[d]);return a.dispatchEvent(c)&&c}return e.apply(m,arguments)};else{m._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{q&&(a.type==q.type&&a.srcElement==q.target)&&(a=q)}catch(e){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,
"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=t,a.preventDefault=v),a.type){case "keypress":var g="charCode"in a?a.charCode:a.keyCode;10==g?(g=0,a.keyCode=13):13==g||27==g?g=0:3==g&&(g=99);a.charCode=g;g=a;g.keyChar=g.charCode?String.fromCharCode(g.charCode):"";g.charOrCode=g.keyChar||g.keyCode}return a};var q,r=function(a){this.handle=a};r.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var s=function(a){return function(b){b=m._fixEvent(b,this);var e=a.call(this,b);b.modified&&(q||setTimeout(function(){q=null}),q=b);return e}},x=function(a,b,e){e=s(e);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>k("jscript"))&&!k("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var g=a[b];if(!g||!g.listeners){var c=g,g=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
g.listeners=[];a[b]=g;g.global=this;c&&g.listeners.push(_dojoIEListeners_.push(c)-1)}g.listeners.push(a=g.global._dojoIEListeners_.push(e)-1);return new r(a)}return d.after(a,b,e,!0)},t=function(){this.cancelBubble=!0},v=m._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(k("touch"))var A=function(){},u=window.orientation,z=function(a){return function(b){var e=b.corrected;if(!e){var g=
b.type;try{delete b.type}catch(c){}if(b.type){if(k("touch-can-modify-event-delegate"))A.prototype=b,e=new A;else{var e={},d;for(d in b)e[d]=b[d]}e.preventDefault=function(){b.preventDefault()};e.stopPropagation=function(){b.stopPropagation()}}else e=b,e.type=g;b.corrected=e;if("resize"==g){if(u==window.orientation)return null;u=window.orientation;e.type="orientationchange";return a.call(this,e)}"rotation"in e||(e.rotation=0,e.scale=1);var g=e.changedTouches[0],p;for(p in g)delete e[p],e[p]=g[p]}return a.call(this,
e)}};return m})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(d,l,k,n,f,c,h,m){function b(a,b){var e=function(e,g){if("string"==typeof g&&(g=k.byId(g),!g))return new b([]);var c="string"==typeof e?a(e,g):e?e.end&&e.on?e:[e]:[];return c.end&&c.on?c:new b(c)};e.matches=a.match||function(a,b,g){return 0<e.filter([a],b,g).length};e.filter=a.filter||function(a,b,g){return e(b,g).filter(function(b){return-1<
f.indexOf(a,b)})};if("function"!=typeof a){var g=a.search;a=function(a,b){return g(b||document,a)}}return e}l.add("array-extensible",function(){return 1==c.delegate([],{length:1}).length&&!l("bug-for-in-skips-shadowed")});var a=Array.prototype,e=a.slice,p=a.concat,g=f.forEach,w=function(a,b,g){b=[0].concat(e.call(b,0));g=g||d.global;return function(e){b[0]=e;return a.apply(g,b)}},q=function(a){var b=this instanceof r&&l("array-extensible");"number"==typeof a&&(a=Array(a));var e=a&&"length"in a?a:
arguments;if(b||!e.sort){for(var g=b?this:[],d=g.length=e.length,p=0;p<d;p++)g[p]=e[p];if(b)return g;e=g}c._mixin(e,s);e._NodeListCtor=function(a){return r(a)};return e},r=q,s=r.prototype=l("array-extensible")?[]:{};r._wrap=s._wrap=function(a,b,e){a=new (e||this._NodeListCtor||r)(a);return b?a._stash(b):a};r._adaptAsMap=function(a,b){return function(){return this.map(w(a,arguments,b))}};r._adaptAsForEach=function(a,b){return function(){this.forEach(w(a,arguments,b));return this}};r._adaptAsFilter=
function(a,b){return function(){return this.filter(w(a,arguments,b))}};r._adaptWithCondition=function(a,b,e){return function(){var g=arguments,c=w(a,g,e);if(b.call(e||d.global,g))return this.map(c);this.forEach(c);return this}};g(["slice","splice"],function(b){var e=a[b];s[b]=function(){return this._wrap(e.apply(this,arguments),"slice"==b?this:null)}});g(["indexOf","lastIndexOf","every","some"],function(a){var b=f[a];s[a]=function(){return b.apply(d,[this].concat(e.call(arguments,0)))}});c.extend(q,
{constructor:r,_NodeListCtor:r,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var e=this.map(function(e){return n(e,a,b)});e.remove=function(){for(var a=0;a<e.length;a++)e[a].remove()};return e},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=e.call(this,0),g=f.map(arguments,function(a){return e.call(a,0)});return this._wrap(p.apply(b,g),this)},map:function(a,b){return this._wrap(f.map(this,
a,b),this)},forEach:function(a,b){g(this,a,b);return this},filter:function(a){var b=arguments,e=this,g=0;if("string"==typeof a){e=x._filterResult(this,b[0]);if(1==b.length)return e._stash(this);g=1}return this._wrap(f.filter(e,b[g],b[g+1]),this)},instantiate:function(a,b){var e=c.isFunction(a)?a:c.getObject(a);b=b||{};return this.forEach(function(a){new e(b,a)})},at:function(){var a=new this._NodeListCtor(0);g(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});
var x=b(m,q);d.query=b(m,function(a){return q(a)});x.load=function(a,e,g){h.load(a,e,function(a){g(b(a,q))})};d._filterQueryResult=x._filterResult=function(a,b,e){return new q(x.filter(a,b,e))};d.NodeList=x.NodeList=q;return x})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(d,l){if(7>=d("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(k){}var n={};d("ie")?n.byId=function(c,d){if("string"!=typeof c)return c;var f=d||l.doc,b=c&&f.getElementById(c);if(b&&(b.attributes.id.value==
c||b.id==c))return b;f=f.all[c];if(!f||f.nodeName)f=[f];for(var a=0;b=f[a++];)if(b.attributes&&b.attributes.id&&b.attributes.id.value==c||b.id==c)return b}:n.byId=function(c,d){return("string"==typeof c?(d||l.doc).getElementById(c):c)||null};n.isDescendant=function(c,d){try{c=n.byId(c);for(d=n.byId(d);c;){if(c==d)return!0;c=c.parentNode}}catch(f){}return!1};d.add("css-user-select",function(c,d,f){if(!f)return!1;c=f.style;d=["Khtml","O","Moz","Webkit"];f=d.length;var b="userSelect";do if("undefined"!==
typeof c[b])return b;while(f--&&(b=d[f]+"UserSelect"));return!1});var f=d("css-user-select");n.setSelectable=f?function(c,d){n.byId(c).style[f]=d?"":"none"}:function(c,d){c=n.byId(c);var f=c.getElementsByTagName("*"),b=f.length;if(d)for(c.removeAttribute("unselectable");b--;)f[b].removeAttribute("unselectable");else for(c.setAttribute("unselectable","on");b--;)f[b].setAttribute("unselectable","on")};return n})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(d,l,k){var n=
{global:d.global,doc:d.global.document||null,body:function(f){f=f||d.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,c){d.global=n.global=f;d.doc=n.doc=c},withGlobal:function(f,c,h,m){var b=d.global;try{return d.global=n.global=f,n.withDoc.call(null,f.document,c,h,m)}finally{d.global=n.global=b}},withDoc:function(f,c,h,m){var b=n.doc,a=k("quirks"),e=k("ie"),p,g,w;try{d.doc=n.doc=f;d.isQuirks=k.add("quirks","BackCompat"==d.doc.compatMode,!0,!0);if(k("ie")&&(w=f.parentWindow)&&
w.navigator)p=parseFloat(w.navigator.appVersion.split("MSIE ")[1])||void 0,(g=f.documentMode)&&(5!=g&&Math.floor(p)!=g)&&(p=g),d.isIE=k.add("ie",p,!0,!0);h&&"string"==typeof c&&(c=h[c]);return c.apply(h,m||[])}finally{d.doc=n.doc=b,d.isQuirks=k.add("quirks",a,!0,!0),d.isIE=k.add("ie",e,!0,!0)}}};l.mixin(d,n);return n})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(d,l,k){function n(a){return h[a]=new Function("item","index","array",a)}function f(a){var b=!a;return function(c,
g,d){var f=0,m=c&&c.length||0,k;m&&"string"==typeof c&&(c=c.split(""));"string"==typeof g&&(g=h[g]||n(g));if(d)for(;f<m;++f){if(k=!g.call(d,c[f],f,c),a^k)return!k}else for(;f<m;++f)if(k=!g(c[f],f,c),a^k)return!k;return b}}function c(a){var e=1,c=0,g=0;a||(e=c=g=-1);return function(d,f,h,k){if(k&&0<e)return b.lastIndexOf(d,f,h);k=d&&d.length||0;var n=a?k+g:c;h===m?h=a?c:k+g:0>h?(h=k+h,0>h&&(h=c)):h=h>=k?k+g:h;for(k&&"string"==typeof d&&(d=d.split(""));h!=n;h+=e)if(d[h]==f)return h;return-1}}var h=
{},m,b={every:f(!1),some:f(!0),indexOf:c(!0),lastIndexOf:c(!1),forEach:function(a,b,c){var g=0,d=a&&a.length||0;d&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=h[b]||n(b));if(c)for(;g<d;++g)b.call(c,a[g],g,a);else for(;g<d;++g)b(a[g],g,a)},map:function(a,b,c,g){var d=0,f=a&&a.length||0;g=new (g||Array)(f);f&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=h[b]||n(b));if(c)for(;d<f;++d)g[d]=b.call(c,a[d],d,a);else for(;d<f;++d)g[d]=b(a[d],d,a);return g},filter:function(a,b,
c){var g=0,d=a&&a.length||0,f=[],m;d&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=h[b]||n(b));if(c)for(;g<d;++g)m=a[g],b.call(c,m,g,a)&&f.push(m);else for(;g<d;++g)m=a[g],b(m,g,a)&&f.push(m);return f},clearCache:function(){h={}}};k.mixin(d,b);return b})},"dojo/selector/_loader":function(){define(["../has","require"],function(d,l){var k=document.createElement("div");d.add("dom-qsa2.1",!!k.querySelectorAll);d.add("dom-qsa3",function(){try{return k.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",
1==k.querySelectorAll(".TEST:empty").length}catch(d){}});var n;return{load:function(f,c,h,m){m=l;f="default"==f?d("config-selectorEngine")||"css3":f;f="css2"==f||"lite"==f?"./lite":"css2.1"==f?d("dom-qsa2.1")?"./lite":"./acme":"css3"==f?d("dom-qsa3")?"./lite":"./acme":"acme"==f?"./acme":(m=c)&&f;if("?"==f.charAt(f.length-1)){f=f.substring(0,f.length-1);var b=!0}if(b&&(d("dom-compliant-qsa")||n))return h(n);m([f],function(a){"./lite"!=f&&(n=a);h(a)})}}})},"dojo/selector/acme":function(){define(["../dom",
"../sniff","../_base/array","../_base/lang","../_base/window"],function(d,l,k,n,f){var c=n.trim,h=k.forEach,m="BackCompat"==f.doc.compatMode,b=!1,a=function(){return!0},e=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var e=function(b,e){return c(a.slice(b,e))},g=[],d=-1,p=-1,f=-1,h=-1,m=-1,k=-1,n=-1,l,w="",q="",t,s=0,x=a.length,r=null,z=null,v=function(){0<=k&&(r.id=e(k,s).replace(/\\/g,""),k=-1);if(0<=n){var a=n==s?null:e(n,s);r[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=m&&
(r.classes.push(e(m+1,s).replace(/\\/g,"")),m=-1)};w=q,q=a.charAt(s),s<x;s++)if("\\"!=w)if(r||(t=s,r={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return b?this.otag:this.tag}},n=s),l)q==l&&(l=null);else if("'"==q||'"'==q)l=q;else if(0<=d)if("]"==q){z.attr?z.matchFor=e(f||d+1,s):z.attr=e(d+1,s);if((d=z.matchFor)&&('"'==d.charAt(0)||"'"==d.charAt(0)))z.matchFor=d.slice(1,-1);z.matchFor&&(z.matchFor=z.matchFor.replace(/\\/g,""));r.attrs.push(z);z=null;d=f=-1}else"\x3d"==
q&&(f=0<="|~^$*".indexOf(w)?w:"",z.type=f+q,z.attr=e(d+1,s-f.length),f=s+1);else 0<=p?")"==q&&(0<=h&&(z.value=e(p+1,s)),h=p=-1):"#"==q?(v(),k=s+1):"."==q?(v(),m=s):":"==q?(v(),h=s):"["==q?(v(),d=s,z={}):"("==q?(0<=h&&(z={name:e(h+1,s),value:null},r.pseudos.push(z)),p=s):" "==q&&w!=q&&(v(),0<=h&&r.pseudos.push({name:e(h+1,s)}),r.loops=r.pseudos.length||r.attrs.length||r.classes.length,r.oquery=r.query=e(t,s),r.otag=r.tag=r.oper?null:r.tag||"*",r.tag&&(r.tag=r.tag.toUpperCase()),g.length&&g[g.length-
1].oper&&(r.infixOper=g.pop(),r.query=r.infixOper.query+" "+r.query),g.push(r),r=null);return g},p=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},g=function(a,b){var e=b||[];a&&e.push(a);return e},w=function(a){return 1==a.nodeType},q=function(a,e){return!a?"":"class"==e?a.className||"":"for"==e?a.htmlFor||"":"style"==e?a.style.cssText||"":(b?a.getAttribute(e):a.getAttribute(e,2))||""},r={"*\x3d":function(a,b){return function(e){return 0<=q(e,
a).indexOf(b)}},"^\x3d":function(a,b){return function(e){return 0==q(e,a).indexOf(b)}},"$\x3d":function(a,b){return function(e){e=" "+q(e,a);var g=e.lastIndexOf(b);return-1<g&&g==e.length-b.length}},"~\x3d":function(a,b){var e=" "+b+" ";return function(b){return 0<=(" "+q(b,a)+" ").indexOf(e)}},"|\x3d":function(a,b){var e=b+"-";return function(g){g=q(g,a);return g==b||0==g.indexOf(e)}},"\x3d":function(a,b){return function(e){return q(e,a)==b}}},s="undefined"==typeof f.doc.firstChild.nextElementSibling,
x=!s?"nextElementSibling":"nextSibling",t=!s?"previousElementSibling":"previousSibling",v=s?w:a,A=function(a){for(;a=a[t];)if(v(a))return!1;return!0},u=function(a){for(;a=a[x];)if(v(a))return!1;return!0},z=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,e=0,g=b.children||b.childNodes,c=a._i||a.getAttribute("_i")||-1,d=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!g)return-1;g=g.length;if(d==g&&0<=c&&0<=d)return c;l("ie")&&"undefined"!==typeof b.setAttribute?
b.setAttribute("_l",g):b._l=g;c=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[x])v(b)&&(l("ie")?b.setAttribute("_i",++e):b._i=++e,a===b&&(c=e));return c},H=function(a){return!(z(a)%2)},J=function(a){return z(a)%2},M={checked:function(a,b){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return A},"last-child":function(){return u},"only-child":function(a,
b){return function(a){return A(a)&&u(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var e=b[a].nodeType;if(1===e||3==e)return!1}return!0}},contains:function(a,b){var e=b.charAt(0);if('"'==e||"'"==e)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var g=e(b)[0],c={el:1};"*"!=g.tag&&(c.tag=1);g.classes.length||(c.classes=1);var d=N(g,c);return function(a){return!d(a)}},"nth-child":function(a,b){var e=parseInt;
if("odd"==b)return J;if("even"==b)return H;if(-1!=b.indexOf("n")){var g=b.split("n",2),c=g[0]?"-"==g[0]?-1:e(g[0]):1,d=g[1]?e(g[1]):0,p=0,f=-1;0<c?0>d?d=d%c&&c+d%c:0<d&&(d>=c&&(p=d-d%c),d%=c):0>c&&(c*=-1,0<d&&(f=d,d%=c));if(0<c)return function(a){a=z(a);return a>=p&&(0>f||a<=f)&&a%c==d};b=d}var h=e(b);return function(a){return z(a)==h}}},R=9>l("ie")||9==l("ie")&&l("quirks")?function(a){var e=a.toLowerCase();"class"==e&&(a="className");return function(g){return b?g.getAttribute(a):g[a]||g[e]}}:function(a){return function(b){return b&&
b.getAttribute&&b.hasAttribute(a)}},N=function(e,g){if(!e)return a;g=g||{};var c=null;"el"in g||(c=p(c,w));"tag"in g||"*"!=e.tag&&(c=p(c,function(a){return a&&(b?a.tagName:a.tagName.toUpperCase())==e.getTag()}));"classes"in g||h(e.classes,function(a,b,e){var g=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=p(c,function(a){return g.test(a.className)});c.count=b});"pseudos"in g||h(e.pseudos,function(a){var b=a.name;M[b]&&(c=p(c,M[b](b,a.value)))});"attrs"in g||h(e.attrs,function(a){var b,e=a.attr;a.type&&r[a.type]?
b=r[a.type](e,a.matchFor):e.length&&(b=R(e));b&&(c=p(c,b))});"id"in g||e.id&&(c=p(c,function(a){return!!a&&a.id==e.id}));c||"default"in g||(c=a);return c},O=function(a){return function(b,e,g){for(;b=b[x];)if(!s||w(b)){(!g||Y(b,g))&&a(b)&&e.push(b);break}return e}},T=function(a){return function(b,e,g){for(b=b[x];b;){if(v(b)){if(g&&!Y(b,g))break;a(b)&&e.push(b)}b=b[x]}return e}},E=function(b){b=b||a;return function(a,e,g){for(var c=0,d=a.children||a.childNodes;a=d[c++];)v(a)&&((!g||Y(a,g))&&b(a,c))&&
e.push(a);return e}},I={},S=function(b){var e=I[b.query];if(e)return e;var c=b.infixOper,c=c?c.oper:"",p=N(b,{el:1}),h="*"==b.tag,k=f.doc.getElementsByClassName;if(c)k={el:1},h&&(k.tag=1),p=N(b,k),"+"==c?e=O(p):"~"==c?e=T(p):"\x3e"==c&&(e=E(p));else if(b.id)p=!b.loops&&h?a:N(b,{el:1,id:1}),e=function(a,e){var c=d.byId(b.id,a.ownerDocument||a);if(c&&p(c)){if(9==a.nodeType)return g(c,e);for(var f=c.parentNode;f&&f!=a;)f=f.parentNode;if(f)return g(c,e)}};else if(k&&/\{\s*\[native code\]\s*\}/.test(String(k))&&
b.classes.length&&!m)var p=N(b,{el:1,classes:1,id:1}),n=b.classes.join(" "),e=function(a,b,e){b=g(0,b);for(var c,d=0,f=a.getElementsByClassName(n);c=f[d++];)p(c,a)&&Y(c,e)&&b.push(c);return b};else!h&&!b.loops?e=function(a,e,c){e=g(0,e);for(var d=0,p=b.getTag(),p=p?a.getElementsByTagName(p):[];a=p[d++];)Y(a,c)&&e.push(a);return e}:(p=N(b,{el:1,tag:1,id:1}),e=function(a,e,c){e=g(0,e);for(var d,f=0,h=(d=b.getTag())?a.getElementsByTagName(d):[];d=h[f++];)p(d,a)&&Y(d,c)&&e.push(d);return e});return I[b.query]=
e},C={},y={},D=function(a){var b=e(c(a));if(1==b.length){var d=S(b[0]);return function(a){if(a=d(a,[]))a.nozip=!0;return a}}return function(a){a=g(a);for(var e,c,d=b.length,p,f,h=0;h<d;h++){f=[];e=b[h];c=a.length-1;0<c&&(p={},f.nozip=!0);c=S(e);for(var m=0;e=a[m];m++)c(e,f,p);if(!f.length)break;a=f}return f}},W=l("ie")?"commentStrip":"nozip",Q=!!f.doc.querySelectorAll,G=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,F=function(a,b,e,g){return e?(b?b+" ":"")+e+(g?" "+g:""):a},L=/([^[]*)([^\]]*])?/g,P=function(a,
b,e){return b.replace(G,F)+(e||"")},B=function(a,b){a=a.replace(L,P);if(Q){var e=y[a];if(e&&!b)return e}if(e=C[a])return e;var e=a.charAt(0),g=-1==a.indexOf(" ");0<=a.indexOf("#")&&g&&(b=!0);if(Q&&!b&&-1=="\x3e~+".indexOf(e)&&(!l("ie")||-1==a.indexOf(":"))&&!(m&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|\x3d")){var c=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return y[a]=function(b){try{if(!(9==b.nodeType||g))throw"";var e=b.querySelectorAll(c);
e[W]=!0;return e}catch(d){return B(a,!0)(b)}}}var d=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return C[a]=2>d.length?D(a):function(a){for(var b=0,e=[],g;g=d[b++];)e=e.concat(D(g)(a));return e}},K=0,U=l("ie")?function(a){return b?a.getAttribute("_uid")||a.setAttribute("_uid",++K)||K:a.uniqueID}:function(a){return a._uid||(a._uid=++K)},Y=function(a,b){if(!b)return 1;var e=U(a);return!b[e]?b[e]=1:0},ea=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];
var e=[];K++;var g,c;if(l("ie")&&b){var d=K+"";for(g=0;g<a.length;g++)if((c=a[g])&&c.getAttribute("_zipIdx")!=d)e.push(c),c.setAttribute("_zipIdx",d)}else if(l("ie")&&a.commentStrip)try{for(g=0;g<a.length;g++)(c=a[g])&&w(c)&&e.push(c)}catch(p){}else for(g=0;g<a.length;g++)if((c=a[g])&&c._zipIdx!=K)e.push(c),c._zipIdx=K;return e},Z=function(a,e){e=e||f.doc;b="div"===(e.ownerDocument||e).createElement("div").tagName;var g=B(a)(e);return g&&g.nozip?g:ea(g)};Z.filter=function(a,b,g){for(var c=[],p=e(b),
p=1==p.length&&!/[^\w#\.]/.test(b)?N(p[0]):function(a){return-1!=k.indexOf(Z(b,d.byId(g)),a)},f=0,h;h=a[f];f++)p(h)&&c.push(h);return c};return Z})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(d,l,k){function n(b){if("string"==typeof b||b instanceof String){if(b&&!c.test(b))return h[0]=b,h;b=b.split(c);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:l.filter(b,function(a){return a})}var f,c=/\s+/,h=[""],m={};return f={contains:function(b,
a){return 0<=(" "+k.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){b=k.byId(b);a=n(a);var e=b.className,c,e=e?" "+e+" ":" ";c=e.length;for(var g=0,d=a.length,f;g<d;++g)(f=a[g])&&0>e.indexOf(" "+f+" ")&&(e+=f+" ");c<e.length&&(b.className=e.substr(1,e.length-2))},remove:function(b,a){b=k.byId(b);var e;if(void 0!==a){a=n(a);e=" "+b.className+" ";for(var c=0,g=a.length;c<g;++c)e=e.replace(" "+a[c]+" "," ");e=d.trim(e)}else e="";b.className!=e&&(b.className=e)},replace:function(b,a,e){b=
k.byId(b);m.className=b.className;f.remove(m,e);f.add(m,a);b.className!==m.className&&(b.className=m.className)},toggle:function(b,a,e){b=k.byId(b);if(void 0===e){a=n(a);for(var c=0,g=a.length,d;c<g;++c)d=a[c],f[f.contains(b,d)?"remove":"add"](b,d)}else f[e?"add":"remove"](b,a);return e}}})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(d,l,k){var n={},f={},c={length:0,add:function(c){if(f[c.id])throw Error("Tried to register widget with id\x3d\x3d"+
c.id+" but that id is already registered");f[c.id]=c;this.length++},remove:function(c){f[c]&&(delete f[c],this.length--)},byId:function(c){return"string"==typeof c?f[c]:c},byNode:function(c){return f[c.getAttribute("widgetId")]},toArray:function(){var c=[],d;for(d in f)c.push(f[d]);return c},getUniqueId:function(c){var d;do d=c+"_"+(c in n?++n[c]:n[c]=0);while(f[d]);return"dijit"==k._scopeName?d:k._scopeName+"_"+d},findWidgets:function(c,d){function b(e){for(e=e.firstChild;e;e=e.nextSibling)if(1==
e.nodeType){var c=e.getAttribute("widgetId");c?(c=f[c])&&a.push(c):e!==d&&b(e)}}var a=[];b(c);return a},_destroyAll:function(){k._curFocus=null;k._prevFocus=null;k._activeStack=[];d.forEach(c.findWidgets(l.body()),function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive():c.destroy&&c.destroy())})},getEnclosingWidget:function(c){for(;c;){var d=1==c.nodeType&&c.getAttribute("widgetId");if(d)return f[d];c=c.parentNode}return null},_hash:f};return k.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],
function(d){return d.dijit})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(d,l,k,n){var f={fieldToObject:function(c){var d=null;if(c=l.byId(c)){var f=c.name,b=(c.type||"").toLowerCase();if(f&&b&&!c.disabled)if("radio"==b||"checkbox"==b)c.checked&&(d=c.value);else if(c.multiple){d=[];for(c=[c.firstChild];c.length;)for(f=c.pop();f;f=f.nextSibling)if(1==f.nodeType&&"option"==f.tagName.toLowerCase())f.selected&&d.push(f.value);else{f.nextSibling&&c.push(f.nextSibling);
f.firstChild&&c.push(f.firstChild);break}}else d=c.value}return d},toObject:function(c){var h={};c=l.byId(c).elements;for(var m=0,b=c.length;m<b;++m){var a=c[m],e=a.name,p=(a.type||"").toLowerCase();if(e&&p&&0>"file|submit|image|reset|button".indexOf(p)&&!a.disabled){var g=h,k=e,a=f.fieldToObject(a);if(null!==a){var n=g[k];"string"==typeof n?g[k]=[n,a]:d.isArray(n)?n.push(a):g[k]=a}"image"==p&&(h[e+".x"]=h[e+".y"]=h[e].x=h[e].y=0)}}return h},toQuery:function(c){return k.objectToQuery(f.toObject(c))},
toJson:function(c,d){return n.stringify(f.toObject(c),null,d?4:0)}};return f})},"dojo/io-query":function(){define(["./_base/lang"],function(d){var l={};return{objectToQuery:function(k){var n=encodeURIComponent,f=[],c;for(c in k){var h=k[c];if(h!=l[c]){var m=n(c)+"\x3d";if(d.isArray(h))for(var b=0,a=h.length;b<a;++b)f.push(m+n(h[b]));else f.push(m+n(h))}}return f.join("\x26")},queryToObject:function(k){var n=decodeURIComponent;k=k.split("\x26");for(var f={},c,h,m=0,b=k.length;m<b;++m)if(h=k[m],h.length){var a=
h.indexOf("\x3d");0>a?(c=n(h),h=""):(c=n(h.slice(0,a)),h=n(h.slice(a+1)));"string"==typeof f[c]&&(f[c]=[f[c]]);d.isArray(f[c])?f[c].push(h):f[c]=h}return f}}})},"dojo/json":function(){define(["./has"],function(d){var l="undefined"!=typeof JSON;d.add("json-parse",l);d.add("json-stringify",l&&'{"a":1}'==JSON.stringify({a:0},function(d,f){return f||1}));if(d("json-stringify"))return JSON;var k=function(d){return('"'+d.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,
"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:d("json-parse")?JSON.parse:function(d,f){if(f&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(d))throw new SyntaxError("Invalid characters in JSON");return eval("("+d+")")},stringify:function(d,f,c){function h(b,a,e){f&&(b=f(e,b));var d;d=typeof b;if("number"==d)return isFinite(b)?b+"":"null";if("boolean"==d)return b+"";if(null===b)return"null";if("string"==typeof b)return k(b);
if("function"==d||"undefined"==d)return m;if("function"==typeof b.toJSON)return h(b.toJSON(e),a,e);if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,e,g){a=b["getUTC"+e]()+(g?1:0);return 10>a?"0"+a:a});if(b.valueOf()!==b)return h(b.valueOf(),a,e);var g=c?a+c:"",n=c?" ":"",l=c?"\n":"";if(b instanceof Array){var n=b.length,r=[];for(e=0;e<n;e++)d=h(b[e],g,e),"string"!=typeof d&&(d="null"),r.push(l+g+d);return"["+r.join(",")+l+
a+"]"}r=[];for(e in b){var s;if(b.hasOwnProperty(e)){if("number"==typeof e)s='"'+e+'"';else if("string"==typeof e)s=k(e);else continue;d=h(b[e],g,e);"string"==typeof d&&r.push(l+g+s+":"+n+d)}}return"{"+r.join(",")+l+a+"}"}var m;"string"==typeof f&&(c=f,f=null);return h(d,"","")}}})},"malifaux/data":function(){define(["./store/loader!loadValues","./store/cachedValues!"],function(d,l){return{cardCache:{},stores:d,cachedValues:l}})},"malifaux/store/loader":function(){define("dojo/Deferred dojo/request/script dojo/promise/all dojox/store/LocalDB ../cards/functions ./config dojox/store/db/IndexedDB dojox/store/db/SQL".split(" "),
function(d,l,k,n,f,c){function h(){function b(a){return l(e+a+".js",{checkString:a+"Data",preventCache:!0}).then(function(){var b=window[a+"Data"];delete window[a+"Data"];for(var e=[],g=0;g<b.length;g++)e.push(m[a].add(b[g]));return k(e)}).then(function(){return m})}var e=f.calcFilePath("malifaux/resources/data/"),c=[],d;for(d in m)c.push(b(d));return a.then(function(){return k(c)}).then(function(a){return m})}var m={};d=[];for(var b in c.stores)m[b]=new n({dbConfig:c,storeName:b}),d.push(m[b].available);
var a=k(d).then(function(){return m.log.query({id:"*"})}).then(function(a){return 1>a.length?!1:!0}),e=null;return{loadBaseData:h,load:function(b,g,c){a.then(function(a){if(a||!b)return m;e||(e=h());return e}).then(function(){c(m)})}}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(d,l,k,n,f){var c=Object.freeze||function(){},h=function(a,b,c,d,f){2===b&&(e.instrumentRejected&&0===a.length)&&e.instrumentRejected(c,
!1,d,f);for(f=0;f<a.length;f++)m(a[f],b,c,d)},m=function(c,g,d,f){var h=c[g],m=c.deferred;if(h)try{var k=h(d);if(0===g)"undefined"!==typeof k&&a(m,g,k);else{if(k&&"function"===typeof k.then){c.cancel=k.cancel;k.then(b(m,1),b(m,2),b(m,0));return}a(m,1,k)}}catch(n){a(m,2,n)}else a(m,g,d);2===g&&e.instrumentRejected&&e.instrumentRejected(d,!!h,f,m.promise)},b=function(b,e){return function(c){a(b,e,c)}},a=function(a,b,e){if(!a.isCanceled())switch(b){case 0:a.progress(e);break;case 1:a.resolve(e);break;
case 2:a.reject(e)}},e=function(a){var b=this.promise=new n,d=this,f,l,s,x=!1,t=[];Error.captureStackTrace&&(Error.captureStackTrace(d,e),Error.captureStackTrace(b,e));this.isResolved=b.isResolved=function(){return 1===f};this.isRejected=b.isRejected=function(){return 2===f};this.isFulfilled=b.isFulfilled=function(){return!!f};this.isCanceled=b.isCanceled=function(){return x};this.progress=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");return b}h(t,0,a,null,
d);return b};this.resolve=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");return b}h(t,f=1,l=a,null,d);t=null;return b};var v=this.reject=function(a,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");return b}Error.captureStackTrace&&Error.captureStackTrace(s={},v);h(t,f=2,l=a,s,d);t=null;return b};this.then=b.then=function(a,c,d){var p=[d,a,c];p.cancel=b.cancel;p.deferred=new e(function(a){return p.cancel&&p.cancel(a)});f&&!t?m(p,f,
l,s):t.push(p);return p.deferred.promise};this.cancel=b.cancel=function(b,e){if(f){if(!0===e)throw Error("This deferred has already been fulfilled.");}else{if(a){var g=a(b);b="undefined"===typeof g?b:g}x=!0;if(f){if(2===f&&l===b)return b}else return"undefined"===typeof b&&(b=new k),v(b),b}};c(b)};e.prototype.toString=function(){return"[object Deferred]"};f&&f(e);return e})},"dojo/errors/CancelError":function(){define(["./create"],function(d){return d("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(d){return function(l,k,n,f){n=n||Error;var c=function(d){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,c);var f=Error.call(this,d),b;for(b in f)f.hasOwnProperty(b)&&(this[b]=f[b]);this.message=d;this.stack=f.stack}else n.apply(this,arguments);k&&k.apply(this,arguments)};c.prototype=d.delegate(n.prototype,f);c.prototype.name=l;return c.prototype.constructor=c}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(d){function l(){throw new TypeError("abstract");}return d.extend(function(){},{then:function(d,n,f){l()},cancel:function(d,n){l()},isResolved:function(){l()},isRejected:function(){l()},isFulfilled:function(){l()},isCanceled:function(){l()},always:function(d){return this.then(d,d)},otherwise:function(d){return this.then(null,d)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(d,l,k,n){function f(a,b,e){var c="";a&&a.stack&&(c+=a.stack);b&&b.stack&&(c+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));e&&e.stack&&(c+="\n    ----------------------------------------\n"+e.stack);console.error(a,c)}function c(a,b,e,c){b||f(a,e,c)}function h(c,g,d,f){n.some(b,function(a){if(a.error===c)return g&&(a.handled=!0),!0})||b.push({error:c,rejection:d,handled:g,
deferred:f,timestamp:(new Date).getTime()});a||(a=setTimeout(m,e))}function m(){var c=(new Date).getTime(),g=c-e;b=n.filter(b,function(a){return a.timestamp<g?(a.handled||f(a.error,a.rejection,a.deferred),!1):!0});a=b.length?setTimeout(m,b[0].timestamp+e-c):!1}l.add("config-useDeferredInstrumentation","report-unhandled-rejections");var b=[],a=!1,e=1E3;return function(a){var b=l("config-useDeferredInstrumentation");if(b){d.on("resolved",k.hitch(console,"log","resolved"));d.on("rejected",k.hitch(console,
"log","rejected"));d.on("progress",k.hitch(console,"log","progress"));var f=[];"string"===typeof b&&(f=b.split(","),b=f.shift());if("report-rejections"===b)a.instrumentRejected=c;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=h,e=parseInt(f[0],10)||e;else throw Error("Unsupported instrumentation usage \x3c"+b+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(d,l,k){function n(d){setTimeout(function(){c.apply(f,
d)},0)}var f=new k,c=f.emit;f.emit=null;l.prototype.trace=function(){var c=d._toArray(arguments);this.then(function(d){n(["resolved",d].concat(c))},function(d){n(["rejected",d].concat(c))},function(d){n(["progress",d].concat(c))});return this};l.prototype.traceRejected=function(){var c=d._toArray(arguments);this.otherwise(function(d){n(["rejected",d].concat(c))});return this};return f})},"dojo/Evented":function(){define(["./aspect","./on"],function(d,l){function k(){}var n=d.after;k.prototype={on:function(d,
c){return l.parse(this,d,c,function(d,f){return n(d,"on"+f,c,!0)})},emit:function(d,c){var h=[this];h.push.apply(h,arguments);return l.emit.apply(l,h)}};return k})},"dojo/aspect":function(){define([],function(){function d(c,b,a,e){var d=c[b],g="around"==b,f;if(g){var h=a(function(){return d.advice(this,arguments)});f={remove:function(){h&&(h=c=a=null)},advice:function(a,b){return h?h.apply(a,b):d.advice(a,b)}}}else f={remove:function(){if(f.advice){var e=f.previous,g=f.next;!g&&!e?delete c[b]:(e?
e.next=g:c[b]=g,g&&(g.previous=e));c=a=f.advice=null}},id:n++,advice:a,receiveArguments:e};if(d&&!g)if("after"==b){for(;d.next&&(d=d.next););d.next=f;f.previous=d}else"before"==b&&(c[b]=f,f.next=d,d.previous=f);else c[b]=f;return f}function l(c){return function(b,a,e,f){var g=b[a],h;if(!g||g.target!=b)b[a]=h=function(){for(var a=n,b=arguments,e=h.before;e;)b=e.advice.apply(this,b)||b,e=e.next;if(h.around)var c=h.around.advice(this,b);for(e=h.after;e&&e.id<a;){if(e.receiveArguments)var g=e.advice.apply(this,
b),c=g===k?c:g;else c=e.advice.call(this,c,b);e=e.next}return c},g&&(h.around={advice:function(a,b){return g.apply(a,b)}}),h.target=b;b=d(h||g,c,e,f);e=null;return b}}var k,n=0,f=l("after"),c=l("before"),h=l("around");return{before:c,around:h,after:f}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(d,l,k,n,f,c,h,m,b,a,e){function p(a,b){a.canDelete&&s._remove(a.id,
b.options.frameDoc,!0)}function g(a){z&&z.length&&(f.forEach(z,function(a){s._remove(a.id,a.frameDoc);a.frameDoc=null}),z=[]);return a.options.jsonp?!a.data:!0}function w(a){return!!this.scriptLoaded}function q(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var e=this.response.options;z.push({id:this.id,frameDoc:e.ioArgs?e.ioArgs.frameDoc:e.frameDoc});e.ioArgs&&(e.ioArgs.frameDoc=null);e.frameDoc=null}b?this.reject(b):this.resolve(a)}
function s(a,b,e){var d=k.parseArgs(a,k.deepCopy({},b));a=d.url;b=d.options;var f=k.deferred(d,p,g,b.jsonp?null:b.checkString?q:w,r);c.mixin(f,{id:x+t++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+x+"_callbacks."+f.id),f.canDelete=!0,u[f.id]=function(a){d.data=a;f.handleResponse(d)});k.notify&&k.notify.emit("send",d,f.promise.cancel);if(!b.canAttach||b.canAttach(f)){var m=s._attach(f.id,a,b.frameDoc);
if(!b.jsonp&&!b.checkString)var n=h(m,v,function(a){if("load"===a.type||A.test(m.readyState))n.remove(),f.scriptLoaded=a})}l(f);return e?f:f.promise}a.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var x=d.id.replace(/[\/\.\-]/g,"_"),t=0,v=a("script-readystatechange")?"readystatechange":"load",A=/complete|loaded/,u=n.global[x+"_callbacks"]={},z=[];s.get=s;s._attach=
function(a,b,c){c=c||e.doc;var g=c.createElement("script");g.type="text/javascript";g.src=b;g.id=a;g.async=!0;g.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(g)};s._remove=function(a,e,c){b.destroy(m.byId(a,e));u[a]&&(c?u[a]=function(){delete u[a]}:delete u[a])};s._callbacksProperty=x+"_callbacks";return s})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(d,l,k,n,f,c){function h(){for(var e=+new Date,c=0,g;c<a.length&&(g=a[c]);c++){var d=g.response,f=d.options;if(g.isCanceled&&g.isCanceled()||g.isValid&&!g.isValid(d))a.splice(c--,1),m._onAction&&m._onAction();else if(g.isReady&&g.isReady(d))a.splice(c--,1),g.handleResponse(d),m._onAction&&m._onAction();else if(g.startTime&&g.startTime+(f.timeout||0)<e)a.splice(c--,1),g.cancel(new l("Timeout exceeded",d)),m._onAction&&m._onAction()}m._onInFlight&&m._onInFlight(g);a.length||(clearInterval(b),
b=null)}function m(e){e.response.options.timeout&&(e.startTime=+new Date);e.isFulfilled()||(a.push(e),b||(b=setInterval(h,50)),e.response.options.sync&&h())}var b=null,a=[];m.cancelAll=function(){try{n.forEach(a,function(a){try{a.cancel(new k("All requests canceled."))}catch(b){}})}catch(b){}};f&&(c&&f.doc.attachEvent)&&c(f.global,"unload",function(){m.cancelAll()});return m})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),
function(d,l,k,n,f,c,h,m){function b(a){return e(a)}function a(a){return a.data||a.text}d.deepCopy=function(a,b){for(var e in b){var c=a[e],f=b[e];c!==f&&(c&&"object"===typeof c&&f&&"object"===typeof f?d.deepCopy(c,f):a[e]=f)}return a};d.deepCreate=function(a,b){b=b||{};var e=h.delegate(a),c,f;for(c in a)(f=a[c])&&"object"===typeof f&&(e[c]=d.deepCreate(f,b[c]));return d.deepCopy(e,b)};var e=Object.freeze||function(a){return a};d.deferred=function(c,g,f,q,r,s){var x=new n(function(a){g&&g(x,c);return!a||
!(a instanceof l)&&!(a instanceof k)?new k("Request canceled",c):a});x.response=c;x.isValid=f;x.isReady=q;x.handleResponse=r;f=x.then(b).otherwise(function(a){a.response=c;throw a;});d.notify&&f.then(h.hitch(d.notify,"emit","load"),h.hitch(d.notify,"emit","error"));q=f.then(a);r=new m;for(var t in q)q.hasOwnProperty(t)&&(r[t]=q[t]);r.response=f;e(r);s&&x.then(function(a){s.call(x,a)},function(a){s.call(x,c,a)});x.promise=r;x.then=r.then;return x};d.addCommonMethods=function(a,b){c.forEach(b||["GET",
"POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(e,c){c=h.delegate(c||{});c.method=b;return a(e,c)}})};d.parseArgs=function(a,b,e){var c=b.data,d=b.query;c&&!e&&"object"===typeof c&&(b.data=f.objectToQuery(c));d?("object"===typeof d&&(d=f.objectToQuery(d)),b.preventCache&&(d+=(d?"\x26":"")+"request.preventCache\x3d"+ +new Date)):b.preventCache&&(d="request.preventCache\x3d"+ +new Date);a&&d&&(a+=(~a.indexOf("?")?"\x26":"?")+d);return{url:a,options:b,getHeader:function(a){return null}}};
d.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(d){return d("RequestError",function(d,k){this.response=k})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(d,l){return d("RequestTimeoutError",null,l,{dojoType:"timeout"})})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(d,l,k,n,
f,c){function h(a,b){var e=b.parentNode;e&&e.insertBefore(a,b)}function m(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var e;e=a.lastChild;)a.removeChild(e)}var b={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},a=/<\s*([\w\:]+)/,e={},p=0,g="__"+l._scopeName+"ToDomId",w;for(w in b)b.hasOwnProperty(w)&&
(l=b[w],l.pre="option"==w?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+l.join("\x3e\x3c")+"\x3e",l.post="\x3c/"+l.reverse().join("\x3e\x3c/")+"\x3e");var q;8>=k("ie")&&(q=function(a){a.__dojo_html5_tested="yes";var b=r("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(b){a.createElement(b)});
s(b)});d.toDom=function(c,d){d=d||n.doc;var f=d[g];f||(d[g]=f=++p+"",e[f]=d.createElement("div"));8>=k("ie")&&!d.__dojo_html5_tested&&d.body&&q(d);c+="";var h=c.match(a),m=h?h[1].toLowerCase():"",f=e[f];if(h&&b[m]){h=b[m];f.innerHTML=h.pre+c+h.post;for(h=h.length;h;--h)f=f.firstChild}else f.innerHTML=c;if(1==f.childNodes.length)return f.removeChild(f.firstChild);for(m=d.createDocumentFragment();h=f.firstChild;)m.appendChild(h);return m};d.place=function(a,b,e){b=f.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?
d.toDom(a,b.ownerDocument):f.byId(a));if("number"==typeof e){var c=b.childNodes;!c.length||c.length<=e?b.appendChild(a):h(a,c[0>e?0:e])}else switch(e){case "before":h(a,b);break;case "after":e=a;(c=b.parentNode)&&(c.lastChild==b?c.appendChild(e):c.insertBefore(e,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":d.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){h(a,b.firstChild);break}default:b.appendChild(a)}return a};var r=d.create=function(a,b,e,
g){var h=n.doc;e&&(e=f.byId(e),h=e.ownerDocument);"string"==typeof a&&(a=h.createElement(a));b&&c.set(a,b);e&&d.place(a,e,g);return a};d.empty=function(a){m(f.byId(a))};var s=d.destroy=function(a){if(a=f.byId(a)){var b=a;a=a.parentNode;b.firstChild&&m(b);a&&(k("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(d,l,k,n,f,c){function h(a,b){var c=a.getAttributeNode&&
a.getAttributeNode(b);return!!c&&c.specified}var m={innerHTML:1,textContent:1,className:1,htmlFor:l("ie"),value:1},b={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};d.has=function(a,e){var d=e.toLowerCase();return m[c.names[d]||e]||h(n.byId(a),b[d]||e)};d.get=function(a,e){a=n.byId(a);var d=e.toLowerCase(),g=c.names[d]||e,f=a[g];if(m[g]&&"undefined"!=typeof f)return f;if("textContent"==g)return c.get(a,g);if("href"!=g&&("boolean"==typeof f||k.isFunction(f)))return f;d=b[d]||
e;return h(a,d)?a.getAttribute(d):null};d.set=function(a,e,h){a=n.byId(a);if(2==arguments.length){for(var g in e)d.set(a,g,e[g]);return a}g=e.toLowerCase();var l=c.names[g]||e,q=m[l];if("style"==l&&"string"!=typeof h)return f.set(a,h),a;if(q||"boolean"==typeof h||k.isFunction(h))return c.set(a,e,h);a.setAttribute(b[g]||e,h);return a};d.remove=function(a,e){n.byId(a).removeAttribute(b[e.toLowerCase()]||e)};d.getNodeProp=function(a,e){a=n.byId(a);var d=e.toLowerCase(),g=c.names[d]||e;if(g in a&&"href"!=
g)return a[g];d=b[d]||e;return h(a,d)?a.getAttribute(d):null}})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(d,l){function k(b,f,h){f=f.toLowerCase();if(d("ie")||d("trident")){if("auto"==h){if("height"==f)return b.offsetHeight;if("width"==f)return b.offsetWidth}if("fontweight"==f)switch(h){case 700:return"bold";default:return"normal"}}f in a||(a[f]=e.test(f));return a[f]?c(b,h):h}var n,f={};n=d("webkit")?function(a){var b;if(1==a.nodeType){var e=a.ownerDocument.defaultView;b=e.getComputedStyle(a,
null);!b&&a.style&&(a.style.display="",b=e.getComputedStyle(a,null))}return b||{}}:d("ie")&&(9>d("ie")||d("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};f.getComputedStyle=n;var c;c=d("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var e=a.style,c=a.runtimeStyle,d=e.left,f=c.left;c.left=a.currentStyle.left;try{e.left=
b,b=e.pixelLeft}catch(h){b=0}e.left=d;c.left=f;return b}:function(a,b){return parseFloat(b)||0};f.toPixelValue=c;var h=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){return b?{}:null}},m=9>d("ie")||10>d("ie")&&d("quirks")?function(a){try{return h(a).Opacity/100}catch(b){return 1}}:function(a){return n(a).opacity},b=9>d("ie")||10>d("ie")&&d("quirks")?function(a,e){""===e&&(e=1);var c=100*e;1===e?(a.style.zoom="",h(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
""))):(a.style.zoom=1,h(a)?h(a,1).Opacity=c:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+c+")",h(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&b(c,e);return e}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},e=/margin|padding|width|height|max|min|offset/,p={cssFloat:1,styleFloat:1,"float":1};f.get=function(a,b){var e=l.byId(a),c=arguments.length;if(2==c&&"opacity"==b)return m(e);b=p[b]?"cssFloat"in
e.style?"cssFloat":"styleFloat":b;var d=f.getComputedStyle(e);return 1==c?d:k(e,b,d[b]||e.style[b])};f.set=function(a,e,c){var d=l.byId(a),h=arguments.length,m="opacity"==e;e=p[e]?"cssFloat"in d.style?"cssFloat":"styleFloat":e;if(3==h)return m?b(d,c):d.style[e]=c;for(var k in e)f.set(a,k,e[k]);return f.getComputedStyle(d)};return f})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(d,l,k,n,f,c,h,
m){function b(a){var e="";a=a.childNodes;for(var c=0,d;d=a[c];c++)8!=d.nodeType&&(e=1==d.nodeType?e+b(d):e+d.nodeValue);return e}var a={},e=0,p=l._scopeName+"attrid";k.add("dom-textContent",function(a,b,e){return"textContent"in e});d.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};d.get=function(a,e){a=f.byId(a);var c=e.toLowerCase(),c=d.names[c]||e;return"textContent"==
c&&!k("dom-textContent")?b(a):a[c]};d.set=function(b,l,q){b=f.byId(b);if(2==arguments.length&&"string"!=typeof l){for(var r in l)d.set(b,r,l[r]);return b}r=l.toLowerCase();r=d.names[r]||l;if("style"==r&&"string"!=typeof q)return c.set(b,q),b;if("innerHTML"==r)return k("ie")&&b.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(h.empty(b),b.appendChild(h.toDom(q,b.ownerDocument))):b[r]=q,b;if("textContent"==r&&!k("dom-textContent"))return h.empty(b),b.appendChild(b.ownerDocument.createTextNode(q)),
b;if(n.isFunction(q)){var s=b[p];s||(s=e++,b[p]=s);a[s]||(a[s]={});var x=a[s][r];if(x)m.disconnect(x);else try{delete b[r]}catch(t){}q?a[s][r]=m.connect(b,r,q):b[r]=null;return b}b[r]=q;return b}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(d,l,k,n,f,c,h,m){function b(a,b,e,g,f){g=m.hitch(e,g);if(!a||!a.addEventListener&&!a.attachEvent)return n.after(a||d.global,b,g,!0);"string"==typeof b&&"on"==b.substring(0,
2)&&(b=b.substring(2));a||(a=d.global);if(!f)switch(b){case "keypress":b=w;break;case "mouseenter":b=c.enter;break;case "mouseleave":b=c.leave}return l(a,b,g,f)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}h.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!h("opera")});var e=
{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},p=h("mac")?"metaKey":"ctrlKey",g=function(b,e){var c=m.mixin({},b,e);a(c);c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()};return c},w;w=h("events-keypress-typed")?function(a,b){var c=l(a,"keydown",function(a){var c=a.keyCode,d=13!=c&&32!=c&&(27!=c||!h("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(d||a.ctrlKey){d=d?0:
c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);d=95<d&&106>d?d-48:!a.shiftKey&&65<=d&&90>=d?d+32:e[d]||d}c=g(a,{type:"keypress",faux:!0,charCode:d});b.call(a.currentTarget,c);if(h("ie"))try{a.keyCode=c.keyCode}catch(f){}}}),d=l(a,"keypress",function(a){var e=a.charCode;a=g(a,{charCode:32<=e?e:0,faux:!0});return b.call(this,a)});return{remove:function(){c.remove();d.remove()}}}:h("opera")?function(a,b){return l(a,"keypress",function(a){var e=a.which;3==e&&(e=99);e=32>e&&!a.shiftKey?
0:e;a.ctrlKey&&(!a.shiftKey&&65<=e&&90>=e)&&(e+=32);return b.call(this,g(a,{charCode:e}))})}:function(b,e){return l(b,"keypress",function(b){a(b);return e.call(this,b)})};var q={_keypress:w,connect:function(a,e,c,d,g){var f=arguments,h=[],p=0;h.push("string"==typeof f[0]?null:f[p++],f[p++]);var m=f[p+1];h.push("string"==typeof m||"function"==typeof m?f[p++]:null,f[p++]);for(m=f.length;p<m;p++)h.push(f[p]);return b.apply(this,h)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,e){return k.subscribe(a,
m.hitch(b,e))},publish:function(a,b){return k.publish.apply(k,[a].concat(b))},connectPublisher:function(a,b,e){var c=function(){q.publish(a,arguments)};return e?q.connect(b,e,c):q.connect(b,c)},isCopyKey:function(a){return a[p]}};q.unsubscribe=q.disconnect;m.mixin(d,q);return q})},"dojo/topic":function(){define(["./Evented"],function(d){var l=new d;return{publish:function(d,n){return l.emit.apply(l,arguments)},subscribe:function(d,n){return l.on.apply(l,arguments)}}})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(d,l,k,n){if(l._fixEvent){var f=l._fixEvent;l._fixEvent=function(c,d){(c=f(c,d))&&n.normalizeEvent(c);return c}}var c={fix:function(c,d){return l._fixEvent?l._fixEvent(c,d):c},stop:function(c){k("dom-addeventlistener")||c&&c.preventDefault?(c.preventDefault(),c.stopPropagation()):(c=c||window.event,c.cancelBubble=!0,l._preventDefault.call(c))}};d.fixEvent=c.fix;d.stopEvent=c.stop;return c})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(d,l,k,n){function f(a,b,c,d,f,h){h=h||"px";a=a.style;isNaN(b)||(a.left=b+h);isNaN(c)||(a.top=c+h);0<=d&&(a.width=d+h);0<=f&&(a.height=f+h)}function c(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function h(a){return"border-box"==m.boxModel||"table"==a.tagName.toLowerCase()||c(a)}var m={boxModel:"content-box"};d("ie")&&(m.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
m.getPadExtents=function(a,b){a=k.byId(a);var c=b||n.getComputedStyle(a),d=n.toPixelValue,f=d(a,c.paddingLeft),h=d(a,c.paddingTop),m=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:f,t:h,r:m,b:c,w:f+m,h:h+c}};m.getBorderExtents=function(a,b){a=k.byId(a);var c=n.toPixelValue,d=b||n.getComputedStyle(a),f="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):0,h="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,m="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):
0;return{l:f,t:h,r:m,b:c,w:f+m,h:h+c}};m.getPadBorderExtents=function(a,b){a=k.byId(a);var c=b||n.getComputedStyle(a),d=m.getPadExtents(a,c),c=m.getBorderExtents(a,c);return{l:d.l+c.l,t:d.t+c.t,r:d.r+c.r,b:d.b+c.b,w:d.w+c.w,h:d.h+c.h}};m.getMarginExtents=function(a,b){a=k.byId(a);var c=b||n.getComputedStyle(a),d=n.toPixelValue,f=d(a,c.marginLeft),h=d(a,c.marginTop),m=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:f,t:h,r:m,b:c,w:f+m,h:h+c}};m.getMarginBox=function(a,b){a=k.byId(a);var c=b||n.getComputedStyle(a),
g=m.getMarginExtents(a,c),f=a.offsetLeft-g.l,h=a.offsetTop-g.t,l=a.parentNode,s=n.toPixelValue;if(d("mozilla")){var x=parseFloat(c.left),c=parseFloat(c.top);!isNaN(x)&&!isNaN(c)?(f=x,h=c):l&&l.style&&(l=n.getComputedStyle(l),"visible"!=l.overflow&&(f+="none"!=l.borderLeftStyle?s(a,l.borderLeftWidth):0,h+="none"!=l.borderTopStyle?s(a,l.borderTopWidth):0))}else if((d("opera")||8==d("ie")&&!d("quirks"))&&l)l=n.getComputedStyle(l),f-="none"!=l.borderLeftStyle?s(a,l.borderLeftWidth):0,h-="none"!=l.borderTopStyle?
s(a,l.borderTopWidth):0;return{l:f,t:h,w:a.offsetWidth+g.w,h:a.offsetHeight+g.h}};m.getContentBox=function(a,b){a=k.byId(a);var c=b||n.getComputedStyle(a),g=a.clientWidth,f=m.getPadExtents(a,c),h=m.getBorderExtents(a,c);g?(c=a.clientHeight,h.w=h.h=0):(g=a.offsetWidth,c=a.offsetHeight);d("opera")&&(f.l+=h.l,f.t+=h.t);return{l:f.l,t:f.t,w:g-f.w-h.w,h:c-f.h-h.h}};m.setContentSize=function(a,b,c){a=k.byId(a);var d=b.w;b=b.h;h(a)&&(c=m.getPadBorderExtents(a,c),0<=d&&(d+=c.w),0<=b&&(b+=c.h));f(a,NaN,NaN,
d,b)};var b={l:0,t:0,w:0,h:0};m.setMarginBox=function(a,e,p){a=k.byId(a);var g=p||n.getComputedStyle(a);p=e.w;var l=e.h,q=h(a)?b:m.getPadBorderExtents(a,g),g=m.getMarginExtents(a,g);if(d("webkit")&&c(a)){var r=a.style;0<=p&&!r.width&&(r.width="4px");0<=l&&!r.height&&(r.height="4px")}0<=p&&(p=Math.max(p-q.w-g.w,0));0<=l&&(l=Math.max(l-q.h-g.h,0));f(a,e.l,e.t,p,l)};m.isBodyLtr=function(a){a=a||l.doc;return"ltr"==(l.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};m.docScroll=function(a){a=
a||l.doc;var b=l.doc.parentWindow||l.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=d("quirks")?l.body(a):a.documentElement)&&{x:m.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};d("ie")&&(m.getIeDocumentElementOffset=function(a){a=a||l.doc;a=a.documentElement;if(8>d("ie")){var b=a.getBoundingClientRect(),c=b.left,b=b.top;7>d("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}});m.fixIeBiDiScrollLeft=function(a,b){b=b||l.doc;
var c=d("ie");if(c&&!m.isBodyLtr(b)){var g=d("quirks"),f=g?l.body(b):b.documentElement,h=l.global;6==c&&(!g&&h.frameElement&&f.scrollHeight>f.clientHeight)&&(a+=f.clientLeft);return 8>c||g?a+f.clientWidth-f.scrollWidth:-a}return a};m.position=function(a,b){a=k.byId(a);var c=l.body(a.ownerDocument),g=a.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>d("ie")){var f=m.getIeDocumentElementOffset(a.ownerDocument);g.x-=f.x+(d("quirks")?c.clientLeft+c.offsetLeft:0);g.y-=
f.y+(d("quirks")?c.clientTop+c.offsetTop:0)}b&&(c=m.docScroll(a.ownerDocument),g.x+=c.x,g.y+=c.y);return g};m.getMarginSize=function(a,b){a=k.byId(a);var c=m.getMarginExtents(a,b||n.getComputedStyle(a)),d=a.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-d.top+c.h}};m.normalizeEvent=function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!d("dom-addeventlistener")){var b=a.target,b=b&&b.ownerDocument||document,c=d("quirks")?b.body:b.documentElement,g=m.getIeDocumentElementOffset(b);
a.pageX=a.clientX+m.fixIeBiDiScrollLeft(c.scrollLeft||0,b)-g.x;a.pageY=a.clientY+(c.scrollTop||0)-g.y}};return m})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(d,l,k,n,f){function c(d,f){var b=function(a,b){return l(a,d,function(c){if(f)return f(c,b);if(!n.isDescendant(c.relatedTarget,a))return b.call(this,c)})};b.bubble=function(a){return c(d,function(b,c){var d=a(b.target),f=b.relatedTarget;if(d&&d!=(f&&1==f.nodeType&&a(f)))return c.call(d,
b)})};return b}k.add("dom-quirks",f.doc&&"BackCompat"==f.doc.compatMode);k.add("events-mouseenter",f.doc&&"onmouseenter"in f.doc.createElement("div"));k.add("events-mousewheel",f.doc&&"onmousewheel"in f.doc);f=k("dom-quirks")&&k("ie")||!k("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(c,d){return c.button&d},isLeft:function(c){return c.button&1},isMiddle:function(c){return c.button&4},isRight:function(c){return c.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(c,d){return c.button==
d},isLeft:function(c){return 0==c.button},isMiddle:function(c){return 1==c.button},isRight:function(c){return 2==c.button}};d.mouseButtons=f;d=k("events-mousewheel")?"mousewheel":function(c,d){return l(c,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;d.call(this,b)})};return{_eventHandler:c,enter:c("mouseover"),leave:c("mouseout"),wheel:d,isLeft:f.isLeft,isMiddle:f.isMiddle,isRight:f.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(d,l,k){d._name="browser";
l.mixin(d,{isBrowser:!0,isFF:k("ff"),isIE:k("ie"),isKhtml:k("khtml"),isWebKit:k("webkit"),isMozilla:k("mozilla"),isMoz:k("mozilla"),isOpera:k("opera"),isSafari:k("safari"),isChrome:k("chrome"),isMac:k("mac"),isIos:k("ios"),isAndroid:k("android"),isWii:k("wii"),isQuirks:k("quirks"),isAir:k("air")});return k})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(d,l){return d.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:l("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,
ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,
F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:l("mac")&&!l("air")?l("safari")?91:224:17}})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(d,l,k){var n=d.some;return function(d){var c,h;d instanceof Array?h=d:d&&"object"===typeof d&&(c=d);var m,b=[];if(c){h=[];for(var a in c)Object.hasOwnProperty.call(c,a)&&(b.push(a),h.push(c[a]));m={}}else h&&(m=[]);if(!h||!h.length)return(new l).resolve(m);
var e=new l;e.promise.always(function(){m=b=null});var p=h.length;n(h,function(a,d){c||b.push(d);k(a,function(a){e.isFulfilled()||(m[b[d]]=a,0===--p&&e.resolve(m))},e.reject);return e.isFulfilled()});return e.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(d,l){return function(k,n,f,c){var h=k&&"function"===typeof k.then,m=h&&k instanceof l;if(h)m||(h=new d(k.cancel),k.then(h.resolve,h.reject,h.progress),k=h.promise);else return 1<arguments.length?n?n(k):k:(new d).resolve(k);
return n||f||c?k.then(n,f,c):k}})},"dojox/store/LocalDB":function(){define(["./db/has!indexeddb?./db/IndexedDB:./db/SQL"],function(d){return d})},"dojox/store/db/has":function(){define(["dojo/has","dojo/sniff"],function(d){d.add("indexeddb",!(!window.indexedDB&&!window.webkitIndexedDB&&!window.mozIndexedDB));return d})},"malifaux/cards/functions":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(d,l){var k=null;return{createCSSSelector:function(d,f){null==k&&(k=l.place("\x3cstyle\x3e\x3c/style\x3e",
document.head));k.innerHTML+=d+" {\n"+f+"\n}\n"},calcFilePath:function(d){return require.baseUrl+"../"+d},loadDataKeyFromStore:function(k,f,c){var h="string"==typeof k[f]?k[f]:k[f].id;return c.get(h).then(function(c){k[f]=h==k[f]?c:d.mixin(k[f],c);return k})}}})},"malifaux/store/config":function(){define(["../replaceSymbols","./DataLookup","./transformerHelpers"],function(d){function l(d){return function(){return"\x3cdiv class\x3d'gridxHasGridCellValue' data-dojo-type\x3d'malifaux/store/DataLookup' data-dojo-props\x3d'table: \""+
d+"\"'\x3e\x3c/div\x3e"}}return{name:"malifaux-db",version:1,stores:{log:{id:{order:0},date:{order:1,label:"Date",decorator:function(d){return(new Date(parseInt(d))).toISOString()},editable:!0},dataVersion:{order:2,label:"Data Version",editable:!0},update:{order:3,label:"Update Description",editable:!0}},cards:{id:{order:0},name:{order:1,label:"Name",editable:!0},type:{order:2,label:"Type",widgetsInCell:!0,decorator:l("types"),editable:!0,editor:"dijit/form/Select",editorArgs:{props:'store: dataStores.stores.types, query:{category: "cardType"}, labelAttr: "name"'}},
factions:{multiEntry:!0,label:"Factions",order:3,widgetsInCell:!0,decorator:l("factions"),editable:!0,editor:"dojox/form/CheckedMultiSelect",editorArgs:{props:'multiple: true, store: dataStores.stores.factions, query:{id: "*"}, labelAttr: "name"'}},characteristics:{multiEntry:!0,label:"Characteristics",order:4,widgetsInCell:!0,decorator:l("characteristics"),editable:!0,editor:"dojox/form/CheckedMultiSelect",editorArgs:{props:'multiple: true, store: dataStores.stores.characteristics, query:{id: "*"}, labelAttr: "name"'}},
data:{label:"Data",order:5},note:{order:6,label:"Note",editable:!0},tags:{order:7,label:"Tags",widgetsInCell:!0,decorator:l("types"),editable:!0,editor:"dojox/form/CheckedMultiSelect",editorArgs:{props:'multiple: true, store: dataStores.stores.types, query:{category: "tag"}, labelAttr: "name"'}}},types:{id:{order:0},name:{order:1,label:"Name",editable:!0},category:{order:2,label:"Category",editable:!0}},factions:{id:{order:0},name:{order:1,label:"Name",editable:!0},color:{order:2,label:"Color",width:"40px",
decorator:function(d){return['\x3cdiv style\x3d"display: inline-block; margin-left: 10px; border: 1px solid black; width: 20px; height: 20px; background-color: #',d,'"\x3e\x3c/div\x3e'].join("")},editable:!0},icon:{order:3,label:"Icon",editable:!0},seal:{order:4,label:"Seal",editable:!0,multiEntry:!0}},characteristics:{id:{order:0},name:{order:1,label:"Name",editable:!0},type:{order:2,label:"Type",widgetsInCell:!0,decorator:l("types"),editable:!0,editor:"dijit/form/Select",editorArgs:{props:'store: dataStores.stores.types, query:{category: "characteristics"}, labelAttr: "name"'}}},
abilities:{id:{order:0},name:{order:1,label:"Name",decorator:d,editable:!0},type:{order:2,label:"Type",width:"75px",widgetsInCell:!0,decorator:l("types"),editable:!0,editor:"dijit/form/Select",editorArgs:{props:'store: dataStores.stores.types, query:{category: "abilities"}, labelAttr: "name"'}},description:{order:3,label:"Description",decorator:d,editable:!0}},actions:{id:{order:0},name:{order:1,label:"Name",width:"175px",editable:!0},type:{order:2,label:"Type",width:"75px",widgetsInCell:!0,decorator:l("types"),
editable:!0,editor:"dijit/form/Select",editorArgs:{props:'store: dataStores.stores.types, query:{category: "action"}, labelAttr: "name"'}},ap:{order:3,label:"AP",width:"40px",editable:!0,editor:"dijit/form/NumberSpinner",editorArgs:{props:"min: 0, max: 4, default: 1"}},stat:{order:4,label:"Default Stat",width:"70px",decorator:d,editable:!0},tn:{order:5,label:"TN",width:"70px",decorator:d,editable:!0},rst:{order:6,label:"Rst",width:"40px",editable:!0,editor:"dijit/form/Select",editorArgs:{props:'options: [{value:"",label:"none"},{value:"Df",label:"Df"},{value:"Wp",label:"Wp"},{value:"Wd",label:"Wd"},{value:"Wk",label:"Wk"},{value:"Cg",label:"Cg"},{value:"Ht",label:"Ht"}]'}},
rg:{order:7,label:"Rg",width:"70px",decorator:d,editable:!0},description:{order:8,label:"Description",decorator:d,editable:!0}},images:{id:{order:0},linkedTo:{order:1,label:"Linked To",editable:!0},url:{order:1,label:"URL",editable:!1,indexed:!1,decorator:function(d){return'\x3cimg width\x3d"30" height\x3d"30" src\x3d"'+d+'"/\x3e'}}},triggers:{id:{order:0},name:{order:1,label:"Name",editable:!0},cost:{order:2,label:"Cost",decorator:d,editable:!0},description:{order:3,label:"Description",decorator:d,
editable:!0}},transformers:{id:{order:0},name:{order:1,label:"Name",editable:!0},types:{multiEntry:!0,order:2,label:"Type",widgetsInCell:!0,decorator:l("types"),editable:!0,editor:"dojox/form/CheckedMultiSelect",editorArgs:{props:'multiple: true, store: dataStores.stores.types, query:{category: "transform"}, labelAttr: "name"'}},linkIds:{multiEntry:!0,order:3,label:"Linked To",editable:!1},"function":{order:4,indexed:!1,label:"Function",editable:!0,decorator:function(d){return(d+"").substr(0,60)+
"..."}}}}}})},"malifaux/replaceSymbols":function(){define([],function(){var d=[{replace:/:ram/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eR\x3c/$element$\x3e'},{replace:/:crow/g,"with":'\x3cspan class\x3d"malifauxIcon"\x3eC\x3c/$element$\x3e'},{replace:/:tome/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eT\x3c/$element$\x3e'},{replace:/:mask/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eM\x3c/$element$\x3e'},{replace:/:\+fate/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3e+\x3c/$element$\x3e'},
{replace:/:-fate/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3e-\x3c/$element$\x3e'},{replace:/:ranged/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eL\x3c/$element$\x3e'},{replace:/:melee/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eX\x3c/$element$\x3e'},{replace:/:blast/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eB\x3c/$element$\x3e'},{replace:/:pulse/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eP\x3c/$element$\x3e'},{replace:/:aura/g,"with":'\x3c$element$ class\x3d"malifauxIcon"\x3eA\x3c/$element$\x3e'}];
return function(l,k){if(l){k=k||"span";l+="";for(var n=0;n<d.length;n++)l=l.replace(d[n].replace,d[n]["with"]);l=l.replace(/\$element\$/g,k)}else l="";return l}})},"malifaux/store/DataLookup":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/promise/all","../replaceSymbols","dijit/_WidgetBase"],function(d,l,k,n,f){return l(f,{value:null,table:null,_setValueAttr:function(c){"undefined"==c?c="":Array.isArray(c)||(c=[c]);this.domNode.innerHTML=c.toString();this.table&&c&&require(["malifaux/data"],
d.hitch(this,function(f){for(var m=[],b=0;b<c.length;b++)m.push(f.stores[this.table].query({id:"string"==typeof c[b]?c[b]:c[b].id}));k(m).then(d.hitch(this,function(a){for(var b=[],c=0;c<a.length;c++)0<a[c].length&&b.push(a[c][0].name);this.domNode.innerHTML=n(b.join(", "))}))}));this._set("value",c)}})})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(d,l,k,n,f,c,h,m,b,a,e,p,g,w,q,r,s,x,t,v,A,u,z){function H(a){return function(b){m[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}g.add("dijit-legacy-requires",!w.isAsync);g.add("dojo-bidi",!1);g("dijit-legacy-requires")&&s(0,function(){d(["dijit/_base/manager"])});var J={};n=c("dijit._WidgetBase",[x,A],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:H("lang"),dir:"",_setDirAttr:H("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:n.blankGif||d.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},e;for(e in b.attributeMap)c.push(e);for(e in b)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,
e.length-9),(!b.attributeMap||!(e in b.attributeMap))&&c.push(e))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=h.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,q.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=v.body(this.ownerDocument);z.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&(e.parentNode&&this.domNode!==e)&&(e.parentNode.replaceChild(this.domNode,e),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);l.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(l.map(a,function(a){return a+"Rtl"})));b.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,l.forEach(this.getChildren(),function(a){!a._started&&
(!a._destroyed&&q.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();l.forEach(this._connects,q.hitch(this,"disconnect"));l.forEach(this._supportingWidgets,b);this.domNode&&l.forEach(z.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
z.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?m.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){l.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;q.isObject(a)?
p.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,c,e){e=3<=arguments.length?e:this.attributeMap[a];l.forEach(q.isArray(e)?e:[e],function(e){var d=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":q.isFunction(c)&&(c=q.hitch(this,c));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?m.set(d,e,c):d.set(e,c);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(c));
break;case "innerHTML":d.innerHTML=c;break;case "class":b.replace(d,c,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var e=this[c.s];if(q.isFunction(e))var d=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!q.isFunction(this.focusNode)?"focusNode":"domNode",g=this[e]&&this[e].tagName,f;if(f=g)if(!(f=
J[g])){f=this[e];var h={},m;for(m in f)h[m.toLowerCase()]=!0;f=J[g]=h}m=f;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:m&&c.l in m&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?e:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var e,d=this["on"+a];d&&(e=d.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
r.emit(this.domNode,a.toLowerCase(),b);return e},on:function(a,b){var c=this._onMap(a);return c?k.after(this,c,b,!0):this.own(r(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},e;for(e in b.prototype)/^on/.test(e)&&(c[e.replace(/^on/,"").toLowerCase()]=e)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?z.findWidgets(this.containerNode):
[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(f.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(t.subscribe(a,q.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=p.get(this.domNode,"display")},placeAt:function(b,c){var e=
!b.tagName&&z.byId(b);e&&e.addChild&&(!c||"number"===typeof c)?e.addChild(this,c):(e=e&&"domNode"in e?e.containerNode&&!/after|before|replace/.test(c||"")?e.containerNode:e.domNode:h.byId(b,this.ownerDocument),a.place(this.domNode,e,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(q.hitch(this,function(){c&&(c=null,this._destroyed||q.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});g("dojo-bidi")&&
n.extend(u);return n})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(d,l,k,n,f){var c=0,h=[],m=0;l=function(){c=1;d._postLoad=d.config.afterOnLoad=!0;b()};var b=function(){if(!m){for(m=1;c&&(!n||0==n._Q.length)&&(k.idle?k.idle():1)&&h.length;){var a=h.shift();try{a()}catch(b){if(b.info=b.message,k.signal)k.signal("error",b);else throw b;}}m=0}};k.on&&k.on("idle",b);n&&(n._onQEmpty=b);var a=d.ready=d.addOnLoad=function(a,c,e){var m=f._toArray(arguments);
"number"!=typeof a?(e=c,c=a,a=1E3):m.shift();e=e?f.hitch.apply(d,m):function(){c()};e.priority=a;for(m=0;m<h.length&&a>=h[m].priority;m++);h.splice(m,0,e);b()},e=d.config.addOnLoad;if(e)a[f.isArray(e)?"apply":"call"](d,e);d.config.parseOnLoad&&!d.isAsync&&a(99,function(){d.parser||(d.deprecated("Add explicit require(['dojo/parser']);","","2.0"),k(["dojo/parser"]))});n?n(l):l();return a})},"dojo/domReady":function(){define(["./has"],function(d){function l(a){b.push(a);m&&k()}function k(){if(!a){for(a=
!0;b.length;)try{b.shift()(f)}catch(c){console.error(c,"in domReady callback",c.stack)}a=!1;l._onQEmpty()}}var n=function(){return this}(),f=document,c={loaded:1,complete:1},h="string"!=typeof f.readyState,m=!!c[f.readyState],b=[],a;l.load=function(a,b,c){l(c)};l._Q=b;l._onQEmpty=function(){};h&&(f.readyState="loading");if(!m){var e=[],p=function(a){a=a||n.event;m||"readystatechange"==a.type&&!c[f.readyState]||(h&&(f.readyState="complete"),m=1,k())},g=function(a,c){a.addEventListener(c,p,!1);b.push(function(){a.removeEventListener(c,
p,!1)})};if(!d("dom-addeventlistener")){var g=function(a,c){c="on"+c;a.attachEvent(c,p);b.push(function(){a.detachEvent(c,p)})},w=f.createElement("div");try{w.doScroll&&null===n.frameElement&&e.push(function(){try{return w.doScroll("left"),1}catch(a){}})}catch(q){}}g(f,"DOMContentLoaded");g(n,"load");"onreadystatechange"in f?g(f,"readystatechange"):h||e.push(function(){return c[f.readyState]});if(e.length){var r=function(){if(!m){for(var a=e.length;a--;)if(e[a]()){p("poller");return}setTimeout(r,
30)}};r()}}return l})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(d,l,k,n){return d("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var c=this._attrPairNames;return c[d]?c[d]:c[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},postscript:function(d){d&&this.set(d)},_get:function(d,c){return"function"===typeof this[c.g]?this[c.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,c){if("object"===
typeof d){for(var h in d)d.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,d[h]);return this}h=this._getAttrNames(d);var m=this._get(d,h);h=this[h.s];var b;"function"===typeof h?b=h.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=c;if(this._watchCallbacks){var a=this;n(b,function(){a._watchCallbacks(d,m,c)})}return this},_changeAttrValue:function(d,c){var h=this.get(d);this[d]=c;this._watchCallbacks&&this._watchCallbacks(d,h,c);return this},watch:function(d,c){var h=this._watchCallbacks;
if(!h)var m=this,h=this._watchCallbacks=function(a,b,c,d){var f=function(d){if(d){d=d.slice();for(var f=0,h=d.length;f<h;f++)d[f].call(m,a,b,c)}};f(h["_"+a]);d||f(h["*"])};!c&&"function"===typeof d?(c=d,d="*"):d="_"+d;var b=h[d];"object"!==typeof b&&(b=h[d]=[]);b.push(c);var a={};a.unwatch=a.remove=function(){var a=k.indexOf(b,c);-1<a&&b.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(d,l,k){return k("dijit.Destroyable",
null,{destroy:function(d){this._destroyed=!0},own:function(){var k=["destroyRecursive","destroy","remove"];d.forEach(arguments,function(f){function c(){m.remove();d.forEach(b,function(a){a.remove()})}var h,m=l.before(this,"destroy",function(a){f[h](a)}),b=[];f.then?(h="cancel",f.then(c,c)):d.forEach(k,function(a){"function"===typeof f[a]&&(h||(h=a),b.push(l.after(f,a,c,!0)))})},this);return arguments}})})},"malifaux/store/transformerHelpers":function(){define([],function(){return{getChrRstrictionModelNames:function(d){if(!d.__chrRstrictionModelNames){d.__chrRstrictionModelNames=
[];for(var l=0;l<d.characteristics.length;l++)if("tyCh-ModelRestrictionChar"==d.characteristics[l].type)for(var k=d.characteristics[l].name.split(" or "),n=0;n<k.length;n++)d.__chrRstrictionModelNames.push(k[n])}return d.__chrRstrictionModelNames}}})},"dojox/store/db/IndexedDB":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when dojo/promise/all dojo/store/util/SimpleQueryEngine dojo/store/util/QueryResults".split(" "),function(d,l,k,n,f,c,h){function m(a){var b=new k;a.onsuccess=
function(a){b.resolve(a.target.result)};a.onerror=function(){a.error.message=a.webkitErrorMessage;b.reject(a.error)};return b.promise}function b(a,b,c){if(w||p.length){a&&(p.push({cursor:a,priority:b,retry:c}),p.sort(function(a,b){return a.priority>b.priority?1:-1}));if(w>=g)return;var e=p.pop();a=e&&e.cursor}if(a)try{a["continue"](),w++}catch(d){if(("TransactionInactiveError"===d.name||0===d.name)&&e)e.retry();else throw d;}}function a(){return!0}function e(a){function b(g,f){e?g&&c.then(function(a){a.forEach(g,
f)}):(g&&d.push(g),c||(c=a.filter(function(a){e=!0;for(var b=0,c=d.length;b<c;b++)d[b].call(f,a);return!0})));return c}var c,e,d=[];return{total:a.total,filter:function(a,c){var e;return b(function(b){e||(e=!a.call(c,b))})},forEach:b,map:function(a,c){var e=[];return b(function(b){e.push(a.call(c,b))}).then(function(){return e})},then:function(a,c){return b().then(a,c)}}}var p=[],g=1,w=0,q=/(.*)\*$/,r=window.IDBKeyRange||window.webkitIDBKeyRange;return d(null,{constructor:function(a){d.safeMixin(this,
a);var b=this,c=this.dbConfig;this.indices=c.stores[this.storeName];this.cachedCount={};for(var e in b.indices)a=b.indices[e],"number"===typeof a&&(b.indices[e]={preference:a});this.db=this.db||c.db;if(!this.db){var g=c.openRequest;g||(g=c.openRequest=window.indexedDB.open(c.name||"dojo-db",parseInt(c.version,10)),g.onupgradeneeded=function(){var a=b.db=g.result,e;for(e in c.stores){var d=c.stores[e];if(a.objectStoreNames.contains(e))f=g.transaction.objectStore(e);else var f=d.idProperty||"id",f=
a.createObjectStore(e,{keyPath:f,autoIncrement:d[f]&&d[f].autoIncrement||!1});for(var h in d)!f.indexNames.contains(h)&&("autoIncrement"!==h&&!1!==d[h].indexed)&&f.createIndex(h,h,d[h])}},c.available=m(g));this.available=c.available.then(function(a){return b.db=a})}},idProperty:"id",storeName:"",indices:{},queryEngine:c,transaction:function(){var a=this;this._currentTransaction=null;return{abort:function(){a._currentTransaction.abort()},commit:function(){a._currentTransaction=null}}},_getTransaction:function(){if(!this._currentTransaction){this._currentTransaction=
this.db.transaction([this.storeName],"readwrite");var a=this;this._currentTransaction.oncomplete=function(){a._currentTransaction=null};this._currentTransaction.onerror=function(a){console.error(a)}}return this._currentTransaction},_callOnStore:function(a,b,c,e){var d=this;return n(this.available,function z(){var g=d._currentTransaction;if(g)var f=!0;else g=d._getTransaction();var h,k;if(f)try{k=g.objectStore(d.storeName),c&&(k=k.index(c)),h=k[a].apply(k,b)}catch(p){if("TransactionInactiveError"===
p.name||"InvalidStateError"===p.name)return d._currentTransaction=null,z();throw p;}else k=g.objectStore(d.storeName),c&&(k=k.index(c)),h=k[a].apply(k,b);return e?h:m(h)})},get:function(a){return this._callOnStore("get",[a])},getIdentity:function(a){return a[this.idProperty]},put:function(a,b){b=b||{};this.cachedCount={};return this._callOnStore(!1===b.overwrite?"add":"put",[a])},add:function(a,b){b=b||{};b.overwrite=!1;return this.put(a,b)},remove:function(a){this.cachedCount={};return this._callOnStore("delete",
[a])},query:function(c,d){function g(a,b,c){C++;var e=z.indices[a];if(e&&!1!==e.indexed&&(b=b||e.preference*(c||1)||0.001,b>S))return S=b,I=a,!0;C++}d=d||{};var m=d.start||0,p=d.count||Infinity,u=d.sort,z=this;if(c.forEach){var H={sort:u},J=this.queryEngine({},H),M=[],R=0,N=0;return e({total:{then:function(){return f(M).then(function(a){return a.reduce(function(a,b){return a+b})*R/(N||1)}).then.apply(this,arguments)}},filter:function(a,b){var e=0,d=[],g,h={},k=[];return f(c.map(function(c,f){function l(c){n.push(c);
for(var f=[],h=[];d.every(function(a){if(0<a.length)return(a=a[0])&&h.push(a),f.push(a)});){if(e>=m+p||0===h.length){g=!0;return}c=J(h)[0];d[f.indexOf(c)].shift();if(e++>=m&&(k.push(c),!a.call(b,c))){g=!0;return}f=[];h=[]}return!0}var n=d[f]=[],t=z.query(c,H);M[f]=t.total;return t.filter(function(a){if(!g){var b=z.getIdentity(a);N++;if(b in h)return!0;R++;h[b]=!0;return l(a)}}).then(function(a){l(null);return a})})).then(function(){return k})}})}var O,T=JSON.stringify(c)+"-"+JSON.stringify(d.sort),
E,I,S=0,C=0,y,D;for(D in c){y=c[D];var W=!1,Q,G=null;if("boolean"!==typeof y){if(y)if(y.from||y.to)W=!0,function(a,b){G={test:function(c){return!a||a<=c&&(!b||b>=c)},keyRange:a?b?r.bound(a,b,y.excludeFrom,y.excludeTo):r.lowerBound(a,y.excludeFrom):r.upperBound(b,y.excludeTo)}}(y.from,y.to);else if("object"===typeof y&&y.contains)(function(a){var b,c=(b=a[0])&&b.match&&b.match(q);c?(b=c[1],b=r.bound(b,b+"~")):b=r.only(b);G={test:function(b){return a.every(function(a){var c=a&&a.match&&a.match(q);return c?
(a=c[1],b&&b.some(function(b){return b.slice(0,a.length)===a})):b&&-1<b.indexOf(a)})},keyRange:b}})(y.contains);else if(Q=y.match&&y.match(q))Q=Q[1],G=RegExp("^"+Q),G.keyRange=r.bound(Q,Q+"~");G&&(c[D]=G);g(D,null,W?0.1:1)}}var F;if(u)if(u=u[0],u.attribute===I||g(u.attribute,1))F=u.descending;else var L=!0,m=0,p=Infinity;var P;I?(O=I in c?(y=c[I])&&y.keyRange?y.keyRange:r.only(y):null,P=[O,F?"prev":"next"]):P=[];var B=z.cachedPosition;B&&B.queryId===T&&B.offset<m&&1<C?(E=B.preFilterOffset+1,z.cachedPosition=
B=l.mixin({},B)):(B=z.cachedPosition={offset:-1,preFilterOffset:-1,queryId:T},2>C&&(B.offset=B.preFilterOffset=(E=m)-1));var K=this.queryEngine(c);F={total:{then:function(a){function b(a){z.cachedCount[T]=a;return Math.round((B.offset+1.01)/(B.preFilterOffset+1.01)*a)}var c=z.cachedCount[T];return c?a(b(c)):(this.then=(O?z._callOnStore("count",[O],I):z._callOnStore("count")).then(b)).then.apply(this,arguments)}},filter:function(a,c){function e(){n(z._callOnStore("openCursor",P,I,!0),function(h){w++;
h.onsuccess=function(k){w--;var l=k.target.result;if(l){if(E){l.advance(E);w++;E=!1;return}B.preFilterOffset++;try{var t=l.value;d.join&&(t=d.join(t));return n(t,function(k){if(K.matches(k)&&(B.offset++,B.offset>=m&&(f.push(k),!a.call(c,k)||B.offset>=m+p-1))){h.lastCursor=l;g.resolve(f);b();return}return b(l,d.priority,function(){E=B.preFilterOffset;e()})})}catch(z){g.reject(z)}}else g.resolve(f);b()};h.onerror=function(a){w--;g.reject(a);b()}})}var g=new k,f=[];e();return g.promise}};return L?(J=
this.queryEngine({},d),L=l.delegate(F.filter(a).then(function(a){return J(a)})),L.total=F.total,new h(L)):d.rawResults?F:e(F)}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(d){return function(l,k){function n(c){c=d.filter(c,l);var f=k&&k.sort;f&&c.sort("function"==typeof f?f:function(b,a){for(var c,d=0;c=f[d];d++){var g=b[c.attribute],m=a[c.attribute],g=null!=g?g.valueOf():g,m=null!=m?m.valueOf():m;if(g!=m)return!!c.descending==(null==g||g>m)?-1:1}return 0});
if(k&&(k.start||k.count)){var m=c.length;c=c.slice(k.start||0,(k.start||0)+(k.count||Infinity));c.total=m}return c}switch(typeof l){default:throw Error("Can not query with a "+typeof l);case "object":case "undefined":var f=l;l=function(c){for(var d in f){var m=f[d];if(m&&m.test){if(!m.test(c[d],c))return!1}else if(m!=c[d])return!1}return!0};break;case "string":if(!this[l])throw Error("No filter function "+l+" was found in store");l=this[l];case "function":}n.matches=l;return n}})},"dojo/store/util/QueryResults":function(){define(["../../_base/array",
"../../_base/lang","../../when"],function(d,l,k){var n=function(f){function c(c){f[c]=function(){var b=arguments,a=k(f,function(a){Array.prototype.unshift.call(b,a);return n(d[c].apply(d,b))});if("forEach"!==c||h)return a}}if(!f)return f;var h=!!f.then;h&&(f=l.delegate(f));c("forEach");c("filter");c("map");null==f.total&&(f.total=k(f,function(c){return c.length}));return f};l.setObject("dojo.store.util.QueryResults",n);return n})},"dojox/store/db/SQL":function(){define("dojo/_base/declare dojo/Deferred dojo/when dojo/store/util/QueryResults dojo/_base/lang dojo/promise/all".split(" "),
function(d,l,k,n,f,c){function h(b){return b&&f.mixin(b,JSON.parse(b.__extra))}var m=/(.*)\*$/;return d([],{constructor:function(b){var a=b.dbConfig;this.database=openDatabase(b.dbName||"dojo-db","1.0","dojo-db",4194304);var e=this.indexPrefix=b.indexPrefix||"idx_",d=b.table||b.storeName;this.table=(b.table||b.storeName).replace(/[^\w]/g,"_");b=[];this.indices=a.stores[d];this.repeatingIndices={};for(var g in this.indices)this.indices[g].multiEntry&&(this.repeatingIndices[g]=!0);if(!a.available){for(d in a.stores){var f=
a.stores[d],h=d.replace(/[^\w]/g,"_"),m=f[this.idProperty],k=["__extra",this.idProperty+" "+(m&&m.autoIncrement?"INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY")],m=[this.idProperty];for(g in f)g!=this.idProperty&&k.push(g);b.push(this.executeSql("CREATE TABLE IF NOT EXISTS "+h+" ("+k.join(",")+")"));for(g in f)g!=this.idProperty&&(f[g].multiEntry?(m.push(g),k=h+"_repeating_"+g,b.push(this.executeSql("CREATE TABLE IF NOT EXISTS "+k+" (id,value)")),b.push(this.executeSql("CREATE INDEX IF NOT EXISTS idx_"+
k+"_id ON "+k+"(id)")),b.push(this.executeSql("CREATE INDEX IF NOT EXISTS idx_"+k+"_value ON "+k+"(value)"))):(b.push(this.executeSql("ALTER TABLE "+h+" ADD "+g).then(null,function(){})),!1!==f[g].indexed&&b.push(this.executeSql("CREATE INDEX IF NOT EXISTS "+e+h+"_"+g+" ON "+h+"("+g+")"))))}a.available=c(b)}this.available=a.available},idProperty:"id",selectColumns:["*"],get:function(b){return k(this.executeSql("SELECT "+this.selectColumns.join(",")+" FROM "+this.table+" WHERE "+this.idProperty+"\x3d?",
[b]),function(a){return 0<a.rows.length?h(a.rows.item(0)):void 0})},getIdentity:function(b){return b[this.idProperty]},remove:function(b){return this.executeSql("DELETE FROM "+this.table+" WHERE "+this.idProperty+"\x3d?",[b])},identifyGeneratedKey:!0,add:function(b,a){var e=[],d=[],g=[],f={},h=[],m=this,l;for(l in b)b.hasOwnProperty(l)&&(l in this.indices||l==this.idProperty?this.repeatingIndices[l]?h.push(function(a){return c(b[l].map(function(b){return m.executeSql("INSERT INTO "+m.table+"_repeating_"+
l+" (value, id) VALUES (?, ?)",[b,a])}))}):(g.push(l),d.push("?"),e.push(b[l])):f[l]=b[l]);g.push("__extra");d.push("?");e.push(JSON.stringify(f));var n=this.idProperty;this.identifyGeneratedKey&&(e.idColumn=n);d="INSERT INTO "+this.table+" ("+g.join(",")+") VALUES ("+d.join(",")+")";return k(this.executeSql(d,e),function(a){var e=a.insertId;b[n]=e;return c(h.map(function(a){return a(e)})).then(function(){return e})})},put:function(b,a){a=a||{};var c=a.id||b[this.idProperty],d=a.overwrite;if(void 0===
d){var g=this;return this.get(c).then(function(c){return(a.overwrite=!!c)?(a.overwrite=!0,g.put(b,a)):g.add(b,a)})}if(!d)return g.add(b,a);var d="UPDATE "+this.table+" SET ",f=[],h=[],m={},l;for(l in b)if(b.hasOwnProperty(l))if(l in this.indices||l==this.idProperty)if(this.repeatingIndices[l]){this.executeSql("DELETE FROM "+this.table+"_repeating_"+l+" WHERE id\x3d?",[c]);for(var n=b[l],t=0;t<n.length;t++)this.executeSql("INSERT INTO "+this.table+"_repeating_"+l+" (value, id) VALUES (?, ?)",[n[t],
c])}else h.push(l+"\x3d?"),f.push(b[l]);else m[l]=b[l];h.push("__extra\x3d?");f.push(JSON.stringify(m));d+=h.join(",")+" WHERE "+this.idProperty+"\x3d?";f.push(b[this.idProperty]);return k(this.executeSql(d,f),function(a){return c})},query:function(b,a){function c(a){var b=[],e;for(e in a){var d=a[e],g=function(a){var b=a&&a.match&&a.match(m);if(b)return r.push(b[1]+"%")," LIKE ?";r.push(a);return"\x3d?"};if(d)if(d.contains){var f=k.table+"_repeating_"+e;b.push(d.contains.map(function(a){return k.idProperty+
" IN (SELECT id FROM "+f+" WHERE value"+g(a)+")"}).join(" AND "));continue}else if("object"==typeof d&&("from"in d||"to"in d)){var h=d.excludeFrom?"\x3e":"\x3e\x3d",p=d.excludeTo?"\x3c":"\x3c\x3d";"from"in d?(r.push(d.from),"to"in d?(r.push(d.to),b.push("("+l+"."+e+h+"? AND "+l+"."+e+p+"?)")):b.push(l+"."+e+h+"?")):(r.push(d.to),b.push(l+"."+e+p+"?"));continue}b.push(l+"."+e+g(d))}return b.join(" AND ")}a=a||{};var d="FROM "+this.table,g,k=this,l=this.table,r=[];b.forEach?(g=b.map(c).join(") OR ("))&&
(g="("+g+")"):g=c(b);g&&(g=" WHERE "+g);a.sort&&(g+=" ORDER BY "+a.sort.map(function(a){return l+"."+a.attribute+" "+(a.descending?"desc":"asc")}));var s=g;a.count&&(s+=" LIMIT "+a.count);a.start&&(s+=" OFFSET "+a.start);s=f.delegate(this.executeSql("SELECT * "+d+s,r).then(function(a){for(var b=[],c=0;c<a.rows.length;c++)b.push(h(a.rows.item(c)));return b}));k=this;s.total={then:function(a,b){return k.executeSql("SELECT COUNT(*) "+d+g,r).then(function(a){return a.rows.item(0)["COUNT(*)"]}).then(a,
b)}};return new n(s)},executeSql:function(b,a){var c=new l,d,g;this.database.transaction(function(f){f.executeSql(b,a,function(a,b){c.resolve(d=b)},function(a,b){c.reject(g=b)})});if(d)return d;if(g)throw g;return c.promise}})})},"malifaux/store/cachedValues":function(){define(["dojo/promise/all","./loader!loadData"],function(d,l){function k(){return d({cards:{},types:l.types.query({id:"*"}).then(function(c){return f(c)}),factions:l.factions.query({id:"*"}).then(function(c){return f(c)}),characteristics:l.characteristics.query({id:"*"}).then(function(c){return f(c)}),
transformers:l.transformers.query({id:"*"}).then(function(c){for(var d=null,m=0;m<c.length;m++){try{d=eval("("+c[m]["function"]+")")}catch(b){d=function(){}}c[m]["function"]=d}return f(c,!1)})}).then(function(c){for(var d in c)n[d]=c[d];return n})}var n={load:function(c,d,f){k().then(function(b){f(b)})},refresh:function(){return k().then(function(c){return c})}},f=function(c,d){for(var f={},b=0;b<c.length;b++)f[c[b].id]=c[b],!1!==d&&c[b].name&&(f[c[b].name]=c[b]);return f};return n})},"malifaux/sort/SearchEngine":function(){define("dojo/_base/lang dojo/_base/declare ../data ../cards/Avatar ../cards/Card ../cards/Manifest ../cards/Model ../cards/Upgrade ../cards/lists/Group dijit/_WidgetBase".split(" "),
function(d,l,k,n,f,c,h,m,b,a){return l([a],{query:function(a){return this.loadCards(a.cardTypes).then(d.hitch(this,function(b){b=this.makeCardObjects(b);return a.filter.filter(b,a)})).then(d.hitch(this,function(b){a.group?b=a.group.group(b,a):a.smartSort&&(a.sortBy="",a.sortList=d.clone(b),b=b.sort(function(b,c){return b.getSortName(a).localeCompare(c.getSortName(a))}));return b})).then(d.hitch(this,function(a){if(0<a.length&&a[0].cardData&&0<a[0].cardData.length)for(var c=0;c<a.length;c++)a[c]=new b(a[c]);
return a}))},loadCards:function(a){var b=[];Array.isArray(a)||(a=[a]);if("*"==a[0])b={id:"*"};else for(var c=0;c<a.length;c++)b.push({type:a[c]});return k.stores.cards.query(b,{sort:[{attribute:"name"}]})},makeCardObjects:function(a){for(var b=0;b<a.length;b++)if(k.cardCache[a[b].id])a[b]=k.cardCache[a[b].id];else{var d=f;switch(a[b].type){case "ty-AvatarCard":d=n;break;case "ty-ManifestCard":d=c;break;case "ty-ModelCard":d=h;break;case "ty-UpgradeCard":d=m}k.cardCache[a[b].id]=a[b]=new d(a[b])}return a}})})},
"malifaux/cards/Avatar":function(){define(["dojo/_base/lang","dojo/_base/declare","./AvatarDisplay","./Upgrade","dojo/text!./templates/AvatarPreview.html"],function(d,l,k,n,f){return l([n],{typeWeight:15,displayDijitType:k,previewTemplate:f,loadIndexedValues:function(){return this.inherited(arguments).then(d.hitch(this,function(){return this.loadUpgradeValues(this.data.manifested.data)}))}})})},"malifaux/cards/AvatarDisplay":function(){define("dojo/_base/lang dojo/_base/declare ./_DisplayMixin ./_TwoSidedMixin dojo/text!./templates/AvatarDisplay.html ./AvatarFrontDisplay ./AvatarBackDisplay".split(" "),
function(d,l,k,n,f){return l([k,n],{templateString:f})})},"malifaux/cards/_DisplayMixin":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-class dojo/Deferred dojo/promise/all dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),function(d,l,k,n,f,c,h,m){return l([c,h,m],{cardData:null,_displayed:null,constructor:function(){this._displayed=new n},postCreate:function(){this.inherited(arguments);this._displayed.resolve()},displayData:function(b){},show:function(){k.remove(this.domNode,
"hideMe")},hide:function(){k.add(this.domNode,"hideMe")},_setCardDataAttr:function(b){this._set("cardData",b);f([this._displayed,b.dataLoaded()]).then(d.hitch(this,function(){this.displayData(b)}))}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(d,l,k,n,f,c,h,m){var b=l("dijit._TemplatedMixin",m,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(a){var b=this.declaredClass,c=this;return h.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=n.getObject(d.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=d(this.templatePath,{sanitize:!0}));var a=b.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(n.isString(a)){if(c=k.toDom(this._stringRepl(a),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});
b._templateCache={};b.getCachedTemplate=function(a,c,d){var g=b._templateCache,f=a,m=g[f];if(m){try{if(!m.ownerDocument||m.ownerDocument==(d||document))return m}catch(l){}k.destroy(m)}a=h.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return g[f]=a;c=k.toDom(a,d);if(1!=c.nodeType)throw Error("Invalid template: "+a);return g[f]=c};c("ie")&&f(window,"unload",function(){var a=b._templateCache,c;for(c in a){var d=a[c];"object"==typeof d&&k.destroy(d);delete a[c]}});return b})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(d){return d.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(d,l,k,n){var f;f=function(a,b,c){n(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)};var c={},h=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},m={},b={};d.cache=function(a,b,d){var g;"string"==typeof a?/\//.test(a)?(g=a,d=b):g=l.toUrl(a.replace(/\./g,
"/")+(b?"/"+b:"")):(g=a+"",d=b);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return c[g]=a,d?h(a):a;if(null===a)return delete c[g],null;g in c||f(g,!0,function(a){c[g]=a});return d?h(c[g]):c[g]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(a,e,d){a=a.split("!");var g=1<a.length,k=a[0],l=e.toUrl(a[0]);a="url:"+l;var n=m,s=function(a){d(g?h(a):a)};k in c?n=c[k]:e.cache&&a in e.cache?
n=e.cache[a]:l in c&&(n=c[l]);if(n===m)if(b[l])b[l].push(s);else{var x=b[l]=[s];f(l,!e.async,function(a){c[k]=c[l]=a;for(var e=0;e<x.length;)x[e++](a);delete b[l]})}else s(n)}}})},"dojo/request":function(){define(["./request/default!"],function(d){return d})},"dojo/request/default":function(){define(["exports","require","../has"],function(d,l,k){var n=k("config-requestProvider");n||(n="./xhr");d.getPlatformDefaultId=function(){return"./xhr"};d.load=function(d,c,h,k){l(["platform"==d?"./xhr":n],function(b){h(b)})}})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(d,l){var k=/[&<>'"\/]/g,n={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},f={};l.setObject("dojo.string",f);f.escape=function(c){return!c?"":c.replace(k,function(c){return n[c]})};f.rep=function(c,d){if(0>=d||!c)return"";for(var f=[];;){d&1&&f.push(c);if(!(d>>=1))break;c+=c}return f.join("")};f.pad=function(c,d,k,b){k||(k="0");c=String(c);d=f.rep(k,Math.ceil((d-c.length)/
k.length));return b?c+d:d+c};f.substitute=function(c,f,k,b){b=b||d.global;k=k?l.hitch(b,k):function(a){return a};return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,c,d){a=l.getObject(c,!1,f);d&&(a=l.getObject(d,!1,b).call(b,a,c));return k(a,c).toString()})};f.trim=String.prototype.trim?l.trim:function(c){c=c.replace(/^\s+/,"");for(var d=c.length-1;0<=d;d--)if(/\S/.test(c.charAt(d))){c=c.substring(0,d+1);break}return c};return f})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(d,l,k,n,f,c,h,m,b){var a=f.delegate(m,{mouseenter:c.enter,mouseleave:c.leave,keypress:k._keypress}),e;k=n("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,e=this.attachScope||this,h=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(h)for(var k=h.split(/\s*,\s*/);h=k.shift();)f.isArray(e[h])?e[h].push(a):e[h]=a,d="containerNode"!=h,this._attachPoints.push(h);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){h=b.split(/\s*,\s*/);for(k=f.trim;b=h.shift();)if(b){var m=
null;-1!=b.indexOf(":")?(m=b.split(":"),b=k(m[0]),m=k(m[1])):b=k(b);m||(m=b);this._attachEvents.push(c(a,b,f.hitch(e,m)))}}return d},_attach:function(b,c,f){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?e||(e=d("./a11yclick")):a[c]||c;return h(b,c,f)},_detachTemplateNodes:function(){var a=this.attachScope||this;l.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];l.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});f.extend(b,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(d,l,k,n,f,c,h,m,b,a){function e(a,b,d){return q&&d?function(a,b){return c(a,d,b)}:s?function(d,e){var f=c(d,b,function(a){e.call(this,a);R=(new Date).getTime()}),g=c(d,a,function(a){(!R||(new Date).getTime()>R+1E3)&&e.call(this,a)});return{remove:function(){f.remove();
g.remove()}}}:function(b,d){return c(b,a,d)}}function p(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function g(b,d,e){var f=p(b.target);if(t=!b.target.disabled&&f&&f.dojoClick)if(A=(v="useTarget"==t)?f:b.target,v&&b.preventDefault(),u=b.changedTouches?b.changedTouches[0].pageX-a.global.pageXOffset:b.clientX,z=b.changedTouches?b.changedTouches[0].pageY-a.global.pageYOffset:b.clientY,H=("object"==typeof t?t.x:"number"==typeof t?t:0)||4,J=("object"==typeof t?t.y:"number"==typeof t?t:
0)||4,!x){x=!0;var g=function(b){t=v?k.isDescendant(a.doc.elementFromPoint(b.changedTouches?b.changedTouches[0].pageX-a.global.pageXOffset:b.clientX,b.changedTouches?b.changedTouches[0].pageY-a.global.pageYOffset:b.clientY),A):t&&(b.changedTouches?b.changedTouches[0].target:b.target)==A&&Math.abs((b.changedTouches?b.changedTouches[0].pageX-a.global.pageXOffset:b.clientX)-u)<=H&&Math.abs((b.changedTouches?b.changedTouches[0].pageY-a.global.pageYOffset:b.clientY)-z)<=J};a.doc.addEventListener(d,function(a){g(a);
v&&a.preventDefault()},!0);a.doc.addEventListener(e,function(a){g(a);if(t){M=(new Date).getTime();var b=v?A:a.target;"LABEL"===b.tagName&&(b=k.byId(b.getAttribute("for"))||b);var d=a.changedTouches?a.changedTouches[0]:a,e=document.createEvent("MouseEvents");e._dojo_click=!0;e.initMouseEvent("click",!0,!0,a.view,a.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){c.emit(b,"click",e);M=(new Date).getTime()},0)}},!0);b=function(b){a.doc.addEventListener(b,
function(a){!a._dojo_click&&((new Date).getTime()<=M+1E3&&!("INPUT"==a.target.tagName&&n.contains(a.target,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==b&&(("INPUT"!=a.target.tagName||"radio"==a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&"AUDIO"!=a.target.tagName&&"VIDEO"!=a.target.tagName)&&a.preventDefault())},!0)};b("click");b("mousedown");b("mouseup")}}var w=5>h("ios"),q=h("pointer-events")||h("MSPointer"),
r=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=h("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),s=h("touch-events"),x,t,v=!1,A,u,z,H,J,M,R,N;q?b(function(){a.doc.addEventListener(r.down,function(a){g(a,r.move,r.up)},!0)}):s&&b(function(){function b(a){var c=f.delegate(a,{bubbles:!0});6<=h("ios")&&(c.touches=a.touches,c.altKey=a.altKey,c.changedTouches=a.changedTouches,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey,c.shiftKey=a.shiftKey,
c.targetTouches=a.targetTouches);return c}N=a.body();a.doc.addEventListener("touchstart",function(a){R=(new Date).getTime();var b=N;N=a.target;c.emit(b,"dojotouchout",{relatedTarget:N,bubbles:!0});c.emit(N,"dojotouchover",{relatedTarget:b,bubbles:!0});g(a,"touchmove","touchend")},!0);c(a.doc,"touchmove",function(d){R=(new Date).getTime();var e=a.doc.elementFromPoint(d.pageX-(w?0:a.global.pageXOffset),d.pageY-(w?0:a.global.pageYOffset));e&&(N!==e&&(c.emit(N,"dojotouchout",{relatedTarget:e,bubbles:!0}),
c.emit(e,"dojotouchover",{relatedTarget:N,bubbles:!0}),N=e),c.emit(e,"dojotouchmove",b(d))||d.preventDefault())});c(a.doc,"touchend",function(d){R=(new Date).getTime();var e=a.doc.elementFromPoint(d.pageX-(w?0:a.global.pageXOffset),d.pageY-(w?0:a.global.pageYOffset))||a.body();c.emit(e,"dojotouchend",b(d))})});l={press:e("mousedown","touchstart",r.down),move:e("mousemove","dojotouchmove",r.move),release:e("mouseup","dojotouchend",r.up),cancel:e(m.leave,"touchcancel",q?r.cancel:null),over:e("mouseover",
"dojotouchover",r.over),out:e("mouseout","dojotouchout",r.out),enter:m._eventHandler(e("mouseover","dojotouchover",r.over)),leave:m._eventHandler(e("mouseout","dojotouchout",r.out))};return d.touch=l})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(d,l,k,n,f){return k("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var c=
this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);f.parse(c,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(n.hitch(this,function(c){this._startupWidgets=c;for(var d=0;d<c.length;d++)this._processTemplateNode(c[d],function(b,a){return b[a]},function(b,a,c){return a in b?b.connect(b,a,c):b.on(a,c,!0)});this.containerNode&&
this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(c,d,f){return d(c,"dojoType")||d(c,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){d.forEach(this._startupWidgets,function(c){c&&(!c._started&&
c.startup)&&c.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(d,l,k,n,f,c,h,m,b,a,e,p,g,w,q,r){function s(a){return eval("("+a+")")}function x(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<v){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&
(b[d.toLowerCase()]=d);b._extendCnt=v}return b}function t(a,b){var c=a.join();if(!A[c]){for(var e=[],f=0,g=a.length;f<g;f++){var h=a[f];e[e.length]=A[h]=A[h]||k.getObject(h)||~h.indexOf("/")&&(b?b(h):d(h))}f=e.shift();A[c]=e.length?f.createSubclass?f.createSubclass(e):f.extend.apply(f,e):f}return A[c]}new Date("X");var v=0;b.after(k,"extend",function(){v++},!0);var A={},u={_clearCache:function(){v++;A={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args"),
f=a.getAttribute("with"),e=(e||"").split(/\s*,\s*/);f&&f.length&&n.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||l._scopeName)+"Type",e="data-"+(c.scope||l._scopeName)+"-",f=e+"type",g=e+"mixins",h=[];n.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(f)||a.getAttribute(d);if(c){var e=a.getAttribute(g),c=e?[c].concat(e.split(/\s*,\s*/)):[c];h.push({node:a,types:c})}});return this._instantiate(h,
b,c)},_instantiate:function(b,c,d,e){function f(a){!c._started&&!d.noStart&&n.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}b=n.map(b,function(a){var b=a.ctor||t(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return e?a(b).then(f):f(b)},construct:function(a,c,d,f,h,p){function t(a){W&&k.setObject(W,a);for(y=0;y<P.length;y++)b[P[y].advice||
"after"](a,P[y].method,k.hitch(a,P[y].func),!0);for(y=0;y<B.length;y++)B[y].call(a);for(y=0;y<K.length;y++)a.watch(K[y].prop,K[y].func);for(y=0;y<U.length;y++)q(a,U[y].event,U[y].func);return a}var r=a&&a.prototype;f=f||{};var v={};f.defaults&&k.mixin(v,f.defaults);p&&k.mixin(v,p);var u;g("dom-attributes-explicit")?u=c.attributes:g("dom-attributes-specified-flag")?u=n.filter(c.attributes,function(a){return a.specified}):(p=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,
"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),u=n.map(p.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var A=f.scope||l._scopeName;p="data-"+A+"-";var C={};"dojo"!==A&&(C[p+"props"]="data-dojo-props",C[p+"type"]="data-dojo-type",C[p+"mixins"]="data-dojo-mixins",C[A+"type"]="dojoType",C[p+"id"]="data-dojo-id");for(var y=0,D,A=[],W,Q;D=u[y++];){var G=D.name,F=G.toLowerCase();
D=D.value;switch(C[F]||F){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":Q=D;break;case "data-dojo-id":case "jsid":W=D;break;case "data-dojo-attach-point":case "dojoattachpoint":v.dojoAttachPoint=D;break;case "data-dojo-attach-event":case "dojoattachevent":v.dojoAttachEvent=D;break;case "class":v["class"]=c.className;break;case "style":v.style=c.style&&c.style.cssText;break;default:if(G in r||(G=x(a)[F]||G),G in r)switch(typeof r[G]){case "string":v[G]=
D;break;case "number":v[G]=D.length?Number(D):NaN;break;case "boolean":v[G]="false"!=D.toLowerCase();break;case "function":""===D||-1!=D.search(/[^\w\.]+/i)?v[G]=new Function(D):v[G]=k.getObject(D,!1)||new Function(D);A.push(G);break;default:F=r[G],v[G]=F&&"length"in F?D?D.split(/\s*,\s*/):[]:F instanceof Date?""==D?new Date(""):"now"==D?new Date:e.fromISOString(D):F instanceof m?l.baseUrl+D:s(D)}else v[G]=D}}for(u=0;u<A.length;u++)C=A[u].toLowerCase(),c.removeAttribute(C),c[C]=null;if(Q)try{Q=s.call(f.propsThis,
"{"+Q+"}"),k.mixin(v,Q)}catch(L){throw Error(L.toString()+" in data-dojo-props\x3d'"+Q+"'");}k.mixin(v,d);h||(h=a&&(a._noScript||r._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",c));var P=[],B=[],K=[],U=[];if(h)for(y=0;y<h.length;y++)C=h[y],c.removeChild(C),d=C.getAttribute(p+"event")||C.getAttribute("event"),f=C.getAttribute(p+"prop"),Q=C.getAttribute(p+"method"),A=C.getAttribute(p+"advice"),u=C.getAttribute("type"),C=this._functionFromScript(C,p),d?"dojo/connect"==u?P.push({method:d,func:C}):"dojo/on"==
u?U.push({event:d,func:C}):v[d]=C:"dojo/aspect"==u?P.push({method:Q,advice:A,func:C}):"dojo/watch"==u?K.push({prop:f,func:C}):B.push(C);a=(h=a.markupFactory||r.markupFactory)?h(v,c,a):new a(v,c);return a.then?a.then(t):t(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(q)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var e=[],f=[],
h={},k=(b.scope||l._scopeName)+"Type",m="data-"+(b.scope||l._scopeName)+"-",s=m+"type",q=m+"textdir",m=m+"mixins",v=a.firstChild,r=b.inherited;if(!r){var x=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&x(a.parentNode,b)},r={dir:x(a,"dir"),lang:x(a,"lang"),textDir:x(a,q)},u;for(u in r)r[u]||delete r[u]}for(var r={inherited:r},w,A;;)if(v)if(1!=v.nodeType)v=v.nextSibling;else if(w&&"script"==v.nodeName.toLowerCase())(G=v.getAttribute("type"))&&/^dojo\/\w/i.test(G)&&w.push(v),
v=v.nextSibling;else if(A)v=v.nextSibling;else{var G=v.getAttribute(s)||v.getAttribute(k);u=v.firstChild;if(!G&&(!u||3==u.nodeType&&!u.nextSibling))v=v.nextSibling;else{A=null;if(G){var F=v.getAttribute(m);w=F?[G].concat(F.split(/\s*,\s*/)):[G];try{A=t(w,b.contextRequire)}catch(L){}A||n.forEach(w,function(a){~a.indexOf("/")&&!h[a]&&(h[a]=!0,f[f.length]=a)});F=A&&!A.prototype._noScript?[]:null;r={types:w,ctor:A,parent:r,node:v,scripts:F};r.inherited=c(r);e.push(r)}else r={node:v,scripts:w,parent:r};
w=F;A=v.stopParser||A&&A.prototype.stopParser&&!b.template;v=u}}else{if(!r||!r.node)break;v=r.node.nextSibling;A=!1;r=r.parent;w=r.scripts}var P=new p;f.length?(g("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+f.join(", ")),(b.contextRequire||d)(f,function(){P.resolve(n.filter(e,function(a){if(!a.ctor)try{a.ctor=t(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);
a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):P.resolve(e);return P.promise},_require:function(a,b){var c=s("{"+a.innerHTML+"}"),e=[],f=[],g=new p,h=b&&b.contextRequire||d,m;for(m in c)e.push(m),f.push(c[m]);h(f,function(){for(var a=0;a<e.length;a++)k.setObject(e[a],arguments[a]);g.resolve(arguments)});return g.promise},_scanAmd:function(a,b){var c=new p,d=c.promise;c.resolve(!0);var e=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,
b)});a.parentNode.removeChild(a)});return d},parse:function(a,b){var d;!b&&a&&a.rootNode?(b=a,d=b.rootNode):a&&k.isObject(a)&&!("nodeType"in a)?b=a:d=a;d=d?c.byId(d):h.body();b=b||{};var e=b.template?{template:!0}:{},f=[],g=this,m=this._scanAmd(d,b).then(function(){return g.scan(d,b)}).then(function(a){return g._instantiate(a,e,b,!0)}).then(function(a){return f=f.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(f,m);return f}};l.parser=u;f.parseOnLoad&&
r(100,u,"parse");return u})},"dojo/_base/url":function(){define(["./kernel"],function(d){var l=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,k=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,n=function(){for(var d=arguments,c=[d[0]],h=1;h<d.length;h++)if(d[h]){var m=new n(d[h]+""),c=new n(c[0]+"");if(""==m.path&&!m.scheme&&!m.authority&&!m.query)null!=m.fragment&&(c.fragment=m.fragment),m=c;else if(!m.scheme&&(m.scheme=c.scheme,!m.authority&&(m.authority=c.authority,
"/"!=m.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+m.path).split("/"),b=0;b<c.length;b++)"."==c[b]?b==c.length-1?c[b]="":(c.splice(b,1),b--):0<b&&(!(1==b&&""==c[0])&&".."==c[b]&&".."!=c[b-1])&&(b==c.length-1?(c.splice(b,1),c[b-1]=""):(c.splice(b-1,2),b-=2));m.path=c.join("/")}c=[];m.scheme&&c.push(m.scheme,":");m.authority&&c.push("//",m.authority);c.push(m.path);m.query&&c.push("?",m.query);m.fragment&&c.push("#",m.fragment)}this.uri=c.join("");d=this.uri.match(l);
this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(k),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=d[9]||null)};n.prototype.toString=function(){return this.uri};return d._Url=n})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(d,l){var k={};d.setObject("dojo.date.stamp",k);k.fromISOString=
function(d,f){k._isoRegExp||(k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=k._isoRegExp.exec(d),h=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);f&&(f=new Date(f),l.forEach(l.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return f["get"+a]()}),function(a,b){c[b]=c[b]||a}));h=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);100>c[0]&&h.setFullYear(c[0]||
1970);var m=0,b=c[7]&&c[7].charAt(0);"Z"!=b&&(m=60*(c[8]||0)+(Number(c[9])||0),"-"!=b&&(m*=-1));b&&(m-=h.getTimezoneOffset());m&&h.setTime(h.getTime()+6E4*m)}return h};k.toISOString=function(d,f){var c=function(a){return 10>a?"0"+a:a};f=f||{};var h=[],k=f.zulu?"getUTC":"get",b="";"time"!=f.selector&&(b=d[k+"FullYear"](),b=["0000".substr((b+"").length)+b,c(d[k+"Month"]()+1),c(d[k+"Date"]())].join("-"));h.push(b);if("date"!=f.selector){b=[c(d[k+"Hours"]()),c(d[k+"Minutes"]()),c(d[k+"Seconds"]())].join(":");
k=d[k+"Milliseconds"]();f.milliseconds&&(b+="."+(100>k?"0":"")+c(k));if(f.zulu)b+="Z";else if("time"!=f.selector)var k=d.getTimezoneOffset(),a=Math.abs(k),b=b+((0<k?"-":"+")+c(Math.floor(a/60))+":"+c(a%60));h.push(b)}return h.join("T")};return k})},"malifaux/cards/_TwoSidedMixin":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/on"],function(d,l,k){return l([],{curSide:null,postCreate:function(){this.inherited(arguments);k(this.frontOfCard.domNode,"click",d.hitch(this,this.swapSides));
k(this.backOfCard.domNode,"click",d.hitch(this,this.swapSides));this.curSide=this.frontOfCard},hide:function(){this.curSide!=this.frontOfCard&&this.swapSides();this.inherited(arguments)},swapSides:function(d){d&&d.stopPropagation();this.curSide.hide();this.curSide=this.curSide==this.frontOfCard?this.backOfCard:this.frontOfCard;this.curSide.show()},displayData:function(d){this.inherited(arguments);this.frontOfCard.set("cardData",d);this.backOfCard.set("cardData",d)}})})},"malifaux/cards/AvatarFrontDisplay":function(){define(["dojo/_base/lang",
"dojo/_base/declare","./UpgradeDisplay","dojo/text!./templates/AvatarFrontDisplay.html"],function(d,l,k,n){return l([k],{templateString:n})})},"malifaux/cards/UpgradeDisplay":function(){define("dojo/_base/lang dojo/_base/declare dojo/on dojo/dom-construct dojo/dom-style ../replaceSymbols ./CardDisplay dojo/text!./templates/UpgradeDisplay.html".split(" "),function(d,l,k,n,f,c,h,m){return l([h],{templateString:m,displayData:function(b){this.inherited(arguments);this.card_costNode&&(this.card_costNode.innerHTML=
b.data.cost);this.card_textNode.innerHTML="";for(var a=this.getItemGroups(b),c={},d=0;d<a.length;d++)c[a[d].type]?c[a[d].type].push(a[d]):c[a[d].type]=[a[d]];a.triggers&&0<a.triggers.length&&(c.triggers=b.data.triggers);a=n.place("\x3cdl\x3e\x3c/dl\x3e",this.card_textNode);this.displayCardITemsByGroup(c,a)},getItemGroups:function(b){var a=[].concat(b.data.abilities,b.data.actions);a.triggers=b.data.triggers;return a},displayCardITemsByGroup:function(b,a){b["tyAbil-modification"]&&this.displayAbilities(b["tyAbil-modification"],
a,!0);b["tyAbil-generic"]&&this.displayGenericAbilities(b["tyAbil-generic"],a);b.triggers&&this.displayTriggers(b.triggers,a);b["ty-AttackAction"]&&this.displayAttackActions(b["ty-AttackAction"],a);b["ty-TacticalAction"]&&this.displayTacticalActions(b["ty-TacticalAction"],a);b["tyAbil-manifestEvent"]&&this.displayManifestEvents(b["tyAbil-manifestEvent"],a)},displayGenericAbilities:function(b,a){n.place('\x3cdt class\x3d"abilityText"\x3eThis model gains the following abilit'+(1<b.length?"iess":"y")+
"\x3c/dt\x3e",a);this.displayAbilities(b,a)},displayAbilities:function(b,a,d){for(var f=0;f<b.length;f++)d||n.place("\x3cdt\x3e"+c(b[f].name)+"\x3c/dt\x3e",a),n.place("\x3cdd\x3e"+c(b[f].description)+"\x3c/dd\x3e",a)},displayTriggers:function(b,a){for(var c=0;c<b.length;c++){n.place('\x3cdt class\x3d"abilityText"\x3e'+b[c].text+"\x3c/dt\x3e",a);var d=n.place("\x3cdd\x3e\x3c/dd\x3e",a);this.addTriggersToAction(d,b[c].triggers)}},displayTacticalActions:function(b,a){n.place('\x3cdt class\x3d"abilityText"\x3eThis model gains the following tactical action'+
(1<b.length?"s":"")+"\x3c/dt\x3e",a);for(var c=0;c<b.length;c++)this.addAction(b[c],a)},displayManifestEvents:function(b,a){n.place('\x3cdt class\x3d"abilityText"\x3eManifest Event\x3c/dt\x3e',a);this.displayAbilities(b,a)},displayAttackActions:function(b,a){n.place('\x3cdt class\x3d"abilityText"\x3eThis model gains the following attack action'+(1<b.length?"s":"")+"\x3c/dt\x3e",a);for(var c=0;c<b.length;c++)this.addAction(b[c],a)},addAction:function(b,a){var d="("+b.ap+") "+b.name,f=[];b.stat&&f.push(b.stat);
b.tn&&f.push("Tn: "+b.tn);b.rst&&f.push("Rst: "+b.rst);b.rg&&f.push("Rg: "+b.rg);(f=f.join(" / "))&&(d+=" ( "+f+" )");n.place("\x3cdt\x3e"+c(d)+"\x3c/dt\x3e",a);d=n.place("\x3cdd\x3e"+c(b.description)+"\x3c/dd\x3e",a);this.addTriggersToAction(d,b.triggers)},addTriggersToAction:function(b,a){if(0<a.length)for(var d=n.place("\x3cdl\x3e\x3c/dl\x3e",b),f=0;f<a.length;f++)n.place("\x3cdt\x3e"+c(a[f].cost+" "+a[f].name)+"\x3c/dt\x3e",d),n.place("\x3cdd\x3e"+c(a[f].description)+"\x3c/dd\x3e",d)}})})},"malifaux/cards/CardDisplay":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-construct ../data dojo/dom-style dojo/dom-class ../replaceSymbols ./functions ./_DisplayMixin dojo/text!./templates/CardDisplay.html".split(" "),
function(d,l,k,n,f,c,h,m,b,a){return l([b],{templateString:a,cardData:null,displayData:function(a){this.addDataClasses(a);this.card_nameNode&&(this.card_nameNode.innerHTML=h(a.name,"text"==this.card_nameNode.nodeName?"tspan":"span"));this.card_factionColorNode&&(0<a.factions.length&&a.factions[0]?f.set(this.card_factionColorNode,"background",a.getFactionBackgroundColor()):f.set(this.card_factionColorNode,"background",""));this.card_factionColorNode2&&(0<a.factions.length&&a.factions[0]?f.set(this.card_factionColorNode2,
"background",a.getFactionBackgroundColor()):f.set(this.card_factionColorNode2,"background",""));this.card_factionSealsNode&&(0<a.factions.length&&a.factions[0])&&(this.card_factionSealsNode.innerHTML=a.getFactionSealsHtml(),4<a.factions.length?c.add(this.card_factionSealsNode,"manyFactions"):c.remove(this.card_factionSealsNode,"manyFactions"));if(this.card_characteristicsTypedNode){var b=[];if(a.characteristics)for(var d=0;d<a.characteristics.length;d++)"tyCh-GenericChar"!=a.characteristics[d].type&&
b.push(a.characteristics[d].name);this.card_characteristicsTypedNode.innerHTML=h(b.join(", "),"text"==this.card_characteristicsTypedNode.nodeName?"tspan":"span")}if(this.card_characteristicsUntypedNode){b=[];if(a.characteristics)for(d=0;d<a.characteristics.length;d++)"tyCh-GenericChar"==a.characteristics[d].type&&b.push(a.characteristics[d].name);this.card_characteristicsUntypedNode.innerHTML=h(b.join(", "),"text"==this.card_characteristicsUntypedNode.nodeName?"tspan":"span")}if(this.card_characteristicsNode){b=
[];if(a.characteristics)for(d=0;d<a.characteristics.length;d++)b.push(a.characteristics[d].name);this.card_characteristicsNode.innerHTML=h(b.join(", "),"text"==this.card_characteristicsNode.nodeName?"tspan":"span")}this.card_noteNode&&(this.card_noteNode.innerHTML=h(a.note,"text"==this.card_noteNode.nodeName?"tspan":"span"));if(this.card_tagsNode){b=[];if(a.tags)for(d=0;d<a.tags.length;d++)b.push(a.tags[d].name);this.card_tagsNode.innerHTML=h(b.join(", "),"text"==this.card_tagsNode.nodeName?"tspan":
"span")}},getClassNames:function(a){var b=[];b.push("id-"+a.id);b.push("type-"+n.cachedValues.types[a.type].name);for(var c=0;c<a.tags.length;c++)b.push("tag-"+a.tags[c].name);for(c=0;c<a.factions.length;c++)a.factions[c]&&b.push("faction-"+a.factions[c].name);return b},addDataClasses:function(a){c.add(this.domNode,this.getClassNames(a).join(" "))},removeDataClasses:function(a){c.remove(this.domNode,this.getClassNames(a).join(" "))},_setCardDataAttr:function(a){this.cardData&&this.removeDataClasses(this.cardData);
this.inherited(arguments)}})})},"malifaux/cards/AvatarBackDisplay":function(){define(["dojo/_base/lang","dojo/_base/declare","./UpgradeDisplay","dojo/text!./templates/AvatarBackDisplay.html"],function(d,l,k,n){return l([k],{templateString:n,displayData:function(d){this.inherited(arguments);this.card_nameNode.innerHTML=d.data.manifested.name;this.card_baseSizeNode.innerHTML=d.data.manifested.base+"mm"},getItemGroups:function(d){var c=[].concat(d.data.manifested.data.abilities,d.data.manifested.data.actions);
c.triggers=d.data.manifested.data.triggers;return c}})})},"malifaux/cards/Upgrade":function(){define("dojo/_base/lang dojo/_base/declare dojo/promise/all ../data ./functions ./UpgradeDisplay ./Card dojo/text!./templates/UpgradePreview.html".split(" "),function(d,l,k,n,f,c,h,m){return l([h],{typeWeight:35,displayDijitType:c,previewTemplate:m,loadUpgradeValues:function(b){for(var a=[],c=0;c<b.abilities.length;c++)a.push(f.loadDataKeyFromStore(b.abilities,c,n.stores.abilities));for(c=0;c<b.actions.length;c++){var d=
b.actions[c];d.action=d.id;a.push(f.loadDataKeyFromStore(d,"action",n.stores.actions).then(function(a){for(var b in a.action)a[b]||(a[b]=a.action[b]);delete a.action}));for(var g=0;g<d.triggers.length;g++)a.push(f.loadDataKeyFromStore(d.triggers,g,n.stores.triggers))}for(c=0;c<b.triggers.length;c++){d=b.triggers[c].triggers;for(g=0;g<d.length;g++)a.push(f.loadDataKeyFromStore(d,g,n.stores.triggers))}return k(a)},loadIndexedValues:function(){return this.inherited(arguments).then(d.hitch(this,function(){return this.loadUpgradeValues(this.data)}))}})})},
"malifaux/cards/Card":function(){define("dojo/_base/lang dojo/_base/declare dojo/Deferred ../data ./functions ./CardDisplay dijit/_WidgetBase dojo/text!./templates/CardPreview.html".split(" "),function(d,l,k,n,f,c,h,m){return l([],{id:"",name:"",type:"",factions:[],characteristics:[],data:{},note:"",tags:[],typeWeight:999,transformers:{},displayDijitType:c,previewTemplate:m,_previewHTML:"",_dataLoaded:null,constructor:function(b){this.factions=[];this.characteristics=[];this.tags=[];this.data={};
this.transformers={};d.mixin(this,b);this.postMixInProperties()},postMixInProperties:function(){this.inherited(arguments);this.loadFactionData();this.loadCharacteristicData();this.loadTransformers();this.loadTagData()},loadFactionData:function(){for(var b=0;b<this.factions.length;b++)"string"==typeof this.factions[b]&&(this.factions[b]=n.cachedValues.factions[this.factions[b]])},loadCharacteristicData:function(){for(var b=0;b<this.characteristics.length;b++)"string"==typeof this.characteristics[b]&&
(this.characteristics[b]=n.cachedValues.characteristics[this.characteristics[b]])},loadTagData:function(){for(var b=0;b<this.tags.length;b++)"string"==typeof this.tags[b]&&(this.tags[b]=n.cachedValues.types[this.tags[b]])},loadIndexedValues:function(){var b=new k;b.resolve();return b.promise},loadTransformers:function(){var b=this.getAllIds(this),a;for(a in b)for(var c in n.cachedValues.transformers)if(-1<n.cachedValues.transformers[c].linkIds.indexOf(a))for(var b=n.cachedValues.transformers[c],d=
0;d<b.types.length;d++){var f=n.cachedValues.types[b.types[d]].name;this.transformers[f]||(this.transformers[f]=[]);this.transformers[f].push(b["function"])}},getAllIds:function(b){var a={},c;for(c in b)"id"==c&&typeof("string"==b[c])&&(a[b.id]=null),"type"==c&&typeof("string"==b[c])?a[b.type]=null:"object"==typeof b[c]&&b.hasOwnProperty(c)&&d.mixin(a,this.getAllIds(b[c]));return a},dataLoaded:function(){this._dataLoaded||(this._dataLoaded=this.loadIndexedValues());return this._dataLoaded},runTransforms:function(b,
a,c){if(this.transformers[b])for(var d=0;d<this.transformers[b].length;d++)a=this.transformers[b][d].call(this,a,c||{});return a},getSortKeys:function(b){var a=[];b=b||{};switch(b.sortBy){case "tyCh-HiringChar":for(var a=this.getCharacteristics(b.sortBy),c=0;c<this.characteristics.length;c++)"Totem"!=this.characteristics[c].name&&-1<this.characteristics[c].name.indexOf("Totem")?a.push("ch-Totem"):"ch-001-Master"==this.characteristics[c].id?a.push("ch-001-Master"):"chRestriction-Avatar"==this.characteristics[c].id&&
a.push("chRestriction-Avatar");break;case "tyCh-CharGenCreature":a=this.getCharacteristics(["tyCh-GenericChar","tyCh-CreatureChar"]);break;case "tyCh-StationChar":case "tyCh-CreatureChar":case "tyCh-GenericChar":case "tyCh-RestrictionChar":a=this.getCharacteristics(b.sortBy);break;case "ty-CardFaction":a=this.getFactionsIds()}return a=this.runTransforms("getSortKeys",a,b)},getCharacteristics:function(b,a){var c=[];b&&!Array.isArray(b)&&(b=[b]);for(var d=0;d<this.characteristics.length;d++)if(!b||
"*"==b[0]||-1<b.indexOf(this.characteristics[d].type))c.push(this.characteristics[d][a?"name":"id"]);return c},getFactionsIds:function(){for(var b=[],a=0;a<this.factions.length;a++)this.factions[a]&&b.push(this.factions[a].id);return b},getSortName:function(b){var a=[this.name,("000"+this.typeWeight).substr(-3)],a=this.runTransforms("getSortName",a,b);return a.join(" ")},hasCharacteristics:function(b){for(var a=!1,c=0;c<this.characteristics.length;c++)if(this.characteristics[c]&&(this.characteristics[c].id==
b||this.characteristics[c].name==b)){a=this.characteristics[c];break}return a},hasFaction:function(b){for(var a=!1,c=0;c<this.factions.length;c++)if(this.factions[c]&&(this.factions[c].id==b||this.factions[c].name==b)){a=this.factions[c];break}return a},getPreviewHtml:function(){this._previewHTML||(this._previewHTML=d.replace(this.previewTemplate,d.hitch(this,function(b,a){return eval(a)})));return this._previewHTML},getFactionBackgroundColor:function(b){var a="";if(0<this.factions.length)if(b){a=
'\x3cstop  offset\x3d"0" style\x3d"stop-color:#'+this.factions[0].color+'"/\x3e';if(2<this.factions.length){b=1/(this.factions.length-1);for(var c=1;c<this.factions.length-1;c++)a+='\x3cstop  offset\x3d"'+b*c+'" style\x3d"stop-color:#'+this.factions[c].color+'"/\x3e'}a+='\x3cstop  offset\x3d"1" style\x3d"stop-color:#'+this.factions[this.factions.length-1].color+'"/\x3e'}else{a="#"+this.factions[0].color+" 0%";if(2<this.factions.length){b=100/(this.factions.length-1);for(c=1;c<this.factions.length-
1;c++)a+=", #"+this.factions[c].color+" "+b*c+"%"}a+=", #"+this.factions[this.factions.length-1].color+" 100%";a="linear-gradient(to right,"+a+")"}return a},getFactionSealsHtml:function(){for(var b="",a=0;a<this.factions.length;a++)b+='\x3cdiv style\x3d"background-image: url('+f.calcFilePath(this.factions[a].seal)+');"\x3e\x3c/div\x3e';return b},getClassNames:function(){var b=[];b.push("id-"+this.id);b.push("type-"+n.cachedValues.types[this.type].name);for(var a=0;a<this.tags.length;a++)b.push("tag-"+
this.tags[a].name);for(a=0;a<this.factions.length;a++)this.factions[a]&&b.push("faction-"+this.factions[a].name);for(a=0;a<this.characteristics.length;a++){var c="chrType-"+this.characteristics[a].type;0>b.indexOf(c)&&b.push(c)}return b.join(" ")}})})},"malifaux/cards/Manifest":function(){define("dojo/_base/lang dojo/_base/declare ../data ./ManifestDisplay ./Upgrade dojo/text!./templates/ManifestPreview.html".split(" "),function(d,l,k,n,f,c){return l([f],{typeWeight:25,displayDijitType:n,previewTemplate:c,
loadIndexedValues:function(){return this.inherited(arguments).then(d.hitch(this,function(){}))},getSortKeys:function(c){var d=this.inherited(arguments);if(k.smartSort)switch(c.sortBy){case "tyCh-StationChar":0>d.indexOf("ch-001-Master")&&d.push("ch-001-Master");break;case "ty-CardFaction":if(1>this.factions.length)for(var b in k.cachedValues.factions)"-"===b[2]&&0>d.indexOf(b)&&d.push(b)}return d}})})},"malifaux/cards/ManifestDisplay":function(){define("dojo/_base/lang dojo/_base/declare dojo/on dojo/dom-style dojo/dom-construct ../replaceSymbols ./UpgradeDisplay dojo/text!./templates/ManifestDisplay.html".split(" "),
function(d,l,k,n,f,c,h,m){return l([h],{templateString:m,displayCardITemsByGroup:function(b,a){b["tyAbil-manifest"]&&this.displayManifest(b["tyAbil-manifest"],a);this.inherited(arguments)},displayManifest:function(b,a){for(var d=0;d<b.length;d++)f.place("\x3cdt\x3eManifest\x3c/dt\x3e",a),f.place("\x3cdd\x3e"+c(b[d].description)+"\x3c/dd\x3e",a)},displayManifestEvents:function(b,a){for(var d=0;d<b.length;d++)f.place("\x3cdt\x3eManifest Event\x3c/dt\x3e",a),f.place("\x3cdd\x3e"+c(b[d].description)+
"\x3c/dd\x3e",a)}})})},"malifaux/cards/Model":function(){define("dojo/_base/lang dojo/_base/declare dojo/promise/all ./functions ../data ./ModelDisplay ./Card dojo/text!./templates/ModelPreview.html".split(" "),function(d,l,k,n,f,c,h,m){return l([h],{typeWeight:5,displayDijitType:c,previewTemplate:m,image:null,defaultImage:n.calcFilePath("malifaux/resources/images/ModelCardFront_portrate.png"),postMixInProperties:function(){this.inherited(arguments);this.data.imageClass="img-"+this.id;this.getImageUrl(this.id,
this.data.imageClass,this.defaultImage)},getImageUrl:function(b,a,c){return f.stores.images.query({linkedTo:this.id}).then(function(b){var d=c;b&&(0<b.length&&b[0].url)&&(d=b[0].url,0>d.indexOf("data")&&0>d.indexOf("http")&&(d=n.calcFilePath(d)));n.createCSSSelector("."+a,"background-image: url('"+d+"') !important;")})},loadIndexedValues:function(){return this.inherited(arguments).then(d.hitch(this,function(){for(var b=[],a=0;a<this.data.abilities.length;a++)b.push(n.loadDataKeyFromStore(this.data.abilities,
a,f.stores.abilities));for(a=0;a<this.data.actions.length;a++){var c=this.data.actions[a];c.action=c.id;b.push(n.loadDataKeyFromStore(c,"action",f.stores.actions).then(function(a){for(var b in a.action)a[b]||(a[b]=a.action[b]);delete a.action}));for(var d=0;d<c.triggers.length;d++)b.push(n.loadDataKeyFromStore(c.triggers,d,f.stores.triggers))}return k(b)}))}})})},"malifaux/cards/ModelDisplay":function(){define("dojo/_base/lang dojo/_base/declare dojo/on dojo/dom-style ./_DisplayMixin ./_TwoSidedMixin dojo/text!./templates/ModelDisplay.html malifaux/cards/ModelFrontDisplay malifaux/cards/ModelBackDisplay".split(" "),
function(d,l,k,n,f,c,h){return l([f,c],{templateString:h})})},"malifaux/cards/ModelFrontDisplay":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/dom-class ../replaceSymbols ./functions ./CardDisplay dojo/text!./templates/ModelFrontDisplay.html".split(" "),function(d,l,k,n,f,c,h,m){return d([h],{templateString:m,displayNote:!0,displayData:function(b){this.inherited(arguments);!b.note||!this.displayNote?n.add(this.cardNode,"hideNote"):b.note&&this.displayNote&&n.remove(this.cardNode,
"hideNote");b.getFactionBackgroundColor(!0);0>this.card_costGroupNode.attributes.getNamedItem("class").value.indexOf("hideMe")&&(this.card_costGroupNode.attributes.getNamedItem("class").value+=" hideMe");0>this.card_cacheGroupNode.attributes.getNamedItem("class").value.indexOf("hideMe")&&(this.card_cacheGroupNode.attributes.getNamedItem("class").value+=" hideMe");0>this.card_costCacheGroupNode.attributes.getNamedItem("class").value.indexOf("hideMe")&&(this.card_costCacheGroupNode.attributes.getNamedItem("class").value+=
" hideMe");b.data.cost&&b.data.cache?(this.card_costCacheGroupNode.attributes.getNamedItem("class").value=this.card_costCacheGroupNode.attributes.getNamedItem("class").value.replace(/ hideMe/g,""),this.card_cost2Node.innerHTML=f(b.data.cost,"tspan"),this.card_cache2Node.innerHTML=f(b.data.cache,"tspan")):b.data.cache?(this.card_cacheGroupNode.attributes.getNamedItem("class").value=this.card_cacheGroupNode.attributes.getNamedItem("class").value.replace(/ hideMe/g,""),this.card_cacheNode.innerHTML=
f(b.data.cache,"tspan")):(this.card_costGroupNode.attributes.getNamedItem("class").value=this.card_costGroupNode.attributes.getNamedItem("class").value.replace(/ hideMe/g,""),this.card_costNode.innerHTML=f(b.data.cost||"0","tspan"));this.card_portraitNode.className="portrait";n.add(this.card_portraitNode,b.data.imageClass);var a=!1;if(b.characteristics)for(var c=0;c<b.characteristics.length;c++)if("tyCh-GenericChar"==b.characteristics[c].type){a=!0;break}a?n.add(this.card_characteristicCarrotNode,
"twoLines"):n.remove(this.card_characteristicCarrotNode,"twoLines");this.card_dfNode.innerHTML=f(b.data.df||"-","tspan");this.card_wpNode.innerHTML=f(b.data.wp||"-","tspan");this.card_wdNode.innerHTML=f(b.data.wd||"-","tspan");this.card_wkNode.innerHTML=f(b.data.wk||"-","tspan");this.card_cgNode.innerHTML=f(b.data.cg||"-","tspan");this.card_htNode.innerHTML=f(b.data.ht||"-","tspan");this.card_woundsNode.innerHTML="";for(a=0;a<b.data.wd;a++)l.create("div",{},this.card_woundsNode);a=null;this.card_abilitiesLeftNode.innerHTML=
"";this.card_abilitiesRightNode.innerHTML="";this.setAbilitiySides(b.data.abilities);for(c=0;c<b.data.abilities.length;c++){var d=b.data.abilities[c],a=d._side?"r"==d._side?this.card_abilitiesRightNode:this.card_abilitiesLeftNode:c%2?this.card_abilitiesRightNode:this.card_abilitiesLeftNode;l.place("\x3cdt\x3e"+f(d.name)+"\x3c/dt\x3e",a);l.place("\x3cdd\x3e"+f(d.description)+"\x3c/dd\x3e",a)}},setAbilitiySides:function(b){if(0<b.length&&!b[0]._side){for(var a=0;a<b.length;a++){var c=b[a],d=l.create("span");
d.innerHTML=f(c.name)+": "+f(c.description);c._size=d.innerText.length+50}b=b.sort(function(a,b){return b._size-a._size});for(var g=0,c=[],h=0,d=[],a=0;a<b.length;a++)h<g?(d.push(b[a]),h+=b[a]._size):(c.push(b[a]),g+=b[a]._size);b=g<h;for(a=0;a<c.length;a++)c[a]._side=b?"r":"l";for(a=0;a<d.length;a++)d[a]._side=b?"l":"r"}}})})},"malifaux/cards/ModelBackDisplay":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/dom-class ../replaceSymbols ./functions ./CardDisplay dojo/text!./templates/ModelBackDisplay.html".split(" "),
function(d,l,k,n,f,c,h,m){return d([h],{templateString:m,displayNote:!0,displayData:function(b){this.inherited(arguments);b=b||{};!b.note||!this.displayNote?n.add(this.domNode,"hideNote"):b.note&&this.displayNote&&n.remove(this.domNode,"hideNote");this.card_baseSizeNode.innerHTML=f(b.data.base+"mm","tspan");this.card_attackActionsNode.innerHTML="";this.card_tacticalActionsNode.innerHTML="";for(var a=0;a<b.data.actions.length;a++)"ty-AttackAction"==b.data.actions[a].type?this.addAction(b.data.actions[a],
this.card_attackActionsNode):this.addAction(b.data.actions[a],this.card_tacticalActionsNode);this.card_attackActionsNode.innerHTML?n.remove(this.card_attackActionsContainerNode,"hideMe"):n.add(this.card_attackActionsContainerNode,"hideMe");this.card_tacticalActionsNode.innerHTML?n.remove(this.card_tacticalActionsContainerNode,"hideMe"):n.add(this.card_tacticalActionsContainerNode,"hideMe")},addAction:function(b,a){var c="("+b.ap+") "+b.name,d=[];b.stat&&d.push(b.stat);b.tn&&d.push("Tn: "+b.tn);b.rst&&
d.push("Rst: "+b.rst);b.rg&&d.push("Rg: "+b.rg);(d=d.join(" / "))&&(c+=" ( "+d+" )");l.place("\x3cdt\x3e"+f(c)+"\x3c/dt\x3e",a);c=l.place("\x3cdd\x3e"+f(b.description)+"\x3c/dd\x3e",a);this.addTriggersToAction(c,b.triggers)},addTriggersToAction:function(b,a){if(0<a.length)for(var c=l.place("\x3cdl\x3e\x3c/dl\x3e",b),d=0;d<a.length;d++)l.place("\x3cdt\x3e"+f(a[d].cost+" "+a[d].name)+"\x3c/dt\x3e",c),l.place("\x3cdd\x3e"+f(a[d].description)+"\x3c/dd\x3e",c)}})})},"malifaux/cards/lists/Group":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom dojo/dom-class dojo/on ./List dojo/text!./templates/Group.html malifaux/cards/lists/List".split(" "),
function(d,l,k,n,f,c,h){return l([c],{templateString:h,label:"",key:"",_visible:!1,postCreate:function(){this.inherited(arguments);this.key&&n.add(this.domNode,"groupKey-"+this.key);f(this.domNode,"click",d.hitch(this,function(c){(!this._visible||!k.isDescendant(c.target,this.cardList.domNode))&&this.toggle()}))},_setLabelAttr:function(c){this.labelNode.innerHTML=c;this._set("label",c)},addCard:function(c){this.cardList.addcard(c)},toggle:function(){this._visible?this.hide():this.show()},show:function(){this.cardList.show();
n.remove(this.domNode,"collapsed");this._visible=!0},hide:function(){this.cardList.hide();n.add(this.domNode,"collapsed");this._visible=!1},_setCardDataAttr:function(c){this.cardList.set("cardData",c);this._set("cardData",c)}})})},"malifaux/cards/lists/List":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/dom-construct","./_DisplayMixin","dojo/text!./templates/List.html"],function(d,l,k,n,f){return l([n],{templateString:f,cardData:null,_items:null,constructor:function(){this._items=
[]},addItem:function(c){c.getPreviewHtml?k.place(c.getPreviewHtml(),this.domNode):c.domNode?k.place(c.domNode,this.domNode):k.place(c,this);this._items.push(c)},displayData:function(c){this.inherited(arguments);Array.isArray(c)||(c=[c]);this.domNode.innerHTML="";this._items=[];for(var d=0;d<c.length;d++)this.addItem(c[d])}})})},"malifaux/cards/lists/_DisplayMixin":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-class dojo/Deferred dojo/promise/all ../_DisplayMixin".split(" "),function(d,
l,k,n,f,c){return l([c],{show:function(){k.remove(this.domNode,"collapsed")},hide:function(){k.add(this.domNode,"collapsed")},_setCardDataAttr:function(c){this._set("cardData",c);this._displayed.then(d.hitch(this,function(){this.displayData(c)}))}})})},"malifaux/sort/CardTypeOption":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/CardTypeOption.html".split(" "),function(d,
l,k,n,f,c,h,m,b){return l([c,h,m],{templateString:b,label:"",name:"cardTypes",value:"",selected:!0,_setSelectedAttr:function(a){this.inputNode.checked=!!a},show:function(){this.inputNode.disabled=!1;n.remove(this.domNode,"hideMe")},hide:function(){this.inputNode.disabled=!0;n.add(this.domNode,"hideMe")}})})},"malifaux/sort/ByStation":function(){define(["dojo/_base/lang","dojo/_base/declare","../data","./_SortMixin"],function(d,l,k,n){return l([n],{label:"Station",key:"tyCh-StationChar",keyQuery:k.stores.characteristics.query({type:"tyCh-StationChar"})})})},
"malifaux/sort/_SortMixin":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SortMixin.html".split(" "),function(d,l,k,n,f,c,h,m){return l([f,c,h],{templateString:m,label:"",key:"",otherCategoryName:"Other",inputName:"filterBy",domClass:"filterContainer",allowedCardTypes:["ty-AvatarCard","ty-ManifestCard","ty-ModelCard","ty-UpgradeCard"],keyQuery:null,filterOption:null,groupOption:null,
_keys:null,postCreate:function(){this.inherited(arguments);this.filterOption=document.createElement("option");this.filterOption.text=this.label;this.filterOption.value=this.key;this.groupOption=document.createElement("option");this.groupOption.text=this.label;this.groupOption.value=this.key;this.groupOption.disabled=!0},startup:function(){if(!this._started)return this.inherited(arguments),this.loadKeys().then(d.hitch(this,function(b){this._keys=b;this.setOptions(b);return b}))},setOptions:function(b){this.clearOptions();
for(var a=0;a<b.length;a++)this.addOption(b[a])},addOption:function(b){this.inputNode.addOption({label:b.label,value:b.value});this.options.push(b)},clearOptions:function(){this.options=[];this.inputNode.innerHTML=""},show:function(){this.inputNode.enable();k.remove(this.domNode,"hideMe")},hide:function(){this.inputNode.disable();k.add(this.domNode,"hideMe")},loadKeys:function(){return this.keyQuery.then(d.hitch(this,function(b){for(var a=[],c=0;c<b.length;c++)(0!=c||2>b.length||b[0].id!=b[1].id)&&
a.push({label:b[c].name,value:b[c].id});return a}))},test:function(b,a,c){return-1<b.getSortKeys(c).indexOf(a)},filter:function(b,a){a.sortList=b;return(new n).resolve(b).then(d.hitch(this,function(b){var c=a.filterBy;a.sortBy=a.filterId;if(c){for(var d=[],f=0;f<b.length;f++)this.test(b[f],c,a)&&d.push(b[f]);b=d}return b}))},group:function(b,a){return(new n).resolve([]).then(d.hitch(this,function(c){a.sortBy=a.groupBy;var f={other:{label:this.otherCategoryName,order:"ZZZZZZZZZZZZZ",key:"other",cardData:[]}};
for(c=0;c<b.length;c++){for(var g=b[c],h=!1,k=0;k<this._keys.length;k++){var m=this._keys[k];this.test(g,m.value,a)&&(f[m.value]||(f[m.value]={label:m.label,order:m.value,key:m.value,cardData:[]}),h=!0,f[m.value].cardData.push(g))}h||f.other.cardData.push(g)}c=[];for(var l in f)0<f[l].cardData.length&&(a.currentKey=f[l].key,a.sortList=d.clone(f[l].cardData),f[l].cardData=f[l].cardData.sort(this.getSortFunction(a)),c.push(f[l]));return c=c.sort(function(a,b){return a.order.localeCompare(b.order)})}))},
getSortFunction:function(b){return function(a,c){return a.getSortName(b).localeCompare(c.getSortName(b))}}})})},"malifaux/sort/ByFaction":function(){define(["dojo/_base/lang","dojo/_base/declare","../data","./_SortMixin"],function(d,l,k,n){return l([n],{label:"Faction",key:"ty-CardFaction",keyQuery:k.stores.factions.query({id:"*"},{sort:[{attribute:"name"}]})})})},"malifaux/sort/ByCardType":function(){define(["dojo/_base/lang","dojo/_base/declare","../data","./_SortMixin"],function(d,l,k,n){return l([n],
{label:"Card Type",key:"ty-CardType",allowedCardTypes:[],keyQuery:k.stores.types.query({category:"cardType"},{sort:[{attribute:"name"}]}),test:function(d,c){return d.type==c}})})},"malifaux/sort/SortOptions":function(){define("dojo/_base/lang dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/on dojo/dom-form ../data ./ByStation ./ByFaction ./ByCardType ./ByCharacteristic ./ByHiring ./CardTypeOption dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/SortOptions.html malifaux/form/Select".split(" "),
function(d,l,k,n,f,c,h,m,b,a,e,p,g,w,q,r,s,x){return l([w,q,r,s],{templateString:x,currentFilter:null,_prevOptions:"",filterList:[b,m,e,p,a],cardTypeSelectors:{},constructor:function(){this.cardTypeSelectors={}},postCreate:function(){this.inherited(arguments);this.selectGroup.addOption({label:"Nothing",value:""});for(var a=!0,b=0;b<this.filterList.length;b++)this.filterList[b]=new this.filterList[b],this.selectFilter.addOption({label:this.filterList[b].label,value:this.filterList[b].key}),this.selectGroup.addOption({label:this.filterList[b].label,
value:this.filterList[b].key}),this.filterList[b].placeAt(this.sortFilters),a||this.filterList[b].hide(),this.filterList[b].startup(),a=!1;this.currentFilter=this.filterList[0];for(var e in h.cachedValues.types)"cardType"==h.cachedValues.types[e].category&&!this.cardTypeSelectors[h.cachedValues.types[e].id]&&(this.cardTypeSelectors[h.cachedValues.types[e].id]=new g({label:h.cachedValues.types[e].name+"s",value:h.cachedValues.types[e].id}),this.cardTypeSelectors[h.cachedValues.types[e].id].placeAt(this.sortInclude).startup());
this.selectGroup.disableOption(this.currentFilter.key);this.setAllowedCardTypes(this.currentFilter.allowedCardTypes);f(this.selectFilter,"change",d.hitch(this,function(a){this.currentFilter.hide();this.selectGroup.enableAllOptions();for(a=0;a<this.filterList.length;a++)this.filterList[a].key===this.selectFilter.value&&(this.filterList[a].show(),this.currentFilter=this.filterList[a],this.selectGroup.disableOption(this.currentFilter.key));this.setAllowedCardTypes(this.currentFilter.allowedCardTypes)}));
f(this.sortForm,"change",d.hitch(this,function(a){JSON.stringify(c.toObject(this.sortForm))==this._prevOptions?k.set(this.submitButton,"disabled",!0):k.set(this.submitButton,"disabled",!1)}));f(this.sortForm,"submit",d.hitch(this,function(a){a.preventDefault();a=this.getSearchOptions();this._prevOptions=JSON.stringify(c.toObject(this.sortForm));k.set(this.submitButton,"disabled",!0);this.emit("setSortOptions",a)}))},setAllowedCardTypes:function(a){for(var b in this.cardTypeSelectors)-1<a.indexOf(this.cardTypeSelectors[b].value)?
this.cardTypeSelectors[b].show():this.cardTypeSelectors[b].hide();0<a.length?n.remove(this.sortIncludeContiner,"hideMe"):n.add(this.sortIncludeContiner,"hideMe")},getSearchOptions:function(){var a=c.toObject(this.sortForm);a.filter=this.currentFilter;if(1>a.filter.allowedCardTypes.length){a.cardTypes=[];for(var b in this.cardTypeSelectors)a.cardTypes.push(b)}Array.isArray(a.cardTypes)||(a.cardTypes=[a.cardTypes]);this.currentGroup=null;for(b=0;b<this.filterList.length;b++)this.filterList[b].key===
a.groupBy&&(this.currentGroup=this.filterList[b]);a.group=this.currentGroup;a.smartSort=!!a.smartSort;return a}})})},"malifaux/sort/ByCharacteristic":function(){define(["dojo/_base/lang","dojo/_base/declare","../data","./_SortMixin"],function(d,l,k,n){return l([n],{label:"Characteristic",key:"tyCh-CharGenCreature",keyQuery:k.stores.characteristics.query([{type:"tyCh-GenericChar"},{type:"tyCh-CreatureChar"}],{sort:[{attribute:"name"}]})})})},"malifaux/sort/ByHiring":function(){define(["dojo/_base/lang",
"dojo/_base/declare","../data","./_SortMixin"],function(d,l,k,n){return l([n],{label:"Hiring Restriction",key:"tyCh-HiringChar",otherCategoryName:"No Hiring Restriction",keyQuery:k.stores.characteristics.query([{type:"tyCh-HiringChar"},{id:"chRestriction-Avatar"},{id:"ch-001-Master"}],{sort:[{attribute:"name"}]}).then(function(d){for(var c=[],h=0;h<d.length;h++)("Totem"==d[h].name||0>d[h].name.indexOf("Totem"))&&c.push(d[h]);return c})})})},"malifaux/form/Select":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/dom-construct dojo/dom-attr dojo/dom-class dojo/on dojo/query dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Select.html dojo/NodeList-traverse dojo/NodeList-dom".split(" "),
function(d,l,k,n,f,c,h,m,b,a,e,p){return l([b,a,e],{templateString:p,label:"",name:"",value:null,options:[],_selectedOption:null,_optionsShown:!1,constructor:function(){this.options=[]},postCreate:function(){this.inherited(arguments);this.own(h(this.selectListNode,"click",d.hitch(this,this.toggleOptions)));this.own(h(this.selectListNode,"blur",d.hitch(this,function(){this.hideOptions()})));this.own(h(this.inputNode,"change",d.hitch(this,function(a){this.emit("change",{currentValue:this.value})})));
this.own(h(this.selectListNode,"dd[data-value]:click",d.hitch(this,function(a){this.set("value",m(a.target).closest("dd[data-value]").attr("data-value")[0])})))},toggleOptions:function(){this._optionsShown?this.hideOptions():this.showOptions()},disable:function(){c.add(this.domNode,"disabled");this.inputNode.disabled=!0},enable:function(){c.remove(this.domNode,"disabled");this.inputNode.disabled=!1},getOption:function(a){if("number"==typeof a)a=this.options[a];else if("string"==typeof a){for(var b=
!1,c=0;c<this.options.length;c++)if(this.options[c].value==a){b=!0;a=this.options[c];break}b||(a=null)}else 0>k.indexOf(this.options,a)&&(a=null);return a},disableOption:function(a){(a=this.getOption(a))&&a._domNode&&c.add(a._domNode,"disabled");this._selectedOption==a&&this.set("value","")},enableOption:function(a){(a=this.getOption(a))&&a._domNode&&c.remove(a._domNode,"disabled")},enableAllOptions:function(){for(var a=0;a<this.options.length;a++)this.enableOption(this.options[a])},disableAllOptions:function(){for(var a=
0;a<this.options.length;a++)this.disableOption(this.options[a])},showOptions:function(){c.add(this.domNode,"showOptions");this._optionsShown=!0},hideOptions:function(){c.remove(this.domNode,"showOptions");this._optionsShown=!1},addOption:function(a){a._domNode=n.place('\x3cdd data-value\x3d"'+a.value+'"\x3e'+a.label+"\x3c/dd\x3e",this.selectListNode);0>k.indexOf(this.options,a)&&this.options.push(a);(!this._selectedOption&&null===this.value||this.value==a.value)&&this.set("value",a.value)},removeOption:function(a){if((a=
this.getOption(a))&&a.domNode)n.destroy(a.domNode),this.options=this.options.splice(k.indexOf(this.options,a),1)},_setOptionsAttr:function(a){for(var b=0;b<a.length;b++)this.addOption(a[b])},_setValueAttr:function(a){if(!this._selectedOption||this._selectedOption.value!=a){this._selectedOption&&c.remove(this._selectedOption._domNode,"selected");this.selectedItemNode.innerHTML="";this._selectedOption=null;for(var b=0;b<this.options.length;b++)this.options[b].value==a&&(this._selectedOption=this.options[b],
this.selectedItemNode.innerHTML=this._selectedOption.label,this._selectedOption._domNode&&c.add(this._selectedOption._domNode,"selected"));this.inputNode.value=this._selectedOption.value+"";this._set("value",this.inputNode.value);a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0);this.inputNode.dispatchEvent(a)}}})})},"dojo/NodeList-traverse":function(){define(["./query","./_base/lang","./_base/array"],function(d,l,k){var n=d.NodeList;l.extend(n,{_buildArrayFromCallback:function(d){for(var c=
[],h=0;h<this.length;h++){var k=d.call(this[h],this[h],c);k&&(c=c.concat(k))}return c},_getUniqueAsNodeList:function(d){for(var c=[],h=0,m;m=d[h];h++)1==m.nodeType&&-1==k.indexOf(c,m)&&c.push(m);return this._wrap(c,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(f,c){var h=this._getUniqueAsNodeList(f),h=c?d._filterResult(h,c):h;return h._stash(this)},_getRelatedUniqueNodes:function(d,c){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(c),d)},children:function(d){return this._getRelatedUniqueNodes(d,
function(c,d){return l._toArray(c.childNodes)})},closest:function(f,c){return this._getRelatedUniqueNodes(null,function(h,k){do if(d._filterResult([h],f,c).length)return h;while(h!=c&&(h=h.parentNode)&&1==h.nodeType);return null})},parent:function(d){return this._getRelatedUniqueNodes(d,function(c,d){return c.parentNode})},parents:function(d){return this._getRelatedUniqueNodes(d,function(c,d){for(var f=[];c.parentNode;)c=c.parentNode,f.push(c);return f})},siblings:function(d){return this._getRelatedUniqueNodes(d,
function(c,d){for(var f=[],b=c.parentNode&&c.parentNode.childNodes,a=0;a<b.length;a++)b[a]!=c&&f.push(b[a]);return f})},next:function(d){return this._getRelatedUniqueNodes(d,function(c,d){for(var f=c.nextSibling;f&&1!=f.nodeType;)f=f.nextSibling;return f})},nextAll:function(d){return this._getRelatedUniqueNodes(d,function(c,d){for(var f=[],b=c;b=b.nextSibling;)1==b.nodeType&&f.push(b);return f})},prev:function(d){return this._getRelatedUniqueNodes(d,function(c,d){for(var f=c.previousSibling;f&&1!=
f.nodeType;)f=f.previousSibling;return f})},prevAll:function(d){return this._getRelatedUniqueNodes(d,function(c,d){for(var f=[],b=c;b=b.previousSibling;)1==b.nodeType&&f.push(b);return f})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(d,c){return 0!=c%2})},odd:function(){return this.filter(function(d,c){return 0==
c%2})}});return n})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(d,l,k,n,f,c,h,m,b){function a(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var e=function(a){return 1==a.length&&"string"==typeof a[0]},p=function(a){var b=a.parentNode;b&&b.removeChild(a)},g=l.NodeList,w=g._adaptWithCondition,q=g._adaptAsForEach,
r=g._adaptAsMap;n.extend(g,{_normalize:function(a,b){var e=!0===a.parse;if("string"==typeof a.template){var f=a.templateFunc||d.string&&d.string.substitute;a=f?f(a.template,a):a}f=typeof a;"string"==f||"number"==f?(a=c.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?n._toArray(a.childNodes):[a]):n.isArrayLike(a)?n.isArray(a)||(a=n._toArray(a)):a=[a];e&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,e,f){if(!(1!=b.nodeType&&"only"==e))for(var g,h=a.length,
k=h-1;0<=k;k--){var l=f?this._cloneNode(a[k]):a[k];if(a._runParse&&d.parser&&d.parser.parse){g||(g=b.ownerDocument.createElement("div"));g.appendChild(l);d.parser.parse(g);for(l=g.firstChild;g.firstChild;)g.removeChild(g.firstChild)}k==h-1?c.place(l,b,e):b.parentNode.insertBefore(l,b);b=l}},position:r(h.position),attr:w(a(m),e),style:w(a(b),e),addClass:q(f.add),removeClass:q(f.remove),toggleClass:q(f.toggle),replaceClass:q(f.replace),empty:q(c.empty),removeAttr:q(m.remove),marginBox:r(h.getMarginBox),
place:function(a,b){var d=l(a)[0];return this.forEach(function(a){c.place(a,d,b)})},orphan:function(a){return(a?l._filterResult(this,a):this).forEach(p)},adopt:function(a,b){return l(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new g;this.map(function(c){l(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=l._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(k.filter(c,
b[d],b[d+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var d=0,e;e=this[d];d++)a.length?this._place(a,e,b,0<d):c.empty(e);return this}});return g})},"malifaux/cards/Viewer":function(){define("dojo/_base/lang dojo/_base/declare dojo/on dojo/dom-construct dojo/dom-style ./_DisplayMixin dojo/text!./templates/Viewer.html malifaux/cards/ModelFrontDisplay malifaux/cards/ModelBackDisplay".split(" "),function(d,l,k,n,f,c,h){return l([c],{templateString:h,cardDijit:null,_scroll:{x:0,
y:0},show:function(){this._scroll.x=window.scrollX;this._scroll.y=window.scrollY;window.scrollTo(0,0);f.set(document.body,"overflow","hidden");this.cardDijit&&this.cardDijit.show();this.inherited(arguments)},hide:function(){this.inherited(arguments);this.cardDijit&&this.cardDijit.hide();f.set(document.body,"overflow","");window.scrollTo(this._scroll.x,this._scroll.y)},displayData:function(c){this.inherited(arguments);var b=c.displayDijitType;!this.cardDijit||this.cardDijit.cardData.type!=c.type?(this.cardDijit&&
this.cardDijit.destroy(),this.cardDijit=new b({cardData:c},n.place("\x3cdiv\x3e\x3c/div\x3e",this.domNode)),this._started&&this.cardDijit.startup()):this.cardDijit.set("cardData",c)}})})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(d,l,k,n,f,c,h,m){h.isDebug&&k(["./_firebug/firebug"]);
var b=h.require;b&&(b=c.map(f.isArray(b)?b:[b],function(a){return a.replace(/\./g,"/")}),d.isAsync?k(b):m(1,function(){k(b)}));return d})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(d,l,k,n,f,c,h){var m=function(){},b=Object.freeze||function(){},a=d.Deferred=function(d){function h(a){if(q)throw Error("This deferred has already been resolved");w=a;q=!0;g()}function g(){for(var a;!a&&v;){var b=v;v=
v.next;if(a=b.progress==m)q=!1;var d=x?b.error:b.resolved;f("config-useDeferredInstrumentation")&&x&&l.instrumentRejected&&l.instrumentRejected(w,!!d);if(d)try{var e=d(w);e&&"function"===typeof e.then?e.then(c.hitch(b.deferred,"resolve"),c.hitch(b.deferred,"reject"),c.hitch(b.deferred,"progress")):(d=a&&void 0===e,a&&!d&&(x=e instanceof Error),b.deferred[d&&x?"reject":"resolve"](d?w:e))}catch(g){b.deferred.reject(g)}else x?b.deferred.reject(w):b.deferred.resolve(w)}}var w,q,r,s,x,t,v,A=this.promise=
new k;this.isResolved=A.isResolved=function(){return 0==s};this.isRejected=A.isRejected=function(){return 1==s};this.isFulfilled=A.isFulfilled=function(){return 0<=s};this.isCanceled=A.isCanceled=function(){return r};this.resolve=this.callback=function(a){this.fired=s=0;this.results=[a,null];h(a)};this.reject=this.errback=function(a){x=!0;this.fired=s=1;f("config-useDeferredInstrumentation")&&l.instrumentRejected&&l.instrumentRejected(a,!!v);h(a);this.results=[null,a]};this.progress=function(a){for(var b=
v;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,m);return this};A.then=this.then=function(b,c,d){var e=d==m?this:new a(A.cancel);b={resolved:b,error:c,progress:d,deferred:e};v?t=t.next=b:v=t=b;q&&g();return e.promise};var u=this;A.cancel=this.cancel=function(){if(!q){var a=d&&d(u);q||(a instanceof Error||(a=new n(a)),a.log=!1,u.reject(a))}r=!0};b(A)};c.extend(a,{addCallback:function(a){return this.addCallbacks(c.hitch.apply(d,arguments))},addErrback:function(a){return this.addCallbacks(null,
c.hitch.apply(d,arguments))},addBoth:function(a){var b=c.hitch.apply(d,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=d.when=h;return a})},"dojo/_base/json":function(){define(["./kernel","../json"],function(d,l){d.fromJson=function(d){return eval("("+d+")")};d._escapeString=l.stringify;d.toJsonIndentStr="\t";d.toJson=function(k,n){return l.stringify(k,function(d,c){if(c){var h=c.__json__||c.json;if("function"==typeof h)return h.call(c)}return c},n&&d.toJsonIndentStr)};return d})},"dojo/_base/Color":function(){define(["./kernel",
"./lang","./array","./config"],function(d,l,k,n){var f=d.Color=function(c){c&&this.setColor(c)};f.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]};l.extend(f,{r:255,g:255,b:255,a:1,_set:function(c,d,f,b){this.r=c;this.g=d;this.b=
f;this.a=b},setColor:function(c){l.isString(c)?f.fromString(c,this):l.isArray(c)?f.fromArray(c,this):(this._set(c.r,c.g,c.b,c.a),c instanceof f||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+k.map(["r","g","b"],function(c){c=this[c].toString(16);return 2>c.length?"0"+c:c},this).join("")},toCss:function(c){var d=this.r+", "+this.g+", "+this.b;return(c?"rgba("+
d+", "+this.a:"rgb("+d)+")"},toString:function(){return this.toCss(!0)}});f.blendColors=d.blendColors=function(c,d,l,b){var a=b||new f;k.forEach(["r","g","b","a"],function(b){a[b]=c[b]+(d[b]-c[b])*l;"a"!=b&&(a[b]=Math.round(a[b]))});return a.sanitize()};f.fromRgb=d.colorFromRgb=function(c,d){var k=c.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return k&&f.fromArray(k[1].split(/\s*,\s*/),d)};f.fromHex=d.colorFromHex=function(c,d){var l=d||new f,b=4==c.length?4:8,a=(1<<b)-1;c=Number("0x"+c.substr(1));
if(isNaN(c))return null;k.forEach(["b","g","r"],function(d){var f=c&a;c>>=b;l[d]=4==b?17*f:f});l.a=1;return l};f.fromArray=d.colorFromArray=function(c,d){var k=d||new f;k._set(Number(c[0]),Number(c[1]),Number(c[2]),Number(c[3]));isNaN(k.a)&&(k.a=1);return k.sanitize()};f.fromString=d.colorFromString=function(c,d){var k=f.named[c];return k&&f.fromArray(k,d)||f.fromRgb(c,d)||f.fromHex(c,d)};return f})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
function(d){return d})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(d,l,k){var n=window,f={addOnWindowUnload:function(c,f){d.windowUnloaded||k(n,"unload",d.windowUnloaded=function(){});k(n,"unload",l.hitch(c,f))},addOnUnload:function(c,d){k(n,"beforeunload",l.hitch(c,d))}};d.addOnWindowUnload=f.addOnWindowUnload;d.addOnUnload=f.addOnUnload;return f})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),
function(d,l,k,n,f,c,h,m){d.byId=l.byId;d.isDescendant=l.isDescendant;d.setSelectable=l.setSelectable;d.getAttr=n.get;d.setAttr=n.set;d.hasAttr=n.has;d.removeAttr=n.remove;d.getNodeProp=n.getNodeProp;d.attr=function(b,a,c){return 2==arguments.length?n["string"==typeof a?"get":"set"](b,a):n.set(b,a,c)};d.hasClass=c.contains;d.addClass=c.add;d.removeClass=c.remove;d.toggleClass=c.toggle;d.replaceClass=c.replace;d._toDom=d.toDom=h.toDom;d.place=h.place;d.create=h.create;d.empty=function(b){h.empty(b)};
d._destroyElement=d.destroy=function(b){h.destroy(b)};d._getPadExtents=d.getPadExtents=m.getPadExtents;d._getBorderExtents=d.getBorderExtents=m.getBorderExtents;d._getPadBorderExtents=d.getPadBorderExtents=m.getPadBorderExtents;d._getMarginExtents=d.getMarginExtents=m.getMarginExtents;d._getMarginSize=d.getMarginSize=m.getMarginSize;d._getMarginBox=d.getMarginBox=m.getMarginBox;d.setMarginBox=m.setMarginBox;d._getContentBox=d.getContentBox=m.getContentBox;d.setContentSize=m.setContentSize;d._isBodyLtr=
d.isBodyLtr=m.isBodyLtr;d._docScroll=d.docScroll=m.docScroll;d._getIeDocumentElementOffset=d.getIeDocumentElementOffset=m.getIeDocumentElementOffset;d._fixIeBiDiScrollLeft=d.fixIeBiDiScrollLeft=m.fixIeBiDiScrollLeft;d.position=m.position;d.marginBox=function(b,a){return a?m.setMarginBox(b,a):m.getMarginBox(b)};d.contentBox=function(b,a){return a?m.setContentSize(b,a):m.getContentBox(b)};d.coords=function(b,a){d.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");b=l.byId(b);var c=
k.getComputedStyle(b),c=m.getMarginBox(b,c),f=m.position(b,a);c.x=f.x;c.y=f.y;return c};d.getProp=f.get;d.setProp=f.set;d.prop=function(b,a,c){return 2==arguments.length?f["string"==typeof a?"get":"set"](b,a):f.set(b,a,c)};d.getStyle=k.get;d.setStyle=k.set;d.getComputedStyle=k.getComputedStyle;d.__toPixelValue=d.toPixelValue=k.toPixelValue;d.style=function(b,a,c){switch(arguments.length){case 1:return k.get(b);case 2:return k["string"==typeof a?"get":"set"](b,a)}return k.set(b,a,c)};return d})},"dojo/_base/NodeList":function(){define(["./kernel",
"../query","./array","./html","../NodeList-dom"],function(d,l,k){l=l.NodeList;var n=l.prototype;n.connect=l._adaptAsForEach(function(){return d.connect.apply(this,arguments)});n.coords=l._adaptAsMap(d.coords);l.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");k.forEach(l.events,function(d){var c="on"+d;n[c]=function(d,f){return this.connect(c,d,f)}});return d.NodeList=l})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(d,l,k,n,f,c,h,m,b,a,e,p,g,w,q,r){d._xhrObj=q._create;var s=d.config;d.objectToQuery=n.objectToQuery;d.queryToObject=n.queryToObject;d.fieldToObject=c.fieldToObject;d.formToObject=c.toObject;d.formToQuery=c.toQuery;d.formToJson=c.toJson;d._blockAsync=!1;var x=d._contentHandlers=d.contentHandlers={text:function(a){return a.responseText},json:function(a){return b.fromJson(a.responseText||null)},"json-comment-filtered":function(a){m.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
a=a.responseText;var c=a.indexOf("/*"),d=a.lastIndexOf("*/");if(-1==c||-1==d)throw Error("JSON was not comment filtered");return b.fromJson(a.substring(c+2,d))},javascript:function(a){return d.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&(l("dom-qsa2.1")&&!b.querySelectorAll&&l("dom-parser"))&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(l("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),
c(3),c(2)];e.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(e){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};d._ioSetArgs=function(b,e,g,k){var l={args:b,url:b.url},m=null;if(b.form){var m=f.byId(b.form),p=m.getAttributeNode("action");l.url=l.url||(p?p.value:null);m=c.toObject(m)}p=[{}];m&&p.push(m);b.content&&p.push(b.content);
b.preventCache&&p.push({"dojo.preventCache":(new Date).valueOf()});l.query=n.objectToQuery(a.mixin.apply(null,p));l.handleAs=b.handleAs||"text";var t=new h(function(a){a.canceled=!0;e&&e(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});t.addCallback(g);var q=b.load;q&&a.isFunction(q)&&t.addCallback(function(a){return q.call(b,a,l)});var r=b.error;r&&a.isFunction(r)&&t.addErrback(function(a){return r.call(b,a,l)});var v=b.handle;v&&a.isFunction(v)&&
t.addBoth(function(a){return v.call(b,a,l)});t.addErrback(function(a){return k(a,t)});s.ioPublish&&(d.publish&&!1!==l.args.ioPublish)&&(t.addCallbacks(function(a){d.publish("/dojo/io/load",[t,a]);return a},function(a){d.publish("/dojo/io/error",[t,a]);return a}),t.addBoth(function(a){d.publish("/dojo/io/done",[t,a]);return a}));t.ioArgs=l;return t};var t=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},v=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},A=function(a){0>=
u&&(u=0,s.ioPublish&&(d.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish))&&d.publish("/dojo/io/stop"))},u=0;g.after(w,"_onAction",function(){u-=1});g.after(w,"_onInFlight",A);d._ioCancelAll=w.cancelAll;d._ioNotifyStart=function(a){s.ioPublish&&(d.publish&&!1!==a.ioArgs.args.ioPublish)&&(u||d.publish("/dojo/io/start"),u+=1,d.publish("/dojo/io/send",[a]))};d._ioWatch=function(b,c,d,e){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(a){return c(b)},isReady:function(a){return d(b)},
handleResponse:function(a){return e(b)}});w(b);A(b)};d._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};d.xhr=function(a,b,c){var e,f=d._ioSetArgs(b,function(a){e&&e.cancel()},t,v),g=f.ioArgs;"postData"in b?g.query=b.postData:"putData"in b?g.query=b.putData:"rawBody"in b?g.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&d._ioAddQueryToUrl(g);var h={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,
ioArgs:g};"undefined"!==typeof b.headers&&(h.headers=b.headers);"undefined"!==typeof b.contentType&&(h.headers||(h.headers={}),h.headers["Content-Type"]=b.contentType);"undefined"!==typeof g.query&&(h.data=g.query);"undefined"!==typeof b.sync&&(h.sync=b.sync);d._ioNotifyStart(f);try{e=q(g.url,h,!0)}catch(k){return f.cancel(),f}f.ioArgs.xhr=e.response.xhr;e.then(function(){f.resolve(f)}).otherwise(function(a){g.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);
f.reject(a)});return f};d.xhrGet=function(a){return d.xhr("GET",a)};d.rawXhrPost=d.xhrPost=function(a){return d.xhr("POST",a,!0)};d.rawXhrPut=d.xhrPut=function(a){return d.xhr("PUT",a,!0)};d.xhrDelete=function(a){return d.xhr("DELETE",a)};d._isDocumentOk=function(a){return r.checkStatus(a.status)};d._getText=function(a){var b;d.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(d.xhr,{_xhrObj:d._xhrObj,fieldToObject:c.fieldToObject,formToObject:c.toObject,objectToQuery:n.objectToQuery,
formToQuery:c.toQuery,formToJson:c.toJson,queryToObject:n.queryToObject,contentHandlers:x,_ioSetArgs:d._ioSetArgs,_ioCancelAll:d._ioCancelAll,_ioNotifyStart:d._ioNotifyStart,_ioWatch:d._ioWatch,_ioAddQueryToUrl:d._ioAddQueryToUrl,_isDocumentOk:d._isDocumentOk,_getText:d._getText,get:d.xhrGet,post:d.xhrPost,put:d.xhrPut,del:d.xhrDelete});return d.xhr})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(d,l,k,n,f){function c(a,b){var c=
a.xhr;a.status=a.xhr.status;try{a.text=c.responseText}catch(e){}"xml"===a.options.handleAs&&(a.data=c.responseXML);if(!b)try{k(a)}catch(f){b=f}b?this.reject(b):n.checkStatus(c.status)?this.resolve(a):(b=new d("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function h(a){return this.xhr.getResponseHeader(a)}function m(k,t,r){var s=f("native-formdata")&&t&&t.data&&t.data instanceof FormData,u=n.parseArgs(k,n.deepCreate(q,t),s);k=u.url;t=u.options;var z,H=n.deferred(u,g,a,e,c,function(){z&&
z()}),J=u.xhr=m._create();if(!J)return H.cancel(new d("XHR was not created")),r?H:H.promise;u.getHeader=h;p&&(z=p(J,H,u));var M=t.data,R=!t.sync,N=t.method;try{J.open(N,k,R,t.user||w,t.password||w);t.withCredentials&&(J.withCredentials=t.withCredentials);f("native-response-type")&&t.handleAs in b&&(J.responseType=b[t.handleAs]);var O=t.headers;k=s?!1:"application/x-www-form-urlencoded";if(O)for(var T in O)"content-type"===T.toLowerCase()?k=O[T]:O[T]&&J.setRequestHeader(T,O[T]);k&&!1!==k&&J.setRequestHeader("Content-Type",
k);(!O||!("X-Requested-With"in O))&&J.setRequestHeader("X-Requested-With","XMLHttpRequest");n.notify&&n.notify.emit("send",u,H.promise.cancel);J.send(M)}catch(E){H.reject(E)}l(H);J=null;return r?H:H.promise}f.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});f.add("dojo-force-activex-xhr",function(){return f("activex")&&!document.addEventListener&&"file:"===window.location.protocol});f.add("native-xhr2",function(){if(f("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==
typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});f.add("native-formdata",function(){return"undefined"!==typeof FormData});f.add("native-response-type",function(){return f("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});f.add("native-xhr2-blob",function(){if(f("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var b={blob:f("native-xhr2-blob")?
"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},a,e,p,g;f("native-xhr2")?(a=function(a){return!this.isFulfilled()},g=function(a,b){b.xhr.abort()},p=function(a,b,c){function e(a){b.handleResponse(c)}function f(a){a=new d("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function g(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded=a.position,b.progress(c))}a.addEventListener("load",e,!1);a.addEventListener("error",
f,!1);a.addEventListener("progress",g,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",f,!1);a.removeEventListener("progress",g,!1);a=null}}):(a=function(a){return a.xhr.readyState},e=function(a){return 4===a.xhr.readyState},g=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var w,q={data:null,query:null,sync:!1,method:"GET"};m._create=function(){throw Error("XMLHTTP not available");};if(f("native-xhr")&&!f("dojo-force-activex-xhr"))m._create=
function(){return new XMLHttpRequest};else if(f("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),m._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),m._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(s){}}n.addCommonMethods(m);return m})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(d,l,k,n){function f(b){var c=a[b.options.handleAs];
b.data=c?c(b):b.data||b.text;return b}n.add("activex","undefined"!==typeof ActiveXObject);n.add("dom-parser",function(a){return"DOMParser"in a});var c;if(n("activex")){var h=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],m;c=function(a){function b(a){try{var e=new ActiveXObject(a);e.async=!1;e.loadXML(d);c=e;m=a}catch(f){return!1}return!0}var c=a.data,d=a.text;c&&(n("dom-qsa2.1")&&!c.querySelectorAll&&n("dom-parser"))&&(c=(new DOMParser).parseFromString(d,
"application/xml"));if(!c||!c.documentElement)(!m||!b(m))&&k.some(h,b);return c}}var b=function(a){return!n("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):a.xhr.response},a={javascript:function(a){return l.eval(a.text||"")},json:function(a){return d.parse(a.text||null)},xml:c,blob:b,arraybuffer:b,document:b};f.register=function(b,c){a[b]=c};return f})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),
function(d,l,k,n,f,c,h,m,b){var a=k.mixin,e={},p=e._Line=function(a,b){this.start=a;this.end=b};p.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var g=e.Animation=function(b){a(this,b);k.isArray(this.curve)&&(this.curve=new p(this.curve[0],this.curve[1]))};g.prototype=new n;k.extend(g,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(l.debugAtAllCosts)this[a].apply(this,
c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,d=k.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(a){this._delayTimer&&this._clearTimer();
this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);
return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=
(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},
_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var w=0,q=null,r={run:function(){}};k.extend(g,{_startTimer:function(){this._timer||(this._timer=c.after(r,"run",k.hitch(this,"_cycle"),!0),w++);q||(q=setInterval(k.hitch(r,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,w--);0>=w&&(clearInterval(q),q=null,w=0)}});var s=h("ie")?function(a){var c=a.style;!c.width.length&&"auto"==b.get(a,"width")&&(c.width="auto")}:function(){};
e._fade=function(d){d.node=m.byId(d.node);var f=a({properties:{}},d);d=f.properties.opacity={};d.start=!("start"in f)?function(){return+b.get(f.node,"opacity")||0}:f.start;d.end=f.end;d=e.animateProperty(f);c.after(d,"beforeBegin",k.partial(s,f.node),!0);return d};e.fadeIn=function(b){return e._fade(a({end:1},b))};e.fadeOut=function(b){return e._fade(a({end:0},b))};e._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var x=function(a){this._properties=a;for(var b in a){var c=a[b];
c.start instanceof f&&(c.tempColor=new f)}};x.prototype.getValue=function(a){var b={},c;for(c in this._properties){var d=this._properties[c],e=d.start;e instanceof f?b[c]=f.blendColors(e,d.end,a,d.tempColor).toCss():k.isArray(e)||(b[c]=(d.end-e)*a+e+("opacity"!=c?d.units||"px":0))}return b};e.animateProperty=function(e){var h=e.node=m.byId(e.node);e.easing||(e.easing=d._defaultEasing);e=new g(e);c.after(e,"beforeBegin",k.hitch(e,function(){var c={},d;for(d in this.properties){if("width"==d||"height"==
d)this.node.display="block";var e=this.properties[d];k.isFunction(e)&&(e=e(h));e=c[d]=a({},k.isObject(e)?e:{end:e});k.isFunction(e.start)&&(e.start=e.start(h));k.isFunction(e.end)&&(e.end=e.end(h));var g=0<=d.toLowerCase().indexOf("color"),l=function(a,c){var d={height:a.offsetHeight,width:a.offsetWidth}[c];if(void 0!==d)return d;d=b.get(a,c);return"opacity"==c?+d:g?d:parseFloat(d)};"end"in e?"start"in e||(e.start=l(h,d)):e.end=l(h,d);g?(e.start=new f(e.start),e.end=new f(e.end)):e.start="opacity"==
d?+e.start:parseFloat(e.start)}this.curve=new x(c)}),!0);c.after(e,"onAnimate",k.hitch(b,"set",e.node),!0);return e};e.anim=function(a,b,c,d,f,h){return e.animateProperty({node:a,duration:c||g.prototype.duration,properties:b,easing:d,onEnd:f}).play(h||0)};a(d,e);d._Animation=g;return e})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(d,l,k,n,f,c,h){var m=function(a){return a.replace(/\./g,"/")},b=/\/\/>>built/,a=[],e=[],p=function(b,
c,d){a.push(d);h.forEach(b.split(","),function(a){a=O(a,c.module);e.push(a);T(a)});g()},g=function(){var b,c;for(c in R)if(b=R[c],void 0===b.noReqPluginCheck&&(b.noReqPluginCheck=/loadInit\!/.test(c)||/require\!/.test(c)?1:0),!b.executed&&!b.noReqPluginCheck&&b.injected==A)return;D(function(){var b=a;a=[];h.forEach(b,function(a){a(1)})})},w=function(a,b,c){var e=/\(|\)/g,f=1;for(e.lastIndex=b;(b=e.exec(a))&&!(f=")"==b[0]?f-1:f+1,0==f););if(0!=f)throw"unmatched paren around character "+e.lastIndex+
" in: "+a;return[d.trim(a.substring(c,e.lastIndex))+";\n",e.lastIndex]},q=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,r=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,s=/(^|\s)(require|define)\s*\(/m,x=function(a,b){var c,d,e,f=[],g=[];c=[];for(b=b||a.replace(q,function(a){r.lastIndex=s.lastIndex=0;return r.test(a)||s.test(a)?"":a});c=r.exec(b);)d=r.lastIndex,e=d-c[0].length,d=w(b,d,e),"loadInit"==c[2]?f.push(d[0]):g.push(d[0]),r.lastIndex=d[1];
c=f.concat(g);return c.length||!s.test(b)?[a.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),c.join(""),c]:0},t=k.initSyncLoader(p,g,function(a,c){var d,e,g=[],h=[];if(b.test(c)||!(d=x(c)))return 0;e=a.mid+"-*loadInit";for(var k in O("dojo",a).result.scopeMap)g.push(k),h.push('"'+k+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+e+"',{\n\tnames:"+f.stringify(g)+",\n\tdef:function("+g.join(",")+"){"+d[1]+"}});\n\ndefine("+f.stringify(g.concat(["dojo/loadInit!"+e]))+", function("+
g.join(",")+"){\n"+d[0]+"});"}),v=t.sync,A=t.requested,u=t.arrived,z=t.nonmodule,H=t.executing,J=t.executed,M=t.syncExecStack,R=t.modules,N=t.execQ,O=t.getModule,T=t.injectModule,E=t.setArrived,I=t.signal,S=t.finishExec,C=t.execModule,y=t.getLegacyMode,D=t.guardCheckComplete,p=t.dojoRequirePlugin;d.provide=function(a){var b=M[0],d=c.mixin(O(m(a),k.module),{executed:H,result:c.getObject(a,!0)});E(d);b&&(b.provides||(b.provides=[])).push(function(){d.result=c.getObject(a);delete d.provides;d.executed!==
J&&S(d)});return d.result};l.add("config-publishRequireResult",1,0,0);d.require=function(a,b){var d=function(a,b){var c=O(m(a),k.module);if(M.length&&M[0].finish)M[0].finish.push(a);else{if(c.executed)return c.result;b&&(c.result=z);var d=y();T(c);d=y();c.executed!==J&&c.injected===u&&t.guardCheckComplete(function(){C(c)});if(c.executed)return c.result;d==v?c.cjs?N.unshift(c):M.length&&(M[0].finish=[a]):N.push(c)}}(a,b);l("config-publishRequireResult")&&(!c.exists(a)&&void 0!==d)&&c.setObject(a,d);
return d};d.loadInit=function(a){a()};d.registerModulePath=function(a,b){var c={};c[a.replace(/\./g,"/")]=b;k({paths:c})};d.platformRequire=function(a){a=(a.common||[]).concat(a[d._name]||a["default"]||[]);for(var b;a.length;)c.isArray(b=a.shift())?d.require.apply(d,b):d.require(b)};d.requireIf=d.requireAfterIf=function(a,b,c){a&&d.require(b,c)};d.requireLocalization=function(a,b,c){k(["../i18n"],function(d){d.getLocalization(a,b,c)})};return{extractLegacyApiApplications:x,require:p,loadInit:function(a,
b,c){b([a],function(a){b(a.names,function(){for(var e="",f=[],g=0;g<arguments.length;g++)e+="var "+a.names[g]+"\x3d arguments["+g+"]; ",f.push(arguments[g]);eval(e);var h=b.module,k=[],l,e={provide:function(a){a=m(a);a=O(a,h);a!==h&&E(a)},require:function(a,b){a=m(a);b&&(O(a,h).result=z);k.push(a)},requireLocalization:function(a,b,c){l||(l=["dojo/i18n"]);c=(c||d.locale).toLowerCase();a=m(a)+"/nls/"+(/root/i.test(c)?"":c+"/")+m(b);O(a,h).isXd&&l.push("dojo/i18n!"+a)},loadInit:function(a){a()}},g={},
q;try{for(q in e)g[q]=d[q],d[q]=e[q];a.def.apply(null,f)}catch(r){I("error",[{src:n.id,id:"failedDojoLoadInit"},r])}finally{for(q in e)d[q]=g[q]}l&&(k=k.concat(l));k.length?p(k.join(","),b,c):c()})})}}})},"url:malifaux/cards/templates/AvatarDisplay.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"malifaux/cards/AvatarFrontDisplay" data-dojo-attach-point\x3d"frontOfCard"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"hideMe" data-dojo-type\x3d"malifaux/cards/AvatarBackDisplay" data-dojo-attach-point\x3d"backOfCard"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/CardDisplay.html":'\x3cdiv class\x3d"cardDisplay"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_nameNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_characteristicsNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_factionColorNode" style\x3d"height: 20px;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_factionSealsNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_noteNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_tagsNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/UpgradeDisplay.html":'\x3cdiv class\x3d"cardDisplay upgradeCard"\x3e\r\n\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"header" data-dojo-attach-point\x3d"card_factionColorNode"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer" data-dojo-attach-point\x3d"card_factionColorNode2"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"costBackground"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"factionSeal" data-dojo-attach-point\x3d"card_factionSealsNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"restrictions"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_noteNode"\x3e\x3c/div\x3e\r\n\t\x3csvg class\x3d"data" viewBox\x3d"0 0 376 526" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\x3ctext class\x3d"name" x\x3d"50%" y\x3d"6%" data-dojo-attach-point\x3d\'card_nameNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\x3ctext class\x3d"costCentered" x\x3d"47.25%" y\x3d"15%" text-anchor\x3d"middle" alignment-baseline\x3d"central"\x3ecost \x3ctspan data-dojo-attach-point\x3d\'card_costNode\' alignment-baseline\x3d"central"\x3e\x3c/tspan\x3e ss\x3c/text\x3e\r\n\t\t\x3cforeignObject x\x3d"4.5%" y\x3d"17%" width\x3d"335" height\x3d"287"\x3e\r\n\t\t\t\x3cdiv class\x3d"cardText" data-dojo-attach-point\x3d\'card_textNode\'\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/foreignObject\x3e\r\n\t\t\x3ctext class\x3d"characteristics" x\x3d"50%" y\x3d"96.5%" data-dojo-attach-point\x3d\'card_characteristicsNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\x3c/svg\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/AvatarFrontDisplay.html":'\t\x3cdiv class\x3d"cardDisplay avatarCard cardFront"\x3e\r\n\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"header" data-dojo-attach-point\x3d"card_factionColorNode"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer" data-dojo-attach-point\x3d"card_factionColorNode2"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"costBackground"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"factionSeal" data-dojo-attach-point\x3d"card_factionSealsNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"restrictions"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_noteNode"\x3e\x3c/div\x3e\r\n\t\x3csvg class\x3d"data" viewBox\x3d"0 0 376 526" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\x3ctext class\x3d"name" x\x3d"50%" y\x3d"6%" data-dojo-attach-point\x3d\'card_nameNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\x3ctext class\x3d"costCentered" x\x3d"47.25%" y\x3d"15%" text-anchor\x3d"middle" alignment-baseline\x3d"central"\x3ecost \x3ctspan data-dojo-attach-point\x3d\'card_costNode\' alignment-baseline\x3d"central"\x3e\x3c/tspan\x3e ss\x3c/text\x3e\r\n\t\t\x3ctext class\x3d"state" x\x3d"-70%" y\x3d"70%" text-anchor\x3d"middle" transform\x3d"rotate(-90)"\x3ePremanifest\x3c/text\x3e\r\n\t\t\x3cforeignObject x\x3d"4.5%" y\x3d"17%" width\x3d"335" height\x3d"287"\x3e\r\n\t\t\t\x3cdiv class\x3d"cardText" data-dojo-attach-point\x3d\'card_textNode\'\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/foreignObject\x3e\r\n\t\t\x3ctext class\x3d"characteristics" x\x3d"50%" y\x3d"96.5%" data-dojo-attach-point\x3d\'card_characteristicsNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\x3c/svg\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/AvatarBackDisplay.html":'\t\x3cdiv class\x3d"cardDisplay avatarCard cardBack"\x3e\r\n\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"header" data-dojo-attach-point\x3d"card_factionColorNode"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer" data-dojo-attach-point\x3d"card_factionColorNode2"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"baseBackground"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"restrictions"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_noteNode"\x3e\x3c/div\x3e\r\n\t\x3csvg class\x3d"data" viewBox\x3d"0 0 376 526" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\x3ctext class\x3d"name" x\x3d"50%" y\x3d"6%" data-dojo-attach-point\x3d\'card_nameNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\x3ctext class\x3d"state" x\x3d"-70%" y\x3d"70%" text-anchor\x3d"middle" transform\x3d"rotate(-90)"\x3eManifested\x3c/text\x3e\r\n\t\t\x3ctext class\x3d"baseSize" x\x3d"87%" y\x3d"85%" data-dojo-attach-point\x3d\'card_baseSizeNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\x3cforeignObject x\x3d"4.5%" y\x3d"9%" width\x3d"335" height\x3d"410"\x3e\r\n\t\t\t\x3cdiv class\x3d"cardText" data-dojo-attach-point\x3d\'card_textNode\'\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/foreignObject\x3e\r\n\t\t\x3ctext class\x3d"characteristics" x\x3d"50%" y\x3d"96.5%" data-dojo-attach-point\x3d\'card_characteristicsNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\x3c/svg\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/CardPreview.html":'\x3cli class\x3d"cardListItem {this.getClassNames()}" data-id\x3d"{this.id}"\x3e\r\n\t\x3cdiv class\x3d"listItemContent"\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"name"\x3e{this.name}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristics"\x3e{this.getCharacteristics(\'*\',true).join(\', \')}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionColor" style\x3d\'background-image: {this.getFactionBackgroundColor()};\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionSeals"\x3e{this.getFactionSealsHtml()}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/li\x3e\r\n',
"url:malifaux/cards/templates/UpgradePreview.html":'\x3cli class\x3d"cardListItem upgradeListItem {this.getClassNames()}" data-id\x3d"{this.id}"\x3e\r\n\t\x3cdiv class\x3d"listItemContent"\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"costCache"\x3e\r\n\t\t\t\x3cdiv class\x3d"cost"\x3e\x3cdiv class\x3d"label"\x3eCost\x3c/div\x3e\x3cdiv class\x3d"value"\x3e{this.data.cost || 0}\x3c/div\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"name"\x3e{this.name}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristics"\x3e{this.getCharacteristics(\'*\',true).join(\', \')}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionColor" style\x3d\'background-image: {this.getFactionBackgroundColor()};\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionSeals"\x3e{this.getFactionSealsHtml()}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/li\x3e\r\n',
"url:malifaux/cards/templates/AvatarPreview.html":'\x3cli class\x3d"cardListItem avatarListItem {this.getClassNames()}" data-id\x3d"{this.id}"\x3e\r\n\t\x3cdiv class\x3d"listItemContent"\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"costCache"\x3e\r\n\t\t\t\x3cdiv class\x3d"cost"\x3e\x3cdiv class\x3d"label"\x3eCost\x3c/div\x3e\x3cdiv class\x3d"value"\x3e{this.data.cost || 0}\x3c/div\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"name"\x3e{this.name}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristics"\x3e{this.getCharacteristics(\'*\',true).join(\', \')}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionColor" style\x3d\'background-image: {this.getFactionBackgroundColor()};\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionSeals"\x3e{this.getFactionSealsHtml()}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/li\x3e\r\n',
"url:malifaux/cards/templates/ManifestDisplay.html":'\x3cdiv class\x3d"cardDisplay manifestCard"\x3e\r\n\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"card_noteNode"\x3e\x3c/div\x3e\r\n\t\x3csvg class\x3d"data" viewBox\x3d"0 0 376 526" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\x3ctext class\x3d"name" x\x3d"50%" y\x3d"6%" data-dojo-attach-point\x3d\'card_nameNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\x3cforeignObject x\x3d"4.5%" y\x3d"17%" width\x3d"335" height\x3d"287"\x3e\r\n\t\t\t\x3cdiv class\x3d"cardText" data-dojo-attach-point\x3d\'card_textNode\'\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/foreignObject\x3e\r\n\t\x3c/svg\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/ManifestPreview.html":'\x3cli class\x3d"cardListItem manifestListItem {this.getClassNames()}" data-id\x3d"{this.id}"\x3e\r\n\t\x3cdiv class\x3d"listItemContent"\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"name"\x3e{this.name}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristics"\x3e{this.getCharacteristics(\'*\',true).join(\', \')}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/li\x3e\r\n',"url:malifaux/cards/templates/ModelDisplay.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-type\x3d"malifaux/cards/ModelFrontDisplay" data-dojo-attach-point\x3d"frontOfCard"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"hideMe" data-dojo-type\x3d"malifaux/cards/ModelBackDisplay" data-dojo-attach-point\x3d"backOfCard"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/ModelFrontDisplay.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"cardDisplay modelCard cardFront hideNote" data-dojo-attach-point\x3d\'cardNode\'\x3e\r\n\t\t\x3cdiv class\x3d"portrait" data-dojo-attach-point\x3d\'card_portraitNode\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"foreground"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"footer" data-dojo-attach-point\x3d\'card_factionColorNode\'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionSeal" data-dojo-attach-point\x3d\'card_factionSealsNode\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristicCarrot" data-dojo-attach-point\x3d\'card_characteristicCarrotNode\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"wounds" data-dojo-attach-point\x3d\'card_woundsNode\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"noteBackground"\x3e\x3c/div\x3e\r\n\t\t\x3csvg class\x3d"data" viewBox\x3d"0 0 526 376" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\x3cforeignObject x\x3d"0%" y\x3d"0%" width\x3d"100%" height\x3d"100%"\x3e\r\n\t\t\x3cdiv style\x3d"padding-top: 1px;"\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"costCacheDisplay" data-dojo-attach-point\x3d\'aa_card_factionColorNode2\'\x3e\r\n\t\t\t\t\x3cdiv class\x3d"costCacheDisplayTexture"\x3e\r\n\t\t\t\t\x3cdiv class\x3d\'costGroup\' data-dojo-attach-point\x3d\'card_costGroupNode\'\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"costLabel"\x3eCost\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cost" data-dojo-attach-point\x3d\'card_costNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d\'cacheGroup\' data-dojo-attach-point\x3d\'card_cacheGroupNode\'\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cacheLabel"\x3eCache\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cache" data-dojo-attach-point\x3d\'card_cacheNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\x3cdiv class\x3d\'costCacheGroup\' data-dojo-attach-point\x3d\'card_costCacheGroupNode\'\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"costLabel"\x3eCost\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cost" data-dojo-attach-point\x3d\'card_cost2Node\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cacheLabel"\x3eCache\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cache" data-dojo-attach-point\x3d\'card_cache2Node\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\r\n\t\t\t\x3cdiv class\x3d"name" data-dojo-attach-point\x3d\'card_nameNode\'\x3e\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"characteristics"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"characteristics-typed" data-dojo-attach-point\x3d\'card_characteristicsTypedNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"characteristics-untyped" data-dojo-attach-point\x3d\'card_characteristicsUntypedNode\'\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"stats"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"df" data-dojo-attach-point\x3d\'card_dfNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"wp" data-dojo-attach-point\x3d\'card_wpNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"wd" data-dojo-attach-point\x3d\'card_wdNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"wk" data-dojo-attach-point\x3d\'card_wkNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"cg" data-dojo-attach-point\x3d\'card_cgNode\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"ht" data-dojo-attach-point\x3d\'card_htNode\'\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"abilitiesLabel" x\x3d"49%" y\x3d"56%" text-anchor\x3d"middle"\x3eAbilities\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"abilities"\x3e\r\n\t\t\t\t\x3cdl data-dojo-attach-point\x3d\'card_abilitiesLeftNode\'\x3e\r\n\t\t\t\t\x3c/dl\x3e\r\n\t\t\t\t\x3cdl data-dojo-attach-point\x3d\'card_abilitiesRightNode\'\x3e\r\n\t\t\t\t\x3c/dl\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"note" data-dojo-attach-point\x3d\'card_noteNode\'\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c/foreignObject\x3e\r\n\t\t\x3c/svg\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/ModelBackDisplay.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"cardDisplay modelCard cardBack hideNote" data-dojo-attach-point\x3d\'cardNode\'\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"footer" data-dojo-attach-point\x3d\'card_factionColorNode\'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"noteBackground"\x3e\x3c/div\x3e\r\n\t\t\x3csvg class\x3d"data" viewBox\x3d"0 0 526 376" preserveAspectRatio\x3d"xMaxYMax"\x3e\r\n\t\t\t\x3ctext class\x3d"name" x\x3d"-36%" y\x3d"7.5%" data-dojo-attach-point\x3d\'card_nameNode\' transform\x3d"rotate(-90)" text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\t\x3cforeignObject class\x3d"actions" x\x3d"12%" y\x3d"5%" width\x3d"86.5%" height\x3d"92%"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d\'card_attackActionsContainerNode\'\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"actionsLabel"\x3eAttack Actions\x3chr style\x3d"width: 70.2%;" /\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdl data-dojo-attach-point\x3d\'card_attackActionsNode\'\x3e\x3c/dl\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d\'card_tacticalActionsContainerNode\'\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"actionsLabel"\x3eTactical Actions\x3chr style\x3d"width: 67.5%;" /\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdl data-dojo-attach-point\x3d\'card_tacticalActionsNode\'\x3e\x3c/dl\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/foreignObject\x3e\r\n\t\t\t\x3ctext class\x3d"baseSize" x\x3d"91.75%" y\x3d"96%" data-dojo-attach-point\x3d\'card_baseSizeNode\' text-anchor\x3d"middle"\x3e\x3c/text\x3e\r\n\t\t\t\r\n\t\t\t\x3cforeignObject x\x3d"27%" y\x3d"79%" width\x3d"200" height\x3d"50" transform\x3d"rotate(11)"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"note" data-dojo-attach-point\x3d\'card_noteNode\'\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/foreignObject\x3e\r\n\t\t\x3c/svg\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/ModelPreview.html":'\x3cli class\x3d"cardListItem modelListItem {this.getClassNames()}" data-id\x3d"{this.id}"\x3e\r\n\t\x3cdiv class\x3d"listItemContent"\x3e\r\n\t\t\x3cdiv class\x3d"betaIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"costCache"\x3e\r\n\t\t\t\x3cdiv class\x3d"cost {(this.data.cost || this.data.cost\x3d\x3d\x3d0)?\'\':\'hideMe\'}"\x3e\x3cdiv class\x3d"label"\x3eCost\x3c/div\x3e\x3cdiv class\x3d"value"\x3e{this.data.cost}\x3c/div\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"cache {(this.data.cache)?\'\':\'hideMe\'}"\x3e\x3cdiv class\x3d"label"\x3eCache\x3c/div\x3e\x3cdiv class\x3d"value"\x3e{this.data.cache}\x3c/div\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"name"\x3e{this.name}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"characteristics"\x3e{this.getCharacteristics(\'*\',true).join(\', \')}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionColor" style\x3d\'background-image: {this.getFactionBackgroundColor()};\'\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"portrait {this.data.imageClass}"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"factionSeals"\x3e{this.getFactionSealsHtml()}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/li\x3e\r\n',
"url:malifaux/cards/lists/templates/List.html":'\x3cul class\x3d"cardList"\x3e\r\n\x3c/ul\x3e',"url:malifaux/cards/lists/templates/Group.html":'\x3cli class\x3d"cardGroup collapsed"\x3e\r\n\t\x3cdiv class\x3d"cardGroupHeader" data-dojo-attach-point\x3d"labelNode"\x3e\x3c/div\x3e\r\n\t\x3cul class\x3d"collapsed" data-dojo-type\x3d"malifaux/cards/lists/List" data-dojo-attach-point\x3d"cardList"\x3e\x3c/ul\x3e\r\n\x3c/li\x3e',"url:malifaux/sort/templates/CardTypeOption.html":'\x3cdiv class\x3d"formItem selectCardType type-${value}"\x3e\r\n\t\x3cinput id\x3d"${id}_input" type\x3d"checkbox" name\x3d"${name}" value\x3d"${value}" data-dojo-attach-point\x3d"inputNode" data-dojo-attach-point\x3d\'inputNode\' /\x3e\x3clabel for\x3d"${id}_input"\x3e${label}\x3c/label\x3e\r\n\x3c/div\x3e\r\n',
"url:malifaux/sort/templates/_SortMixin.html":'\x3cdiv class\x3d"${domClass}"\x3e\r\n\t\x3cselect data-dojo-type\x3d"malifaux/form/Select" data-dojo-attach-point\x3d"inputNode" name\x3d"${inputName}"\x3e\x3c/select\x3e\r\n\x3c/div\x3e',"url:malifaux/templates/Browser.html":'\x3cdiv class\x3d"modelBrowser showSortPane"\x3e\r\n\t\x3cdiv class\x3d"displayPaneVeil" data-dojo-attach-point\x3d"displayPaneVeilNode"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"appHeader"\x3e\r\n\t\t\x3cdiv class\x3d"appTitle"\x3eBrowser\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"displayPane"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"cardList" data-dojo-type\x3d"malifaux/cards/lists/List"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\r\n\t\x3cdiv class\x3d"sortPane" data-dojo-attach-point\x3d"sortPane"\x3e\r\n\t\t\x3cdiv\x3e\r\n\t\t\t\x3cdiv class\x3d"paneTitle"\x3eFilters\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"showSortButton" data-dojo-attach-point\x3d"showSortButtonNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"malifaux/sort/SortOptions" data-dojo-attach-point\x3d"sortOptions"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"logoPane"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"hideMe" data-dojo-type\x3d"malifaux/cards/Viewer" data-dojo-attach-point\x3d"cardViewer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/sort/templates/SortOptions.html":'\x3cdiv class\x3d"sortOptions"\x3e\r\n\x3cform data-dojo-attach-point\x3d"sortForm"\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectFilter" data-dojo-type\x3d"malifaux/form/Select" data-dojo-props\x3d"label: \'Filter By:\',name: \'filterId\'"\x3e\x3c/select\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"sortFilters"\x3e\x3c/div\x3e\r\n\t\x3cbr /\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectGroup" data-dojo-type\x3d"malifaux/form/Select" data-dojo-props\x3d"label: \'Group By:\', name: \'groupBy\'"\x3e\x3c/select\x3e\r\n\t\x3cbr /\x3e\r\n\t\x3cdiv class\x3d"formItem" data-dojo-attach-point\x3d"sortIncludeContiner"\x3e\r\n\t\tInclude:\r\n\t\t\x3cdiv class\x3d"sortIncludeTypes" data-dojo-attach-point\x3d"sortInclude"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"formItem"\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3cinput id\x3d"${id}_smartSort" type\x3d"checkbox" name\x3d"smartSort" value\x3d"true" checked\x3d"checked" /\x3e\x3clabel for\x3d"${id}_smartSort"\x3eUse Smart Sort\x3c/label\x3e\r\n\t\t\x3cbr /\x3e\r\n\t\t\x3ccenter\x3e\x3cbutton data-dojo-attach-point\x3d"submitButton"\x3eRefresh List\x3c/button\x3e\x3c/center\x3e\r\n\t\x3c/div\x3e\r\n\x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:malifaux/form/templates/Select.html":'\x3cdiv class\x3d\'formItem formSelect\'\x3e\r\n\t\x3clabel for\x3d"${id}_inputDisplay" data-dojo-attach-point\x3d"labelNode"\x3e${label}\x3c/label\x3e\r\n\t\x3cinput id\x3d\'${id}_input\' type\x3d"hidden" name\x3d"${name}" value\x3d\'${value}\' data-dojo-attach-point\x3d"inputNode" /\x3e\r\n\t\x3cdiv class\x3d\'selectContainer\'\x3e\r\n\t\x3cdl id\x3d"${id}_inputDisplay" tabindex\x3d\'0\' data-dojo-attach-point\x3d\'selectListNode\'\x3e\r\n\t\t\x3cdt data-dojo-attach-point\x3d"selectedItemNode"\x3e\x3c/dt\x3e\r\n\t\x3c/dl\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:malifaux/cards/templates/Viewer.html":'\x3cdiv class\x3d"cardViewer cardContainer"\x3e\r\n\t\x3cul class\x3d"menu"\x3e\r\n\t\t\x3cli\x3eX\x3c/li\x3e\r\n\t\x3c/ul\x3e\r\n\x3c/div\x3e'}});(function(){var d=this.require;d({cache:{}});!d.async&&d(["dojo"]);d.boot&&d.apply(null,d.boot)})();